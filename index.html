<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGI Era</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cdefs%3E%3ClinearGradient id='f' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%2300d4ff'/%3E%3Cstop offset='100%25' stop-color='%238b5cf6'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect x='2' y='10' width='20' height='20' rx='3' fill='url(%23f)'/%3E%3Cpath d='M2 13 L12 3 L32 3 L22 13 Z' fill='%2300d4ff' fill-opacity='0.6'/%3E%3Cpath d='M22 10 L32 3 L32 23 L22 30 Z' fill='%238b5cf6' fill-opacity='0.6'/%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- Cloudflare Turnstile -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        :root {
            --bg-primary: #0a0a0b;
            --bg-secondary: #111113;
            --bg-card: #18181b;
            --text-primary: #fafafa;
            --text-secondary: #71717a;
            --accent: #00d4ff;
            --accent-purple: #8b5cf6;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-pink: #ec4899;
            --accent-glow: rgba(0, 212, 255, 0.15);
            --border: rgba(255, 255, 255, 0.06);
            --matrix-green: #00ff41;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Outfit', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Noise overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.015;
            z-index: 1000;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* Grid background */
        .grid-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
            z-index: -1;
        }

        /* Glow orbs */
        .glow-orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(120px);
            pointer-events: none;
            z-index: -1;
            transition: all 1s ease;
        }

        .glow-orb-1 {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.08) 0%, transparent 70%);
            top: -200px;
            right: -100px;
            animation: float 20s ease-in-out infinite;
        }

        .glow-orb-2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.06) 0%, transparent 70%);
            bottom: 10%;
            left: -100px;
            animation: float 25s ease-in-out infinite reverse;
        }

        .glow-orb-3 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.05) 0%, transparent 70%);
            top: 50%;
            right: 20%;
            animation: float 30s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, 30px); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 1.5rem 4rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            background: rgba(10, 10, 11, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.02);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            position: relative;
            transform-style: preserve-3d;
            animation: cubeJump 2s ease-in-out infinite;
        }

        @keyframes cubeJump {
            0%, 100% { transform: rotateX(10deg) rotateY(-10deg) translateY(3px); }
            50% { transform: rotateX(10deg) rotateY(-10deg) translateY(-3px); }
        }

        .logo-face {
            position: absolute;
            border-radius: 4px;
        }

        .logo-face-front {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, var(--accent), var(--accent-purple));
            transform: translateZ(12px);
            top: 4px;
            left: 4px;
        }

        .logo-face-top {
            width: 24px;
            height: 16px;
            background: rgba(0, 212, 255, 0.6);
            transform: rotateX(90deg) translateZ(4px);
            top: -8px;
            left: 4px;
            border-radius: 4px 4px 0 0;
        }

        .logo-face-right {
            width: 16px;
            height: 24px;
            background: rgba(139, 92, 246, 0.6);
            transform: rotateY(90deg) translateZ(20px);
            top: 4px;
            left: 4px;
            border-radius: 0 4px 4px 0;
        }

        .logo-text {
            font-family: 'Outfit', sans-serif;
            font-size: 1.375rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.02em;
            line-height: 1;
        }

        .nav-links {
            display: flex;
            gap: 3rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: color 0.3s ease;
            letter-spacing: 0.01em;
            cursor: pointer;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after,
        .nav-links a.active::after {
            width: 100%;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--text-primary);
        }

        .nav-cta {
            padding: 0.625rem 1.5rem;
            background: var(--text-primary);
            color: var(--bg-primary);
            border: none;
            border-radius: 100px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(255, 255, 255, 0.1);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-auth {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .nav-auth.hidden {
            display: none;
        }

        .nav-login {
            padding: 0.625rem 1.25rem;
            background: transparent;
            color: var(--text-secondary);
            border: none;
            font-family: 'Outfit', sans-serif;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .nav-login:hover {
            color: var(--text-primary);
        }

        /* 用户菜单 */
        .user-menu {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.375rem 0.75rem 0.375rem 0.375rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 100px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .user-menu:hover {
            border-color: rgba(255, 255, 255, 0.15);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .user-name {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .user-menu svg {
            color: var(--text-secondary);
            transition: transform 0.3s ease;
        }

        .user-menu.active svg {
            transform: rotate(180deg);
        }

        /* 用户下拉菜单 */
        .user-dropdown {
            position: absolute;
            top: calc(100% + 0.5rem);
            right: 0;
            width: 240px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.5rem;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
            z-index: 1000;
        }

        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown-header {
            padding: 0.75rem;
        }

        .user-dropdown-name {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .user-dropdown-email {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            margin-top: 0.125rem;
        }

        .user-dropdown-divider {
            height: 1px;
            background: var(--border);
            margin: 0.25rem 0;
        }

        .user-dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.625rem 0.75rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .user-dropdown-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .user-dropdown-item.logout {
            color: #ef4444;
        }

        .user-dropdown-item.logout:hover {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 8rem 2rem 4rem;
            position: relative;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--accent);
            margin-bottom: 2rem;
            animation: fadeInUp 0.8s ease;
        }

        .hero-badge::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .hero h1 {
            font-size: clamp(3rem, 8vw, 5.5rem);
            font-weight: 700;
            line-height: 1.05;
            letter-spacing: -0.03em;
            margin-bottom: 1.5rem;
            animation: fadeInUp 0.8s ease 0.1s backwards;
        }

        .hero h1 .gradient {
            background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 50%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 540px;
            margin-bottom: 2.5rem;
            animation: fadeInUp 0.8s ease 0.2s backwards;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            animation: fadeInUp 0.8s ease 0.3s backwards;
        }

        .btn-primary {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.875rem 1.75rem;
            background: var(--text-primary);
            color: var(--bg-primary);
            border: none;
            border-radius: 100px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 40px rgba(255, 255, 255, 0.15);
        }

        .btn-secondary {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.875rem 1.75rem;
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border);
            border-radius: 100px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.15);
        }

        /* Stats */
        .stats {
            display: flex;
            gap: 4rem;
            margin-top: 5rem;
            animation: fadeInUp 0.8s ease 0.4s backwards;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-family: 'Space Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* Features */
        .features {
            padding: 8rem 4rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-header h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        .section-header p {
            color: var(--text-secondary);
            font-size: 1.125rem;
            max-width: 560px;
            margin: 0 auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.25rem;
            font-size: 1.25rem;
        }

        .feature-icon.cyan { background: rgba(0, 212, 255, 0.1); color: var(--accent); }
        .feature-icon.purple { background: rgba(139, 92, 246, 0.1); color: var(--accent-purple); }
        .feature-icon.green { background: rgba(16, 185, 129, 0.1); color: var(--accent-green); }
        .feature-icon.orange { background: rgba(245, 158, 11, 0.1); color: var(--accent-orange); }
        .feature-icon.pink { background: rgba(236, 72, 153, 0.1); color: var(--accent-pink); }

        .feature-card h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .feature-card p {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            line-height: 1.6;
        }

        /* Demo Section */
        .demo {
            padding: 8rem 4rem;
            background: var(--bg-secondary);
        }

        .demo-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .demo-window {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
        }

        .demo-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        /* AI 选择器样式 */
        .ai-selector {
            position: relative;
            margin-left: auto;
        }

        .ai-selector-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            font-size: 0.8125rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .ai-selector-btn:hover {
            border-color: var(--accent);
            background: rgba(0, 212, 255, 0.05);
        }

        .ai-selector-icon {
            font-size: 1rem;
        }

        .ai-selector-name {
            font-weight: 500;
        }

        .ai-selector-arrow {
            transition: transform 0.2s ease;
        }

        .ai-selector.open .ai-selector-arrow {
            transform: rotate(180deg);
        }

        .ai-selector-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            min-width: 220px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.5rem;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
            z-index: 100;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .ai-selector.open .ai-selector-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .ai-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .ai-option:hover {
            background: var(--bg-secondary);
        }

        .ai-option.active {
            background: rgba(0, 212, 255, 0.1);
        }

        .ai-option-icon {
            font-size: 1.25rem;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .ai-option-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.125rem;
        }

        .ai-option-name {
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--text-primary);
        }

        .ai-option-desc {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .ai-option-check {
            color: var(--accent);
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .ai-option.active .ai-option-check {
            opacity: 1;
        }

        .demo-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .demo-dot.red { background: #ff5f56; }
        .demo-dot.yellow { background: #ffbd2e; }
        .demo-dot.green { background: #27ca40; }

        .demo-chat {
            height: 400px;
            overflow-y: auto;
            padding: 1.5rem;
        }

        .chat-message {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .chat-avatar {
            width: 36px;
            height: 36px;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(10deg) rotateY(-10deg);
            flex-shrink: 0;
        }

        .chat-avatar .c-face {
            position: absolute;
            border-radius: 4px;
        }

        .chat-avatar .c-face-front {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, var(--accent), var(--accent-purple));
            transform: translateZ(12px);
            top: 6px;
            left: 6px;
        }

        .chat-avatar .c-face-top {
            width: 24px;
            height: 16px;
            background: rgba(0, 212, 255, 0.6);
            transform: rotateX(90deg) translateZ(6px);
            top: -4px;
            left: 6px;
        }

        .chat-avatar .c-face-right {
            width: 16px;
            height: 24px;
            background: rgba(139, 92, 246, 0.6);
            transform: rotateY(90deg) translateZ(22px);
            top: 6px;
            left: 6px;
        }

        .chat-avatar.user {
            transform: none;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-avatar.user .c-face {
            display: none;
        }

        .chat-bubble {
            flex: 1;
        }

        .chat-bubble p {
            font-size: 0.9375rem;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .demo-input {
            display: flex;
            gap: 1rem;
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
        }

        .demo-input input {
            flex: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
        }

        .demo-input input::placeholder {
            color: var(--text-secondary);
        }

        .demo-input input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .demo-input button {
            padding: 0.75rem 1.5rem;
            background: var(--accent);
            color: var(--bg-primary);
            border: none;
            border-radius: 10px;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .demo-input button:hover {
            opacity: 0.9;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2.5rem;
            width: 100%;
            max-width: 420px;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-close {
            position: absolute;
            top: 1.25rem;
            right: 1.25rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--text-primary);
        }

        .modal h2 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .modal > p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .form-group input {
            width: 100%;
            padding: 0.875rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            transition: border-color 0.3s ease;
        }

        .form-group input::placeholder {
            color: var(--text-secondary);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--accent);
        }

        /* 全局 Turnstile 验证遮罩 */
        .turnstile-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .turnstile-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .turnstile-box {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .turnstile-logo {
            width: 60px;
            height: 60px;
            position: relative;
            transform-style: preserve-3d;
            animation: turnstileCubeJump 2s ease-in-out infinite;
            margin: 0 auto 1.5rem;
        }

        @keyframes turnstileCubeJump {
            0%, 100% { transform: rotateX(10deg) rotateY(-10deg) translateY(3px); }
            50% { transform: rotateX(10deg) rotateY(-10deg) translateY(-3px); }
        }

        .turnstile-logo .t-face {
            position: absolute;
            border-radius: 8px;
        }

        .turnstile-logo .t-face-front {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--accent), var(--accent-purple));
            transform: translateZ(22px);
            top: 8px;
            left: 8px;
        }

        .turnstile-logo .t-face-top {
            width: 44px;
            height: 28px;
            background: rgba(0, 212, 255, 0.6);
            transform: rotateX(90deg) translateZ(8px);
            top: -12px;
            left: 8px;
            border-radius: 8px 8px 0 0;
        }

        .turnstile-logo .t-face-right {
            width: 28px;
            height: 44px;
            background: rgba(139, 92, 246, 0.6);
            transform: rotateY(90deg) translateZ(38px);
            top: 8px;
            left: 8px;
            border-radius: 0 8px 8px 0;
        }

        .turnstile-box h2 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .turnstile-box > p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .turnstile-box .cf-turnstile {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .turnstile-loading {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .turnstile-loading.hidden {
            display: none;
        }

        /* 欢迎弹窗样式 */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 11, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .welcome-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .welcome-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .welcome-box {
            position: relative;
            text-align: center;
            padding: 4rem;
            max-width: 600px;
            width: 90%;
        }

        .welcome-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.15) 0%, rgba(139, 92, 246, 0.1) 40%, transparent 70%);
            filter: blur(60px);
            pointer-events: none;
            animation: welcomeGlow 3s ease-in-out infinite;
        }

        @keyframes welcomeGlow {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
        }

        .welcome-content {
            position: relative;
            z-index: 1;
        }

        .welcome-icon {
            width: 80px;
            height: 80px;
            position: relative;
            transform-style: preserve-3d;
            margin: 0 auto 2.5rem;
            animation: welcomeCubeJump 2s ease-in-out infinite;
        }

        @keyframes welcomeCubeJump {
            0%, 100% { transform: rotateX(10deg) rotateY(-10deg) translateY(5px); }
            50% { transform: rotateX(10deg) rotateY(-10deg) translateY(-5px); }
        }

        .welcome-icon .w-face {
            position: absolute;
            border-radius: 10px;
        }

        .welcome-icon .w-face-front {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--accent), var(--accent-purple));
            transform: translateZ(28px);
            top: 12px;
            left: 12px;
            box-shadow: 0 20px 60px rgba(0, 212, 255, 0.3);
        }

        .welcome-icon .w-face-top {
            width: 56px;
            height: 36px;
            background: rgba(0, 212, 255, 0.6);
            transform: rotateX(90deg) translateZ(12px);
            top: -16px;
            left: 12px;
            border-radius: 10px 10px 0 0;
        }

        .welcome-icon .w-face-right {
            width: 36px;
            height: 56px;
            background: rgba(139, 92, 246, 0.6);
            transform: rotateY(90deg) translateZ(48px);
            top: 12px;
            left: 12px;
            border-radius: 0 10px 10px 0;
        }

        .welcome-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 700;
            line-height: 1.1;
            letter-spacing: -0.03em;
            margin-bottom: 1rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
        }

        .welcome-word {
            display: inline-block;
            opacity: 0;
            transform: translateY(30px);
            animation: welcomeWordIn 0.6s ease forwards;
        }

        .welcome-word:nth-child(1) { animation-delay: 0.1s; }
        .welcome-word:nth-child(2) { animation-delay: 0.2s; }
        .welcome-word:nth-child(3) { animation-delay: 0.3s; }
        .welcome-word:nth-child(4) { animation-delay: 0.4s; }

        .welcome-word.gradient {
            background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 50%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes welcomeWordIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .welcome-subtitle {
            font-size: 1.125rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
            opacity: 0;
            animation: welcomeFadeIn 0.6s ease 0.6s forwards;
        }

        .welcome-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2.5rem;
            background: var(--text-primary);
            color: var(--bg-primary);
            border: none;
            border-radius: 100px;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            animation: welcomeFadeIn 0.6s ease 0.8s forwards;
        }

        .welcome-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(255, 255, 255, 0.15);
        }

        @keyframes welcomeFadeIn {
            to {
                opacity: 1;
            }
        }

        /* Turnstile 容器样式 */
        .turnstile-container {
            margin-bottom: 1.25rem;
            display: flex;
            justify-content: center;
        }

        .turnstile-error {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            text-align: center;
            display: none;
        }

        .modal form .btn-primary {
            width: 100%;
            justify-content: center;
            margin-top: 0.5rem;
        }

        .modal form .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .form-error {
            color: #ef4444;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            display: none;
        }

        .form-error.show {
            display: block;
        }

        .modal-switch {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .modal-switch a {
            color: var(--accent);
            cursor: pointer;
            font-weight: 500;
        }

        .modal-switch a:hover {
            text-decoration: underline;
        }

        .hidden {
            display: none !important;
        }

        /* 按钮 loading 状态 */
        .btn-primary .btn-loading {
            display: none;
        }

        .btn-primary.loading .btn-text,
        .btn-primary.loading .btn-arrow {
            display: none;
        }

        .btn-primary.loading .btn-loading {
            display: inline-flex;
        }

        .spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Toast 提示 */
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            font-size: 0.9375rem;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10001;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Visitor Counter */
        .visitor-counter {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 2rem 4rem;
            border-top: 1px solid var(--border);
            background: linear-gradient(180deg, transparent 0%, rgba(0, 212, 255, 0.02) 100%);
        }

        .visitor-counter-inner {
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
        }

        .visitor-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: iconGlow 3s ease-in-out infinite;
        }

        .visitor-icon::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 10px;
            background: inherit;
            filter: blur(10px);
            opacity: 0.4;
            z-index: -1;
        }

        .visitor-icon svg {
            width: 20px;
            height: 20px;
            color: white;
        }

        @keyframes iconGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.3); }
            50% { box-shadow: 0 0 30px rgba(139, 92, 246, 0.4); }
        }

        .visitor-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .visitor-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 500;
        }

        .visitor-count-wrapper {
            display: flex;
            align-items: baseline;
            gap: 0.5rem;
        }

        .visitor-count {
            font-family: 'Space Mono', monospace;
            font-size: 1.75rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }

        .visitor-suffix {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .visitor-live-dot {
            width: 8px;
            height: 8px;
            background: var(--accent-green);
            border-radius: 50%;
            animation: livePulse 2s ease-in-out infinite;
            margin-left: 0.5rem;
        }

        @keyframes livePulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .visitor-divider {
            width: 1px;
            height: 40px;
            background: var(--border);
            margin: 0 1rem;
        }

        /* Footer */
        footer {
            padding: 3rem 4rem;
            border-top: 1px solid var(--border);
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-links {
            display: flex;
            gap: 2rem;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--text-primary);
        }

        .footer-copy {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            nav {
                padding: 1rem 2rem;
            }

            .nav-links {
                display: none;
            }

            .hero {
                padding: 7rem 1.5rem 3rem;
            }

            .features {
                padding: 4rem 1.5rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .stats {
                flex-direction: column;
                gap: 2rem;
            }

            .demo {
                padding: 4rem 1.5rem;
            }

            footer {
                padding: 2rem 1.5rem;
            }

            .footer-content {
                flex-direction: column;
                gap: 1.5rem;
                text-align: center;
            }

            .visitor-counter {
                padding: 1.5rem;
            }

            .visitor-counter-inner {
                gap: 1rem;
            }

            .visitor-icon {
                width: 36px;
                height: 36px;
            }

            .visitor-icon svg {
                width: 18px;
                height: 18px;
            }

            .visitor-count {
                font-size: 1.5rem;
            }
        }

        /* About Page Styles */
        .about-hero {
            padding: 10rem 4rem 6rem;
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
        }

        .about-hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
        }

        .about-hero p {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto;
        }

        .about-section {
            padding: 5rem 4rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .about-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .about-content h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
        }

        .about-content p {
            color: var(--text-secondary);
            font-size: 1.0625rem;
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .about-visual {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .neural-network {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .node {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 3s ease-in-out infinite;
        }

        /* Values Section */
        .values-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-top: 3rem;
        }

        .value-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
        }

        .value-card h3 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }

        .value-card p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Team Section */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            margin-top: 3rem;
        }

        .team-card {
            text-align: center;
        }

        .team-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .team-card h4 {
            font-size: 1.125rem;
            margin-bottom: 0.25rem;
        }

        .team-card p {
            color: var(--text-secondary);
            font-size: 0.9375rem;
        }

        /* Research Page Styles */
        .research-hero {
            padding: 10rem 4rem 4rem;
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
        }

        .research-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .research-hero p {
            color: var(--text-secondary);
            font-size: 1.125rem;
        }

        .research-section {
            padding: 4rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .papers-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .paper-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            display: flex;
            gap: 2rem;
            align-items: flex-start;
            transition: all 0.3s ease;
        }

        .paper-card:hover {
            transform: translateY(-2px);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .paper-icon {
            width: 60px;
            height: 60px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .paper-content {
            flex: 1;
        }

        .paper-content h3 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .paper-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .paper-content p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .paper-tags {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .paper-tag {
            padding: 0.25rem 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 100px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Docs Page Styles */
        .docs-layout {
            display: flex;
            padding-top: 73px;
            min-height: 100vh;
        }

        .docs-sidebar {
            width: 280px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            padding: 2rem;
            position: fixed;
            top: 73px;
            bottom: 0;
            overflow-y: auto;
        }

        .docs-nav-section {
            margin-bottom: 2rem;
        }

        .docs-nav-section h4 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .docs-nav-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .docs-nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9375rem;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .docs-nav-links a:hover,
        .docs-nav-links a.active {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .docs-main {
            flex: 1;
            margin-left: 280px;
            padding: 3rem 4rem;
            max-width: 900px;
        }

        .docs-main h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .docs-main > p {
            color: var(--text-secondary);
            font-size: 1.125rem;
            margin-bottom: 3rem;
        }

        .docs-section {
            margin-bottom: 4rem;
        }

        .docs-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .docs-section p {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .code-block {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
        }

        .code-block code {
            font-family: 'Space Mono', monospace;
            font-size: 0.875rem;
            color: var(--accent);
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 2rem;
            margin-top: 3rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2.5rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 0.5rem;
            width: 12px;
            height: 12px;
            background: var(--accent);
            border-radius: 50%;
            transform: translateX(-5px);
        }

        .timeline-item h4 {
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
        }

        .timeline-item .date {
            font-size: 0.875rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .timeline-item p {
            color: var(--text-secondary);
        }

        @media (max-width: 1024px) {
            .about-grid {
                grid-template-columns: 1fr;
            }

            .values-grid {
                grid-template-columns: 1fr;
            }

            .team-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .docs-sidebar {
                display: none;
            }

            .docs-main {
                margin-left: 0;
                padding: 2rem;
            }

            .paper-card {
                flex-direction: column;
            }
        }

        /* ==================== 注册成功庆祝动画 ==================== */
        .celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .celebration-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .celebration-container {
            position: relative;
            text-align: center;
            z-index: 10;
        }

        /* 粒子容器 */
        .particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            animation: particleFloat 4s ease-out forwards;
        }

        @keyframes particleFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100vh) scale(0);
            }
        }

        /* 光环效果 */
        .celebration-rings {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        .ring {
            position: absolute;
            border: 2px solid var(--accent);
            border-radius: 50%;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0);
        }

        .ring-1 {
            width: 100px;
            height: 100px;
            animation: ringExpand 2s ease-out 0.2s forwards;
        }

        .ring-2 {
            width: 200px;
            height: 200px;
            border-color: var(--accent-purple);
            animation: ringExpand 2s ease-out 0.4s forwards;
        }

        .ring-3 {
            width: 300px;
            height: 300px;
            border-color: var(--accent-green);
            animation: ringExpand 2s ease-out 0.6s forwards;
        }

        .ring-4 {
            width: 400px;
            height: 400px;
            border-color: var(--accent-pink);
            animation: ringExpand 2s ease-out 0.8s forwards;
        }

        @keyframes ringExpand {
            0% {
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(0);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.5);
            }
        }

        /* 成功图标 */
        .celebration-icon {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 2rem;
            position: relative;
            opacity: 0;
            transform: scale(0);
            animation: iconAppear 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.3s forwards;
            box-shadow: 
                0 0 60px rgba(0, 212, 255, 0.4),
                0 0 120px rgba(139, 92, 246, 0.2);
        }

        .celebration-icon::before {
            content: '';
            position: absolute;
            width: 140px;
            height: 140px;
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50%;
            animation: iconPulse 2s ease-in-out infinite;
        }

        .celebration-icon svg {
            width: 60px;
            height: 60px;
            color: white;
            stroke-dasharray: 100;
            stroke-dashoffset: 100;
            animation: checkDraw 0.8s ease-out 0.6s forwards;
        }

        @keyframes iconAppear {
            0% { opacity: 0; transform: scale(0); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.2; }
        }

        @keyframes checkDraw {
            to { stroke-dashoffset: 0; }
        }

        /* 标题文字 */
        .celebration-title {
            font-family: 'Space Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 50%, var(--accent-pink) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            opacity: 0;
            transform: translateY(30px);
            animation: textReveal 0.8s ease-out 0.8s forwards;
        }

        .celebration-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            opacity: 0;
            transform: translateY(20px);
            animation: textReveal 0.8s ease-out 1s forwards;
        }

        .celebration-username {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            animation: textReveal 0.8s ease-out 1.2s forwards;
        }

        @keyframes textReveal {
            to { opacity: 1; transform: translateY(0); }
        }

        /* 特性展示 */
        .celebration-features {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-bottom: 3rem;
            opacity: 0;
            animation: featuresReveal 0.8s ease-out 1.4s forwards;
        }

        .celebration-feature {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .celebration-feature-icon {
            width: 48px;
            height: 48px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .celebration-feature-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        @keyframes featuresReveal {
            to { opacity: 1; }
        }

        /* 神经网络动画背景 */
        .celebration-neural {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }

        .neural-line {
            position: absolute;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            height: 1px;
            opacity: 0.3;
            animation: neuralFlow 3s linear infinite;
        }

        @keyframes neuralFlow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100vw); }
        }

        .neural-dot {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--accent);
            border-radius: 50%;
            opacity: 0;
            animation: neuralDotPulse 2s ease-in-out infinite;
        }

        @keyframes neuralDotPulse {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 0.6; transform: scale(1); }
        }

        /* 进度条 */
        .celebration-progress {
            width: 200px;
            height: 4px;
            background: var(--bg-card);
            border-radius: 2px;
            margin: 0 auto 1.5rem;
            overflow: hidden;
            opacity: 0;
            animation: featuresReveal 0.5s ease-out 1.6s forwards;
        }

        .celebration-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-purple));
            border-radius: 2px;
            width: 0%;
            animation: progressFill 3s ease-out 1.8s forwards;
        }

        @keyframes progressFill {
            to { width: 100%; }
        }

        /* 跳过按钮 */
        .celebration-skip {
            padding: 0.875rem 2rem;
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: 100px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            animation: skipAppear 0.5s ease-out 2s forwards;
        }

        .celebration-skip:hover {
            background: var(--bg-card);
            border-color: var(--accent);
            color: var(--text-primary);
        }

        .celebration-skip.ready {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border: none;
            color: white;
            animation: skipReady 0.5s ease-out forwards;
        }

        .celebration-skip.ready:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0, 212, 255, 0.3);
        }

        @keyframes skipAppear {
            to { opacity: 1; }
        }

        @keyframes skipReady {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* 闪光效果 */
        .celebration-sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle 1s ease-out forwards;
        }

        @keyframes sparkle {
            0% { opacity: 1; transform: scale(0) rotate(0deg); }
            50% { opacity: 1; transform: scale(1) rotate(180deg); }
            100% { opacity: 0; transform: scale(0) rotate(360deg); }
        }

        /* 响应式 */
        @media (max-width: 768px) {
            .celebration-title {
                font-size: 1.75rem;
            }
            .celebration-features {
                flex-direction: column;
                gap: 1rem;
            }
            .celebration-icon {
                width: 100px;
                height: 100px;
            }
            .celebration-icon svg {
                width: 50px;
                height: 50px;
            }
        }

        /* ==================== 忘记密码链接 ==================== */
        .forgot-password {
            text-align: right;
            margin-top: -0.5rem;
            margin-bottom: 1rem;
        }

        .forgot-password a {
            color: var(--accent);
            font-size: 0.875rem;
            text-decoration: none;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .forgot-password a:hover {
            color: var(--accent-purple);
        }

        /* ==================== 用户资料页样式 ==================== */
        .profile-page {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border);
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 600;
            color: white;
            position: relative;
        }

        .profile-avatar-edit {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 36px;
            height: 36px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-avatar-edit:hover {
            background: var(--accent);
            border-color: var(--accent);
        }

        .profile-info h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .profile-info p {
            color: var(--text-secondary);
        }

        .profile-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.375rem 0.75rem;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 100px;
            font-size: 0.75rem;
            color: var(--accent);
            margin-top: 0.75rem;
        }

        .profile-badge.verified {
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
            color: var(--accent-green);
        }

        .profile-badge.unverified {
            background: rgba(245, 158, 11, 0.1);
            border-color: rgba(245, 158, 11, 0.3);
            color: var(--accent-orange);
            cursor: pointer;
        }

        .profile-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .profile-section h3 {
            font-size: 1.125rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .profile-form-group {
            margin-bottom: 1.25rem;
        }

        .profile-form-group label {
            display: block;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .profile-form-group input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.9375rem;
            transition: all 0.3s ease;
        }

        .profile-form-group input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        .profile-form-group input:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .profile-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .profile-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-btn-primary {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border: none;
            color: white;
        }

        .profile-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0, 212, 255, 0.3);
        }

        .profile-btn-secondary {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }

        .profile-btn-secondary:hover {
            border-color: var(--accent);
            color: var(--text-primary);
        }

        .profile-btn-danger {
            background: transparent;
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }

        .profile-btn-danger:hover {
            background: rgba(239, 68, 68, 0.1);
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .profile-stat {
            text-align: center;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 12px;
        }

        .profile-stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent);
        }

        .profile-stat-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        /* 成功/错误消息 */
        .profile-message {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            display: none;
        }

        .profile-message.success {
            display: block;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: var(--accent-green);
        }

        .profile-message.error {
            display: block;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }

        @media (max-width: 768px) {
            .profile-header {
                flex-direction: column;
                text-align: center;
            }

            .profile-stats {
                grid-template-columns: 1fr;
            }

            .profile-actions {
                flex-direction: column;
            }
        }

        /* ==================== ChatBot 页面样式 ==================== */
        .chatbot-hero {
            padding: 8rem 2rem 2rem;
            text-align: center;
        }

        .chatbot-hero h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .chatbot-hero p {
            color: var(--text-secondary);
            font-size: 1.125rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .chatbot-container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 2rem 4rem;
        }

        .chatbot-window {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.4);
        }

        .chatbot-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            background: var(--bg-secondary);
        }

        .chatbot-header-dots {
            display: flex;
            gap: 0.5rem;
        }

        .chatbot-header-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .chatbot-header-dot.red { background: #ff5f56; }
        .chatbot-header-dot.yellow { background: #ffbd2e; }
        .chatbot-header-dot.green { background: #27ca40; }

        .chatbot-header-title {
            flex: 1;
            text-align: center;
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .chatbot-header-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: var(--accent-green);
        }

        .chatbot-header-status::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--accent-green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .chatbot-messages {
            height: 500px;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chatbot-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chatbot-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chatbot-messages::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .chatbot-message {
            display: flex;
            gap: 0.75rem;
            max-width: 85%;
            animation: fadeInUp 0.3s ease;
        }

        .chatbot-message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .chatbot-avatar {
            width: 36px;
            height: 36px;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(10deg) rotateY(-10deg);
            flex-shrink: 0;
        }

        .chatbot-avatar .cb-face {
            position: absolute;
            border-radius: 4px;
        }

        .chatbot-avatar .cb-face-front {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, var(--accent), var(--accent-purple));
            transform: translateZ(12px);
            top: 6px;
            left: 6px;
        }

        .chatbot-avatar .cb-face-top {
            width: 24px;
            height: 16px;
            background: rgba(0, 212, 255, 0.6);
            transform: rotateX(90deg) translateZ(6px);
            top: -4px;
            left: 6px;
        }

        .chatbot-avatar .cb-face-right {
            width: 16px;
            height: 24px;
            background: rgba(139, 92, 246, 0.6);
            transform: rotateY(90deg) translateZ(22px);
            top: 6px;
            left: 6px;
        }

        .chatbot-message:not(.user) .chatbot-avatar {
            /* 3D cube styles applied above */
        }

        .chatbot-message.user .chatbot-avatar {
            transform: none;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
        }

        .chatbot-message.user .chatbot-avatar .cb-face {
            display: none;
        }

        .chatbot-bubble {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 0.875rem 1.125rem;
        }

        .chatbot-message.user .chatbot-bubble {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border: none;
        }

        .chatbot-bubble p {
            font-size: 0.9375rem;
            line-height: 1.5;
            white-space: pre-wrap;
        }

        .chatbot-message.user .chatbot-bubble p {
            color: white;
        }

        .chatbot-typing {
            display: flex;
            gap: 4px;
            padding: 0.5rem 0;
        }

        .chatbot-typing span {
            width: 8px;
            height: 8px;
            background: var(--text-secondary);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .chatbot-typing span:nth-child(2) { animation-delay: 0.2s; }
        .chatbot-typing span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-8px); }
        }

        .chatbot-input {
            display: flex;
            gap: 1rem;
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
            background: var(--bg-secondary);
        }

        .chatbot-input input {
            flex: 1;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.875rem 1rem;
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            transition: border-color 0.3s ease;
        }

        .chatbot-input input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .chatbot-input input::placeholder {
            color: var(--text-secondary);
        }

        .chatbot-input button {
            padding: 0.875rem 1.5rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chatbot-input button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .chatbot-input button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* ChatBot 登录遮罩样式 */
        .chatbot-login-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 11, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            border-radius: 20px;
            opacity: 1;
            visibility: visible;
            transition: all 0.3s ease;
        }

        .chatbot-login-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .chatbot-login-content {
            text-align: center;
            padding: 2rem;
            max-width: 320px;
        }

        .chatbot-login-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .chatbot-login-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .chatbot-login-content > p {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .chatbot-login-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .chatbot-login-btn {
            padding: 0.875rem 1.5rem;
            border-radius: 10px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .chatbot-login-btn.primary {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            color: white;
        }

        .chatbot-login-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .chatbot-login-btn.secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .chatbot-login-btn.secondary:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .chatbot-login-hint {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .chatbot-login-hint span {
            color: var(--text-secondary);
            font-size: 0.8125rem;
        }

        /* 让 chatbot-window 支持 position relative */
        .chatbot-window {
            position: relative;
        }

        /* ==================== Kit 页面样式 ==================== */
        .kit-hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 8rem 2rem 4rem;
        }

        .kit-hero h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .kit-hero > p {
            font-size: 1.125rem;
            color: var(--text-secondary);
            max-width: 500px;
            margin-bottom: 3rem;
        }

        .ip-detector-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 3rem;
            max-width: 600px;
            width: 100%;
        }

        .ip-display {
            text-align: center;
            margin-bottom: 2rem;
        }

        .ip-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
        }

        .ip-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .ip-address {
            font-family: 'Space Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            word-break: break-all;
        }

        .ip-address.loading {
            font-size: 1.5rem;
            color: var(--text-secondary);
        }

        .ip-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
        }

        .ip-detail-item {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1rem;
            text-align: left;
        }

        .ip-detail-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .ip-detail-value {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .ip-refresh-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            color: white;
            border: none;
            border-radius: 100px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 2rem;
        }

        .ip-refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0, 212, 255, 0.3);
        }

        .ip-refresh-btn.loading svg {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .chatbot-messages { height: 400px; }
            .ip-address { font-size: 1.75rem; }
            .ip-details { grid-template-columns: 1fr; }
        }

        /* ==================== Kit Tools Suite Styles ==================== */
        .kit-main-content {
            padding: 8rem 4rem 4rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        .kit-page-header {
            text-align: center;
            margin-bottom: 3rem;
            animation: fadeInUp 0.8s ease;
        }

        .kit-page-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            letter-spacing: -0.02em;
        }

        .kit-page-header p {
            color: var(--text-secondary);
            font-size: 1.125rem;
        }

        .kit-tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .kit-tool-window {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            animation: fadeInUp 0.8s ease backwards;
        }

        .kit-tool-window:nth-child(1) { animation-delay: 0.1s; }
        .kit-tool-window:nth-child(2) { animation-delay: 0.15s; }
        .kit-tool-window:nth-child(3) { animation-delay: 0.2s; }
        .kit-tool-window:nth-child(4) { animation-delay: 0.25s; }
        .kit-tool-window:nth-child(5) { animation-delay: 0.3s; }
        .kit-tool-window:nth-child(6) { animation-delay: 0.35s; }
        .kit-tool-window:nth-child(7) { animation-delay: 0.4s; }
        .kit-tool-window:nth-child(8) { animation-delay: 0.45s; }

        .kit-tool-window:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .kit-tool-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.02);
        }

        .kit-tool-header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .kit-tool-dots {
            display: flex;
            gap: 0.375rem;
        }

        .kit-tool-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .kit-tool-dot.red { background: #ff5f56; }
        .kit-tool-dot.yellow { background: #ffbd2e; }
        .kit-tool-dot.green { background: #27ca40; }

        .kit-tool-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .kit-tool-icon {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }

        .kit-tool-icon.cyan { background: rgba(0, 212, 255, 0.15); color: var(--accent); }
        .kit-tool-icon.purple { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); }
        .kit-tool-icon.green { background: rgba(16, 185, 129, 0.15); color: var(--accent-green); }
        .kit-tool-icon.orange { background: rgba(245, 158, 11, 0.15); color: var(--accent-orange); }
        .kit-tool-icon.pink { background: rgba(236, 72, 153, 0.15); color: var(--accent-pink); }
        .kit-tool-icon.red { background: rgba(239, 68, 68, 0.15); color: #ef4444; }

        .kit-tool-body {
            padding: 1.5rem;
            min-height: 280px;
            display: flex;
            flex-direction: column;
        }

        .kit-input-group {
            margin-bottom: 1rem;
        }

        .kit-input-group label {
            display: block;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .kit-input-row {
            display: flex;
            gap: 0.75rem;
        }

        .kit-input-field {
            flex: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            transition: border-color 0.3s ease;
        }

        .kit-input-field::placeholder {
            color: var(--text-secondary);
        }

        .kit-input-field:focus {
            outline: none;
            border-color: var(--accent);
        }

        select.kit-input-field {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2371717a' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            padding-right: 2.5rem;
        }

        .kit-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .kit-btn-primary {
            background: var(--accent);
            color: var(--bg-primary);
        }

        .kit-btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .kit-btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .kit-result-box {
            flex: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            overflow: auto;
        }

        .kit-result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.625rem 0;
            border-bottom: 1px solid var(--border);
        }

        .kit-result-item:last-child {
            border-bottom: none;
        }

        .kit-result-label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .kit-result-value {
            font-family: 'Space Mono', monospace;
            font-size: 0.875rem;
            color: var(--text-primary);
        }

        .kit-result-value.success { color: var(--accent-green); }
        .kit-result-value.warning { color: var(--accent-orange); }
        .kit-result-value.error { color: #ef4444; }
        .kit-result-value.accent { color: var(--accent); }

        .kit-speed-gauge {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin: 1.5rem 0;
        }

        .kit-gauge-item {
            text-align: center;
        }

        .kit-gauge-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(var(--accent) 0deg, var(--bg-secondary) 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-bottom: 0.75rem;
        }

        .kit-gauge-circle.purple {
            background: conic-gradient(var(--accent-purple) 0deg, var(--bg-secondary) 0deg);
        }

        .kit-gauge-circle.green {
            background: conic-gradient(var(--accent-green) 0deg, var(--bg-secondary) 0deg);
        }

        .kit-gauge-circle::before {
            content: '';
            position: absolute;
            width: 80px;
            height: 80px;
            background: var(--bg-card);
            border-radius: 50%;
        }

        .kit-gauge-value {
            position: relative;
            z-index: 1;
            font-family: 'Space Mono', monospace;
            font-size: 1.25rem;
            font-weight: 700;
        }

        .kit-gauge-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .kit-gauge-unit {
            font-size: 0.625rem;
            color: var(--text-secondary);
        }

        .kit-loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .kit-status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.25rem 0.625rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .kit-status-badge.success {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .kit-status-badge.warning {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-orange);
        }

        .kit-status-badge.error {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        .kit-status-badge::before {
            content: '';
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }

        .kit-headers-list {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
        }

        .kit-header-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border);
        }

        .kit-header-item:last-child {
            border-bottom: none;
        }

        .kit-header-name {
            color: var(--accent);
        }

        .kit-header-value {
            color: var(--text-primary);
            word-break: break-all;
        }

        .kit-currency-display {
            text-align: center;
            padding: 1.5rem;
        }

        .kit-currency-amount {
            font-family: 'Space Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .kit-currency-rate {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .kit-swap-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
            font-size: 1.25rem;
        }

        .kit-swap-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .kit-scan-progress {
            margin: 1rem 0;
        }

        .kit-progress-bar {
            height: 4px;
            background: var(--bg-secondary);
            border-radius: 2px;
            overflow: hidden;
        }

        .kit-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-purple));
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .kit-scan-items {
            margin-top: 1rem;
        }

        .kit-scan-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 0;
            font-size: 0.875rem;
        }

        .kit-scan-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .kit-scan-icon.pending {
            background: var(--bg-secondary);
            color: var(--text-secondary);
        }

        .kit-scan-icon.checking {
            background: rgba(0, 212, 255, 0.15);
            color: var(--accent);
        }

        .kit-scan-icon.success {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .kit-scan-icon.warning {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-orange);
        }

        .kit-scan-icon.error {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        /* New Kit Tools Styles */
        .kit-qr-output {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .kit-qr-output canvas {
            background: white;
            padding: 8px;
            border-radius: 8px;
        }

        .kit-qr-output .kit-btn {
            margin-top: 1rem;
        }

        .kit-textarea {
            min-height: 80px;
            resize: vertical;
            font-family: 'Outfit', sans-serif;
        }

        .kit-translate-output {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 1rem;
            min-height: 80px;
            color: var(--text-primary);
            font-size: 0.9375rem;
            line-height: 1.6;
        }

        .kit-eye-btn {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            opacity: 0.6;
            transition: opacity 0.3s ease;
        }

        .kit-eye-btn:hover {
            opacity: 1;
        }

        .kit-password-meter {
            margin: 1rem 0;
        }

        .kit-meter-bar {
            height: 6px;
            background: var(--bg-secondary);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }

        .kit-meter-fill {
            height: 100%;
            width: 0%;
            border-radius: 3px;
            transition: all 0.4s ease;
        }

        .kit-meter-fill.weak { background: #ef4444; width: 25%; }
        .kit-meter-fill.fair { background: var(--accent-orange); width: 50%; }
        .kit-meter-fill.good { background: #84cc16; width: 75%; }
        .kit-meter-fill.strong { background: var(--accent-green); width: 100%; }

        .kit-password-label {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .kit-password-label.weak { color: #ef4444; }
        .kit-password-label.fair { color: var(--accent-orange); }
        .kit-password-label.good { color: #84cc16; }
        .kit-password-label.strong { color: var(--accent-green); }

        .kit-password-tips {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .kit-tip-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8125rem;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .kit-tip-item.pass {
            color: var(--accent-green);
        }

        .kit-tip-item.pass .kit-tip-icon {
            color: var(--accent-green);
        }

        .kit-tip-icon {
            font-size: 0.75rem;
        }

        .kit-short-url-box {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            padding: 1rem;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid var(--accent);
            border-radius: 10px;
        }

        .kit-short-url-text {
            font-family: 'Space Mono', monospace;
            font-size: 0.9375rem;
            color: var(--accent);
            word-break: break-all;
        }

        .kit-tool-window:nth-child(9) { animation-delay: 0.5s; }
        .kit-tool-window:nth-child(10) { animation-delay: 0.55s; }
        .kit-tool-window:nth-child(11) { animation-delay: 0.6s; }
        .kit-tool-window:nth-child(12) { animation-delay: 0.65s; }
        .kit-tool-window:nth-child(13) { animation-delay: 0.7s; }
        .kit-tool-window:nth-child(14) { animation-delay: 0.75s; }
        .kit-tool-window:nth-child(15) { animation-delay: 0.8s; }
        .kit-tool-window:nth-child(16) { animation-delay: 0.85s; }
        .kit-tool-window:nth-child(17) { animation-delay: 0.9s; }
        .kit-tool-window:nth-child(18) { animation-delay: 0.95s; }
        .kit-tool-window:nth-child(19) { animation-delay: 1s; }
        .kit-tool-window:nth-child(20) { animation-delay: 1.05s; }

        /* Hash value styling */
        .kit-hash-value {
            font-size: 0.6875rem !important;
            word-break: break-all;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .kit-hash-value:hover {
            color: var(--accent) !important;
        }

        /* Age Calculator Styles */
        .kit-age-display {
            text-align: center;
            padding: 1.5rem;
            background: var(--bg-secondary);
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .kit-age-main {
            display: flex;
            align-items: baseline;
            justify-content: center;
            gap: 0.5rem;
        }

        .kit-age-number {
            font-family: 'Space Mono', monospace;
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .kit-age-unit {
            font-size: 1.5rem;
            color: var(--text-secondary);
        }

        .kit-age-detail {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* Date Calculator Tabs */
        .kit-date-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .kit-date-tab {
            flex: 1;
            padding: 0.625rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: 'Outfit', sans-serif;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .kit-date-tab:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .kit-date-tab.active {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--accent);
            color: var(--accent);
        }

        /* World Clock Styles */
        .kit-live-indicator {
            font-size: 0.6875rem;
            color: var(--accent-green);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .kit-world-clocks {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .kit-clock-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .kit-clock-item:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .kit-clock-city {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .kit-clock-time {
            font-family: 'Space Mono', monospace;
            font-size: 1.375rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .kit-clock-date {
            font-size: 0.6875rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        /* BMI Calculator Styles */
        .kit-bmi-display {
            margin: 1rem 0;
        }

        .kit-bmi-gauge {
            position: relative;
            margin-bottom: 1rem;
        }

        .kit-bmi-scale {
            display: flex;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .kit-bmi-zone {
            flex: 1;
            font-size: 0;
        }

        .kit-bmi-zone.underweight { background: #3b82f6; }
        .kit-bmi-zone.normal { background: var(--accent-green); }
        .kit-bmi-zone.overweight { background: var(--accent-orange); }
        .kit-bmi-zone.obese { background: #ef4444; }

        .kit-bmi-pointer {
            position: absolute;
            top: -4px;
            width: 4px;
            height: 16px;
            background: white;
            border-radius: 2px;
            transform: translateX(-50%);
            transition: left 0.5s ease;
            left: 0%;
            opacity: 0;
        }

        .kit-bmi-pointer.show {
            opacity: 1;
        }

        .kit-bmi-value {
            text-align: center;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 12px;
        }

        .kit-bmi-number {
            font-family: 'Space Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            display: block;
        }

        .kit-bmi-status {
            font-size: 0.9375rem;
            color: var(--text-secondary);
        }

        .kit-bmi-status.underweight { color: #3b82f6; }
        .kit-bmi-status.normal { color: var(--accent-green); }
        .kit-bmi-status.overweight { color: var(--accent-orange); }
        .kit-bmi-status.obese { color: #ef4444; }

        /* Random Numbers Display */
        .kit-random-numbers {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
        }

        .kit-random-number {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid var(--accent);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            font-family: 'Space Mono', monospace;
            font-size: 1rem;
            color: var(--accent);
        }

        /* Tool window animation delays for new tools */
        .kit-tool-window:nth-child(21) { animation-delay: 1.1s; }
        .kit-tool-window:nth-child(22) { animation-delay: 1.15s; }
        .kit-tool-window:nth-child(23) { animation-delay: 1.2s; }
        .kit-tool-window:nth-child(24) { animation-delay: 1.25s; }
        .kit-tool-window:nth-child(25) { animation-delay: 1.3s; }
        .kit-tool-window:nth-child(26) { animation-delay: 1.35s; }

        /* Scientific Calculator Styles */
        .kit-calc-display {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .kit-calc-history {
            font-size: 0.75rem;
            color: var(--text-secondary);
            min-height: 1.2em;
            text-align: right;
        }

        .kit-calc-input {
            width: 100%;
            background: transparent;
            border: none;
            font-family: 'Space Mono', monospace;
            font-size: 1.75rem;
            color: var(--text-primary);
            text-align: right;
            outline: none;
        }

        .kit-calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
        }

        .kit-calc-btn {
            padding: 0.75rem;
            border: none;
            border-radius: 8px;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .kit-calc-btn.num {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .kit-calc-btn.op {
            background: rgba(0, 212, 255, 0.15);
            color: var(--accent);
        }

        .kit-calc-btn.func {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            font-size: 0.875rem;
        }

        .kit-calc-btn.equal {
            background: linear-gradient(135deg, var(--accent), var(--accent-purple));
            color: white;
        }

        .kit-calc-btn.clear {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        .kit-calc-btn.del {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-orange);
        }

        .kit-calc-btn:hover {
            transform: scale(1.05);
        }

        .kit-calc-btn:active {
            transform: scale(0.95);
        }

        /* Function Graph Styles */
        .kit-graph-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
        }

        #func-canvas {
            max-width: 100%;
        }

        .kit-func-presets {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: center;
        }

        .kit-preset-label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .kit-preset-btn {
            padding: 0.375rem 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-secondary);
            font-size: 0.8125rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .kit-preset-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        /* Citation Generator Styles */
        .kit-cite-output {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            font-size: 0.9375rem;
            line-height: 1.6;
        }

        .kit-cite-output .cite-text {
            color: var(--text-primary);
            cursor: pointer;
        }

        .kit-cite-output .cite-text:hover {
            color: var(--accent);
        }

        .kit-cite-format-label {
            font-size: 0.75rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
            display: block;
        }

        /* Wavelength Frequency Converter Styles */
        .kit-wave-spectrum {
            position: relative;
            height: 24px;
            margin: 1.5rem 0;
            border-radius: 12px;
            overflow: hidden;
        }

        .kit-spectrum-bar {
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, 
                #8B00FF 0%,    /* Violet 380nm */
                #0000FF 15%,   /* Blue 450nm */
                #00FFFF 30%,   /* Cyan 490nm */
                #00FF00 45%,   /* Green 520nm */
                #FFFF00 60%,   /* Yellow 570nm */
                #FF8000 75%,   /* Orange 590nm */
                #FF0000 90%,   /* Red 650nm */
                #8B0000 100%   /* Deep Red 700nm+ */
            );
        }

        .kit-spectrum-pointer {
            position: absolute;
            top: -4px;
            width: 4px;
            height: 32px;
            background: white;
            border-radius: 2px;
            transform: translateX(-50%);
            transition: left 0.3s ease;
            box-shadow: 0 0 8px rgba(0,0,0,0.5);
            display: none;
        }

        .kit-spectrum-pointer.show {
            display: block;
        }

        /* Lucky Color Styles */
        .kit-lucky-color-display {
            text-align: center;
            padding: 1.5rem;
        }

        .kit-lucky-color-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-card));
            border: 3px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            transition: all 0.5s ease;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .kit-lucky-color-emoji {
            font-size: 2.5rem;
        }

        .kit-lucky-color-name {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .kit-lucky-color-hex {
            font-family: 'Space Mono', monospace;
            font-size: 1rem;
            color: var(--text-secondary);
        }

        .kit-lucky-color-info {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
        }

        /* Tarot Card Styles */
        .kit-tarot-card-container {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
            perspective: 1000px;
        }

        .kit-tarot-card {
            width: 160px;
            height: 240px;
            position: relative;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.8s ease;
        }

        .kit-tarot-card.flipped {
            transform: rotateY(180deg);
        }

        .kit-tarot-front, .kit-tarot-back {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 12px;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--border);
        }

        .kit-tarot-front {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .kit-tarot-front::before {
            content: '';
            position: absolute;
            inset: 8px;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
        }

        .kit-tarot-symbol {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .kit-tarot-hint {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .kit-tarot-back {
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-secondary) 100%);
            transform: rotateY(180deg);
            padding: 1rem;
        }

        .kit-tarot-name {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .kit-tarot-emoji {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .kit-tarot-position {
            font-size: 0.75rem;
            color: var(--accent-purple);
            padding: 0.25rem 0.75rem;
            background: rgba(139, 92, 246, 0.15);
            border-radius: 100px;
        }

        .kit-tarot-meaning {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1rem;
        }

        .kit-tarot-section {
            margin-bottom: 1rem;
        }

        .kit-tarot-section:last-child {
            margin-bottom: 0;
        }

        .kit-tarot-section-title {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 0.25rem;
        }

        .kit-tarot-section-content {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .kit-password-tips {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 1200px) {
            .kit-tools-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .kit-main-content {
                padding: 6rem 1.5rem 2rem;
            }

            .kit-page-header h1 {
                font-size: 1.75rem;
            }

            .kit-speed-gauge {
                gap: 1.5rem;
            }

            .kit-gauge-circle {
                width: 80px;
                height: 80px;
            }

            .kit-gauge-circle::before {
                width: 64px;
                height: 64px;
            }

            .kit-gauge-value {
                font-size: 1rem;
            }
        }
        /* ==================== 管理员登录入口按钮 ==================== */
        .admin-trigger {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            background: transparent;
            border: 1px solid transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            opacity: 0.3;
            margin-right: 0.5rem;
        }

        .admin-trigger:hover {
            opacity: 1;
            background: rgba(0, 255, 65, 0.1);
            border-color: rgba(0, 255, 65, 0.3);
        }

        .admin-trigger svg {
            width: 14px;
            height: 14px;
            color: var(--matrix-green);
        }

        /* ==================== 管理员登录模态框 ==================== */
        .admin-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .admin-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .admin-modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2.5rem;
            width: 400px;
            max-width: 90%;
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .admin-modal-overlay.active .admin-modal {
            transform: scale(1) translateY(0);
        }

        .admin-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--matrix-green), var(--accent), var(--matrix-green));
            background-size: 200% 100%;
            animation: scanLine 2s linear infinite;
        }

        @keyframes scanLine {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .admin-modal-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .admin-modal-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 1rem;
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid rgba(0, 255, 65, 0.3);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .admin-modal-icon svg {
            width: 32px;
            height: 32px;
            color: var(--matrix-green);
        }

        .admin-modal-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .admin-modal-header p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .admin-form-group {
            margin-bottom: 1.25rem;
        }

        .admin-form-group label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .admin-form-group input {
            width: 100%;
            padding: 0.875rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: 'Space Mono', monospace;
            font-size: 0.9375rem;
            transition: all 0.3s ease;
        }

        .admin-form-group input:focus {
            outline: none;
            border-color: var(--matrix-green);
            box-shadow: 0 0 0 3px rgba(0, 255, 65, 0.1);
        }

        .admin-form-group input::placeholder {
            color: var(--text-secondary);
            font-family: 'Outfit', sans-serif;
        }

        .admin-login-btn {
            width: 100%;
            padding: 0.875rem;
            background: linear-gradient(135deg, var(--matrix-green), #00cc33);
            color: #000;
            border: none;
            border-radius: 10px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .admin-login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 65, 0.3);
        }

        .admin-login-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .admin-login-btn .spinner {
            width: 18px;
            height: 18px;
            border: 2px solid transparent;
            border-top-color: #000;
            border-radius: 50%;
            animation: spinAdmin 0.8s linear infinite;
            display: none;
        }

        .admin-login-btn.loading .spinner {
            display: block;
        }

        .admin-login-btn.loading .btn-text {
            display: none;
        }

        @keyframes spinAdmin {
            to { transform: rotate(360deg); }
        }

        .admin-error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            display: none;
        }

        .admin-error.show {
            display: block;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        .admin-modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 32px;
            height: 32px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .admin-modal-close:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        /* ==================== 管理后台 - Matrix风格 ==================== */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 9999;
            display: none;
        }

        .admin-panel.active {
            display: block;
        }

        .matrix-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000;
            overflow: hidden;
        }

        .matrix-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* 欢迎弹窗 */
        .welcome-admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .welcome-admin-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .welcome-admin-box {
            text-align: center;
            padding: 3rem;
        }

        .welcome-admin-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 2rem;
            background: rgba(0, 255, 65, 0.1);
            border: 2px solid var(--matrix-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulseGreen 2s ease-in-out infinite;
        }

        @keyframes pulseGreen {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 65, 0.3); }
            50% { box-shadow: 0 0 50px rgba(0, 255, 65, 0.6); }
        }

        .welcome-admin-icon svg {
            width: 50px;
            height: 50px;
            color: var(--matrix-green);
        }

        .welcome-admin-title {
            font-family: 'Space Mono', monospace;
            font-size: 2.5rem;
            color: var(--matrix-green);
            margin-bottom: 0.5rem;
            text-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
            animation: glitch 3s infinite;
        }

        @keyframes glitch {
            0%, 90%, 100% { text-shadow: 0 0 20px rgba(0, 255, 65, 0.5); }
            92% { text-shadow: -2px 0 red, 2px 0 cyan; }
            94% { text-shadow: 2px 0 red, -2px 0 cyan; }
        }

        .welcome-admin-subtitle {
            font-size: 1.125rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .welcome-admin-enter {
            padding: 1rem 3rem;
            background: transparent;
            border: 2px solid var(--matrix-green);
            color: var(--matrix-green);
            font-family: 'Space Mono', monospace;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .welcome-admin-enter:hover {
            background: var(--matrix-green);
            color: #000;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.5);
        }

        /* 管理面板内容 */
        .admin-content {
            position: relative;
            z-index: 1;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .admin-header {
            padding: 1rem 2rem;
            background: rgba(0, 0, 0, 0.8);
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .admin-logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .admin-logo-icon {
            width: 36px;
            height: 36px;
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid var(--matrix-green);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .admin-logo-icon svg {
            width: 20px;
            height: 20px;
            color: var(--matrix-green);
        }

        .admin-logo-text {
            font-family: 'Space Mono', monospace;
            font-size: 1.25rem;
            color: var(--matrix-green);
        }

        .admin-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid rgba(0, 255, 65, 0.3);
            border-radius: 100px;
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--matrix-green);
        }

        .admin-status::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--matrix-green);
            border-radius: 50%;
            animation: blink 1s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .admin-header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .admin-user {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid rgba(0, 255, 65, 0.2);
            border-radius: 8px;
        }

        .admin-user-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--matrix-green), #00cc33);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #000;
            font-size: 0.875rem;
        }

        .admin-user-info {
            display: flex;
            flex-direction: column;
        }

        .admin-user-name {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--matrix-green);
        }

        .admin-user-role {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .admin-logout-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #ef4444;
            font-family: 'Outfit', sans-serif;
            font-size: 0.875rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-logout-btn:hover {
            background: rgba(239, 68, 68, 0.1);
        }

        .admin-main {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .admin-title {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            color: var(--matrix-green);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .admin-title svg {
            width: 24px;
            height: 24px;
        }

        .admin-subtitle {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            margin-bottom: 2rem;
        }

        /* 统计卡片 */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .admin-stat-card {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(0, 255, 65, 0.2);
            border-radius: 12px;
            padding: 1.25rem;
            transition: all 0.3s ease;
        }

        .admin-stat-card:hover {
            border-color: var(--matrix-green);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.1);
        }

        .admin-stat-icon {
            width: 40px;
            height: 40px;
            background: rgba(0, 255, 65, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.25rem;
        }

        .admin-stat-value {
            font-family: 'Space Mono', monospace;
            font-size: 1.75rem;
            color: var(--matrix-green);
            margin-bottom: 0.25rem;
        }

        .admin-stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* 文件仓库 */
        .admin-storage {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(0, 255, 65, 0.2);
            border-radius: 16px;
            overflow: hidden;
        }

        .admin-storage-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-storage-title {
            font-family: 'Space Mono', monospace;
            font-size: 1rem;
            color: var(--matrix-green);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-storage-actions {
            display: flex;
            gap: 0.75rem;
        }

        .admin-btn {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-btn-primary {
            background: var(--matrix-green);
            border: none;
            color: #000;
            font-weight: 600;
        }

        .admin-btn-primary:hover {
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.4);
        }

        .admin-btn-secondary {
            background: transparent;
            border: 1px solid rgba(0, 255, 65, 0.3);
            color: var(--matrix-green);
        }

        .admin-btn-secondary:hover {
            background: rgba(0, 255, 65, 0.1);
        }

        /* 文件表格 */
        .admin-file-table {
            width: 100%;
        }

        .admin-file-table th,
        .admin-file-table td {
            padding: 1rem 1.5rem;
            text-align: left;
            border-bottom: 1px solid rgba(0, 255, 65, 0.1);
        }

        .admin-file-table th {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--matrix-green);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            background: rgba(0, 255, 65, 0.05);
        }

        .admin-file-table tr:hover td {
            background: rgba(0, 255, 65, 0.05);
        }

        .file-name {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .file-icon {
            width: 36px;
            height: 36px;
            background: rgba(0, 255, 65, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .file-info {
            display: flex;
            flex-direction: column;
        }

        .file-title {
            font-size: 0.9375rem;
            color: var(--text-primary);
        }

        .file-type {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .file-size {
            font-family: 'Space Mono', monospace;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .file-date {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .file-actions {
            display: flex;
            gap: 0.5rem;
        }

        .file-action-btn {
            width: 32px;
            height: 32px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .file-action-btn:hover {
            background: rgba(0, 255, 65, 0.1);
            border-color: var(--matrix-green);
            color: var(--matrix-green);
        }

        .file-action-btn.delete:hover {
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
            color: #ef4444;
        }

        /* 空状态 */
        .admin-empty {
            padding: 4rem 2rem;
            text-align: center;
        }

        .admin-empty-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            background: rgba(0, 255, 65, 0.1);
            border: 1px dashed rgba(0, 255, 65, 0.3);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .admin-empty h3 {
            font-size: 1.125rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .admin-empty p {
            color: var(--text-secondary);
            font-size: 0.9375rem;
        }

        /* 上传模态框 */
        .upload-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10002;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .upload-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .upload-modal {
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(0, 255, 65, 0.3);
            border-radius: 16px;
            padding: 2rem;
            width: 500px;
            max-width: 90%;
        }

        .upload-modal h3 {
            font-family: 'Space Mono', monospace;
            font-size: 1.25rem;
            color: var(--matrix-green);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .upload-dropzone {
            border: 2px dashed rgba(0, 255, 65, 0.3);
            border-radius: 12px;
            padding: 3rem 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-dropzone:hover,
        .upload-dropzone.dragover {
            border-color: var(--matrix-green);
            background: rgba(0, 255, 65, 0.05);
        }

        .upload-dropzone-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem;
            background: rgba(0, 255, 65, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .upload-dropzone-icon svg {
            width: 30px;
            height: 30px;
            color: var(--matrix-green);
        }

        .upload-dropzone h4 {
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .upload-dropzone p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .upload-dropzone input {
            display: none;
        }

        .upload-modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        /* Toast 通知 */
        .admin-toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid var(--matrix-green);
            border-radius: 10px;
            color: var(--matrix-green);
            font-family: 'Space Mono', monospace;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            z-index: 10003;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .admin-toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .admin-toast.error {
            border-color: #ef4444;
            color: #ef4444;
        }

        @media (max-width: 1024px) {
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .admin-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .admin-file-table {
                display: block;
                overflow-x: auto;
            }
        }

    </style>
</head>
<body>
    <div class="grid-bg"></div>
    <div class="glow-orb glow-orb-1"></div>
    <div class="glow-orb glow-orb-2"></div>
    <div class="glow-orb glow-orb-3"></div>

    <!-- 注册成功庆祝动画 -->
    <div class="celebration-overlay" id="celebration-overlay">
        <div class="celebration-neural" id="celebration-neural"></div>
        <div class="particles-container" id="particles-container"></div>
        <div class="celebration-rings">
            <div class="ring ring-1"></div>
            <div class="ring ring-2"></div>
            <div class="ring ring-3"></div>
            <div class="ring ring-4"></div>
        </div>
        <div class="celebration-container">
            <div class="celebration-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            </div>
            <h1 class="celebration-title">Welcome to AGI Era!</h1>
            <p class="celebration-subtitle">恭喜您成功加入</p>
            <p class="celebration-username" id="celebration-username"></p>
            <div class="celebration-features">
                <div class="celebration-feature">
                    <div class="celebration-feature-icon">🚀</div>
                    <span class="celebration-feature-text">极速 API</span>
                </div>
                <div class="celebration-feature">
                    <div class="celebration-feature-icon">🧠</div>
                    <span class="celebration-feature-text">高级推理</span>
                </div>
                <div class="celebration-feature">
                    <div class="celebration-feature-icon">🔒</div>
                    <span class="celebration-feature-text">安全加密</span>
                </div>
            </div>
            <div class="celebration-progress">
                <div class="celebration-progress-bar"></div>
            </div>
            <button class="celebration-skip" id="celebration-skip" onclick="closeCelebration()">跳过</button>
        </div>
    </div>

    <!-- 全局 Turnstile 验证遮罩 -->
    <div class="turnstile-overlay" id="turnstile-overlay">
        <div class="turnstile-box">
            <div class="turnstile-logo">
                <div class="t-face t-face-front"></div>
                <div class="t-face t-face-top"></div>
                <div class="t-face t-face-right"></div>
            </div>
            <h2>验证您是人类</h2>
            <p>请完成安全验证以继续访问</p>
            <div class="cf-turnstile" 
                 data-sitekey="0x4AAAAAACL3PQxQPFnxrDNW"
                 data-callback="onGlobalTurnstileSuccess"
                 data-error-callback="onGlobalTurnstileError"
                 data-theme="dark">
            </div>
            <div class="turnstile-loading" id="turnstile-loading">正在加载验证...</div>
        </div>
    </div>

    <!-- 欢迎弹窗 -->
    <div class="welcome-overlay" id="welcome-overlay">
        <div class="welcome-box">
            <div class="welcome-glow"></div>
            <div class="welcome-content">
                <div class="welcome-icon">
                    <div class="w-face w-face-front"></div>
                    <div class="w-face w-face-top"></div>
                    <div class="w-face w-face-right"></div>
                </div>
                <h1 class="welcome-title">
                    <span class="welcome-word">Welcome</span>
                    <span class="welcome-word">To</span>
                    <span class="welcome-word gradient">AGI</span>
                    <span class="welcome-word gradient">Era</span>
                </h1>
                <p class="welcome-subtitle">The Future of Intelligence Awaits</p>
                <button class="welcome-btn" onclick="closeWelcome()">
                    Enter
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <nav>
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <div class="logo" onclick="showPage('home')">
                <div class="logo-icon">
                    <div class="logo-face logo-face-front"></div>
                    <div class="logo-face logo-face-top"></div>
                    <div class="logo-face logo-face-right"></div>
                </div>
                <span class="logo-text">AGI Era</span>
            </div>
            <!-- 管理员登录入口 -->
            <button class="admin-trigger" onclick="openAdminLogin()" title="Admin Access">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
            </button>
        </div>
        <ul class="nav-links">
            <li><a class="active" data-page="home" onclick="showPage('home')">Home</a></li>
            <li><a data-page="research" onclick="showPage('research')">Research</a></li>
            <li><a data-page="chatbot" onclick="showPage('chatbot')">ChatBot</a></li>
            <li><a data-page="kit" onclick="showPage('kit')">Kit</a></li>
            <li><a data-page="about" onclick="showPage('about')">About</a></li>
        </ul>
        <div class="nav-right">
            <!-- 未登录状态 -->
            <div class="nav-auth" id="nav-auth-guest">
                <button class="nav-login" onclick="openModal('login')">Log In</button>
                <button class="nav-cta" onclick="openModal('signup')">Sign Up</button>
            </div>
            <!-- 已登录状态 -->
            <div class="nav-auth hidden" id="nav-auth-user">
                <div class="user-menu" onclick="toggleUserMenu()">
                    <div class="user-avatar" id="user-avatar">U</div>
                    <span class="user-name" id="user-name">Username</span>
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path d="M3 5l3 3 3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="user-dropdown" id="user-dropdown">
                    <div class="user-dropdown-header">
                        <div class="user-dropdown-name" id="dropdown-name">Username</div>
                        <div class="user-dropdown-email" id="dropdown-email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="750006100735100d14180519105b161a18">[email&#160;protected]</a></div>
                    </div>
                    <div class="user-dropdown-divider"></div>
                    <a class="user-dropdown-item" onclick="showPage('profile'); toggleUserMenu();">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="5" r="3" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M2 14c0-2.5 2.5-4.5 6-4.5s6 2 6 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        Profile
                    </a>
                    <a class="user-dropdown-item" onclick="showPage('settings'); toggleUserMenu();">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M13.5 8a5.5 5.5 0 01-11 0" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Settings
                    </a>
                    <div class="user-dropdown-divider"></div>
                    <a class="user-dropdown-item logout" onclick="logout()">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M6 14H3a1 1 0 01-1-1V3a1 1 0 011-1h3M11 11l3-3-3-3M14 8H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Log Out
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div class="page active" id="page-home">
        <section class="hero">
            <div class="hero-badge">
                <span>Now Available: AGI Era v2.0</span>
            </div>
            <h1>Build the Future with<br><span class="gradient">Artificial General Intelligence</span></h1>
            <p>The most advanced AI platform for developers and enterprises. Create, deploy, and scale intelligent applications with unprecedented capabilities.</p>
            <div class="hero-buttons">
                <button class="btn-primary" onclick="openModal('signup')">
                    Start Building
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button class="btn-secondary" onclick="showPage('docs')">
                    View Documentation
                </button>
            </div>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value">99.9%</div>
                    <div class="stat-label">Uptime SLA</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">50M+</div>
                    <div class="stat-label">API Calls Daily</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">10K+</div>
                    <div class="stat-label">Developers</div>
                </div>
            </div>
        </section>

        <section class="features">
            <div class="section-header">
                <h2>Built for the AI-First Era</h2>
                <p>Everything you need to build intelligent applications that understand, reason, and create.</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon cyan">⚡</div>
                    <h3>Lightning Fast</h3>
                    <p>Sub-100ms response times with our globally distributed inference network.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon purple">🧠</div>
                    <h3>Advanced Reasoning</h3>
                    <p>Multi-step reasoning and complex problem-solving capabilities.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon green">🔒</div>
                    <h3>Enterprise Security</h3>
                    <p>SOC 2 Type II certified with end-to-end encryption.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon orange">🔌</div>
                    <h3>Simple Integration</h3>
                    <p>REST APIs and SDKs for Python, JavaScript, Go, and more.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon pink">📊</div>
                    <h3>Real-time Analytics</h3>
                    <p>Monitor usage, performance, and costs with detailed dashboards.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon cyan">🌐</div>
                    <h3>Global Scale</h3>
                    <p>Deploy to 30+ regions with automatic failover and load balancing.</p>
                </div>
            </div>
        </section>

        <section class="demo">
            <div class="demo-container">
                <div class="section-header">
                    <h2>Experience the Power</h2>
                    <p>Try our AI assistant right here. Ask anything.</p>
                </div>
                <div class="demo-window">
                    <div class="demo-header">
                        <div class="demo-dot red"></div>
                        <div class="demo-dot yellow"></div>
                        <div class="demo-dot green"></div>
                        <!-- AI 选择器 -->
                        <div class="ai-selector" id="demo-ai-selector">
                            <button class="ai-selector-btn" onclick="toggleAISelector('demo')">
                                <span class="ai-selector-icon" id="demo-ai-icon">🤖</span>
                                <span class="ai-selector-name" id="demo-ai-name">Qwen</span>
                                <svg class="ai-selector-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                            </button>
                            <div class="ai-selector-dropdown" id="demo-ai-dropdown">
                                <div class="ai-option active" data-ai="qwen" onclick="selectAI('demo', 'qwen')">
                                    <span class="ai-option-icon">🤖</span>
                                    <div class="ai-option-info">
                                        <span class="ai-option-name">Qwen</span>
                                        <span class="ai-option-desc">通义千问 · 阿里云</span>
                                    </div>
                                    <span class="ai-option-check">✓</span>
                                </div>
                                <div class="ai-option" data-ai="deepseek" onclick="selectAI('demo', 'deepseek')">
                                    <span class="ai-option-icon">🔮</span>
                                    <div class="ai-option-info">
                                        <span class="ai-option-name">DeepSeek</span>
                                        <span class="ai-option-desc">深度求索 · DeepSeek</span>
                                    </div>
                                    <span class="ai-option-check">✓</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="demo-chat" id="demo-chat">
                        <div class="chat-message">
                            <div class="chat-avatar">
                                <div class="c-face c-face-front"></div>
                                <div class="c-face c-face-top"></div>
                                <div class="c-face c-face-right"></div>
                            </div>
                            <div class="chat-bubble">
                                <p>Hello! I'm AGI Era's AI assistant. I can help you with coding, analysis, creative writing, and much more. What would you like to explore?</p>
                            </div>
                        </div>
                    </div>
                    <div class="demo-input">
                        <input type="text" placeholder="Type your message..." id="demo-input-field" onkeypress="handleDemoInput(event)">
                        <button onclick="sendDemoMessage()">Send</button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- About Page -->
    <div class="page" id="page-about">
        <section class="about-hero">
            <h1>Building Responsible AGI</h1>
            <p>We're on a mission to develop artificial general intelligence that benefits humanity. Our team combines world-class AI research with a deep commitment to safety and ethics.</p>
        </section>

        <section class="about-section">
            <div class="about-grid">
                <div class="about-content">
                    <h2>Our Mission</h2>
                    <p>At AGI Era, we believe that artificial general intelligence has the potential to solve humanity's greatest challenges—from climate change to disease to poverty.</p>
                    <p>But we also recognize that such powerful technology must be developed responsibly. That's why safety isn't just a priority—it's embedded in everything we do.</p>
                    <p>Our team includes leading researchers in AI safety, alignment, and interpretability, working alongside engineers to build systems that are not only capable but trustworthy.</p>
                </div>
                <div class="about-visual">
                    <div class="neural-network" id="neural-network"></div>
                </div>
            </div>
        </section>

        <section class="about-section">
            <div class="section-header">
                <h2>Our Values</h2>
                <p>The principles that guide our work</p>
            </div>
            <div class="values-grid">
                <div class="value-card">
                    <h3>🎯 Safety First</h3>
                    <p>We prioritize the safe development of AI above all else, investing heavily in alignment research and testing.</p>
                </div>
                <div class="value-card">
                    <h3>🔬 Scientific Rigor</h3>
                    <p>We publish our research openly and subject our work to peer review and external scrutiny.</p>
                </div>
                <div class="value-card">
                    <h3>🤝 Collaboration</h3>
                    <p>We work with governments, academia, and industry to establish best practices for AI development.</p>
                </div>
                <div class="value-card">
                    <h3>💡 Innovation</h3>
                    <p>We push the boundaries of what's possible while maintaining our commitment to responsible development.</p>
                </div>
                <div class="value-card">
                    <h3>🌍 Global Impact</h3>
                    <p>We build technology that can benefit people everywhere, not just in wealthy nations.</p>
                </div>
                <div class="value-card">
                    <h3>👥 Diversity</h3>
                    <p>We believe diverse perspectives lead to better AI systems that work for everyone.</p>
                </div>
            </div>
        </section>

        <section class="about-section">
            <div class="section-header">
                <h2>Leadership Team</h2>
                <p>Meet the people driving our mission forward</p>
            </div>
            <div class="team-grid">
                <div class="team-card">
                    <div class="team-avatar">SL</div>
                    <h4>Dr. Sarah Lin</h4>
                    <p>CEO & Co-Founder</p>
                </div>
                <div class="team-card">
                    <div class="team-avatar">MK</div>
                    <h4>Marcus Kim</h4>
                    <p>CTO & Co-Founder</p>
                </div>
                <div class="team-card">
                    <div class="team-avatar">EP</div>
                    <h4>Dr. Elena Petrov</h4>
                    <p>Chief Scientist</p>
                </div>
                <div class="team-card">
                    <div class="team-avatar">JW</div>
                    <h4>James Wright</h4>
                    <p>Head of Safety</p>
                </div>
            </div>
        </section>

        <section class="about-section">
            <div class="section-header">
                <h2>Our Journey</h2>
            </div>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="date">2024</div>
                    <h4>AGI Era v2.0 Launch</h4>
                    <p>Released our most capable model yet, with breakthrough reasoning capabilities.</p>
                </div>
                <div class="timeline-item">
                    <div class="date">2023</div>
                    <h4>Series B Funding</h4>
                    <p>Raised $500M to accelerate research and expand our team globally.</p>
                </div>
                <div class="timeline-item">
                    <div class="date">2022</div>
                    <h4>API Platform Launch</h4>
                    <p>Made our AI accessible to developers worldwide through our API platform.</p>
                </div>
                <div class="timeline-item">
                    <div class="date">2021</div>
                    <h4>Company Founded</h4>
                    <p>Started with a small team of researchers committed to safe AGI development.</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Research Page -->
    <div class="page" id="page-research">
        <section class="research-hero">
            <h1>Research</h1>
            <p>Advancing the frontier of AI capabilities and safety</p>
        </section>

        <section class="research-section">
            <div class="section-header" style="text-align: left; margin-bottom: 2rem;">
                <h2>Recent Publications</h2>
            </div>
            <div class="papers-list">
                <div class="paper-card">
                    <div class="paper-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                    </div>
                    <div class="paper-content">
                        <h3>Scaling Laws for Neural Language Models</h3>
                        <div class="paper-meta">
                            <span>March 2024</span>
                            <span>•</span>
                            <span>Chen et al.</span>
                        </div>
                        <p>We investigate the scaling properties of language model performance on downstream tasks. Our findings reveal predictable relationships between compute, data, and model performance.</p>
                        <div class="paper-tags">
                            <span class="paper-tag">Language Models</span>
                            <span class="paper-tag">Scaling Laws</span>
                            <span class="paper-tag">Training</span>
                        </div>
                    </div>
                </div>

                <div class="paper-card">
                    <div class="paper-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                    </div>
                    <div class="paper-content">
                        <h3>Constitutional AI: Harmlessness from AI Feedback</h3>
                        <div class="paper-meta">
                            <span>January 2024</span>
                            <span>•</span>
                            <span>Park et al.</span>
                        </div>
                        <p>We propose a method for training harmless AI assistants without human labels for harms, using a set of principles to guide the AI's behavior during training.</p>
                        <div class="paper-tags">
                            <span class="paper-tag">AI Safety</span>
                            <span class="paper-tag">Alignment</span>
                            <span class="paper-tag">RLHF</span>
                        </div>
                    </div>
                </div>

                <div class="paper-card">
                    <div class="paper-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                    </div>
                    <div class="paper-content">
                        <h3>Efficient Training of Large Transformers</h3>
                        <div class="paper-meta">
                            <span>November 2023</span>
                            <span>•</span>
                            <span>Wong et al.</span>
                        </div>
                        <p>We present techniques for reducing the computational requirements of training large transformer models by up to 40% without sacrificing performance.</p>
                        <div class="paper-tags">
                            <span class="paper-tag">Efficiency</span>
                            <span class="paper-tag">Transformers</span>
                            <span class="paper-tag">Optimization</span>
                        </div>
                    </div>
                </div>

                <div class="paper-card">
                    <div class="paper-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                    </div>
                    <div class="paper-content">
                        <h3>Interpretability in Deep Neural Networks</h3>
                        <div class="paper-meta">
                            <span>September 2023</span>
                            <span>•</span>
                            <span>Miller et al.</span>
                        </div>
                        <p>New methods for understanding what neural networks learn, including visualization techniques and mechanistic interpretability approaches.</p>
                        <div class="paper-tags">
                            <span class="paper-tag">Interpretability</span>
                            <span class="paper-tag">Visualization</span>
                            <span class="paper-tag">Safety</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- ChatBot Page -->
    <div class="page" id="page-chatbot">
        <section class="chatbot-hero">
            <h1>AI <span class="gradient">ChatBot</span></h1>
            <p>Experience the power of advanced AI. Ask anything and get intelligent responses powered by Qwen.</p>
        </section>

        <div class="chatbot-container">
            <div class="chatbot-window">
                <div class="chatbot-header">
                    <div class="chatbot-header-dots">
                        <div class="chatbot-header-dot red"></div>
                        <div class="chatbot-header-dot yellow"></div>
                        <div class="chatbot-header-dot green"></div>
                    </div>
                    <div class="chatbot-header-title">AGI Era Assistant</div>
                    <!-- AI 选择器 -->
                    <div class="ai-selector" id="chatbot-ai-selector">
                        <button class="ai-selector-btn" onclick="toggleAISelector('chatbot')">
                            <span class="ai-selector-icon" id="chatbot-ai-icon">🤖</span>
                            <span class="ai-selector-name" id="chatbot-ai-name">Qwen</span>
                            <svg class="ai-selector-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                        <div class="ai-selector-dropdown" id="chatbot-ai-dropdown">
                            <div class="ai-option active" data-ai="qwen" onclick="selectAI('chatbot', 'qwen')">
                                <span class="ai-option-icon">🤖</span>
                                <div class="ai-option-info">
                                    <span class="ai-option-name">Qwen</span>
                                    <span class="ai-option-desc">通义千问 · 阿里云</span>
                                </div>
                                <span class="ai-option-check">✓</span>
                            </div>
                            <div class="ai-option" data-ai="deepseek" onclick="selectAI('chatbot', 'deepseek')">
                                <span class="ai-option-icon">🔮</span>
                                <div class="ai-option-info">
                                    <span class="ai-option-name">DeepSeek</span>
                                    <span class="ai-option-desc">深度求索 · DeepSeek</span>
                                </div>
                                <span class="ai-option-check">✓</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 登录提示遮罩 -->
                <div class="chatbot-login-overlay" id="chatbot-login-overlay">
                    <div class="chatbot-login-content">
                        <div class="chatbot-login-icon">🔒</div>
                        <h3>登录后使用 AI 助手</h3>
                        <p>登录您的账号即可与 AI 助手进行无限对话</p>
                        <div class="chatbot-login-buttons">
                            <button class="chatbot-login-btn primary" onclick="openModal('login')">登录</button>
                            <button class="chatbot-login-btn secondary" onclick="openModal('signup')">注册账号</button>
                        </div>
                        <div class="chatbot-login-hint">
                            <span>💡 首页可免登录体验 AI</span>
                        </div>
                    </div>
                </div>
                
                <div class="chatbot-messages" id="chatbot-messages">
                    <div class="chatbot-message">
                        <div class="chatbot-avatar">
                                <div class="cb-face cb-face-front"></div>
                                <div class="cb-face cb-face-top"></div>
                                <div class="cb-face cb-face-right"></div>
                            </div>
                        <div class="chatbot-bubble">
                            <p>Hello! I'm AGI Era's AI assistant powered by Qwen. I can help you with coding, analysis, creative writing, and much more. What would you like to explore today?</p>
                        </div>
                    </div>
                </div>

                <div class="chatbot-input">
                    <input type="text" id="chatbot-input" placeholder="Type your message..." onkeypress="handleChatKeypress(event)">
                    <button id="chatbot-send-btn" onclick="sendChatMessage()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"/>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                        </svg>
                        Send
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Kit Page - Network Tools Suite -->
    <div class="page" id="page-kit">
        <main class="kit-main-content">
            <div class="kit-page-header">
                <div class="page-badge">Utility Toolkit</div>
                <h1>Super <span class="gradient">Kit</span></h1>
                <p>专业工具集 · 26款实用工具助力您的日常工作</p>
            </div>

            <div class="kit-tools-grid">
                <!-- 1. Speed Test -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon cyan">⚡</div>
                                网速测试
                            </div>
                        </div>
                        <span class="kit-status-badge success" id="speed-status" style="display: none;">完成</span>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-speed-gauge">
                            <div class="kit-gauge-item">
                                <div class="kit-gauge-circle" id="download-gauge">
                                    <span class="kit-gauge-value" id="download-speed">--</span>
                                </div>
                                <div class="kit-gauge-label">下载速度</div>
                                <div class="kit-gauge-unit">Mbps</div>
                            </div>
                            <div class="kit-gauge-item">
                                <div class="kit-gauge-circle purple" id="upload-gauge">
                                    <span class="kit-gauge-value" id="upload-speed">--</span>
                                </div>
                                <div class="kit-gauge-label">上传速度</div>
                                <div class="kit-gauge-unit">Mbps</div>
                            </div>
                            <div class="kit-gauge-item">
                                <div class="kit-gauge-circle green" id="ping-gauge">
                                    <span class="kit-gauge-value" id="ping-value">--</span>
                                </div>
                                <div class="kit-gauge-label">延迟</div>
                                <div class="kit-gauge-unit">ms</div>
                            </div>
                        </div>
                        <button class="kit-btn kit-btn-primary" id="speed-test-btn" onclick="runSpeedTest()" style="width: 100%;">
                            开始测速
                        </button>
                    </div>
                </div>

                <!-- 2. Ping Test -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon green">📡</div>
                                Ping 测试
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>目标主机</label>
                            <div class="kit-input-row">
                                <input type="text" class="kit-input-field" id="ping-host" placeholder="例如: google.com">
                                <button class="kit-btn kit-btn-primary" onclick="runPingTest()">Ping</button>
                            </div>
                        </div>
                        <div class="kit-result-box" id="ping-results">
                            <div style="text-align: center; color: var(--text-secondary); padding: 2rem;">
                                输入主机名或IP地址开始测试
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. IPv4/IPv6 Detection -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon purple">🌐</div>
                                IPv4/IPv6 检测
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <button class="kit-btn kit-btn-primary" onclick="detectIPKit()" style="width: 100%; margin-bottom: 1rem;">检测我的 IP</button>
                        <div class="kit-result-box" id="ip-results-kit">
                            <div class="kit-result-item">
                                <span class="kit-result-label">IPv4 地址</span>
                                <span class="kit-result-value" id="ipv4-addr">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">IPv6 地址</span>
                                <span class="kit-result-value" id="ipv6-addr">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">IPv6 支持</span>
                                <span class="kit-result-value" id="ipv6-support">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">位置</span>
                                <span class="kit-result-value" id="ip-location-kit">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">ISP</span>
                                <span class="kit-result-value" id="ip-isp-kit">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4. VPN/Proxy Detection -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon orange">🛡️</div>
                                代理/VPN 检测
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <button class="kit-btn kit-btn-primary" onclick="detectProxy()" style="width: 100%; margin-bottom: 1rem;">开始检测</button>
                        <div class="kit-result-box" id="proxy-results">
                            <div class="kit-result-item">
                                <span class="kit-result-label">代理状态</span>
                                <span class="kit-result-value" id="proxy-status">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">VPN 状态</span>
                                <span class="kit-result-value" id="vpn-status">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">Tor 网络</span>
                                <span class="kit-result-value" id="tor-status">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">数据中心 IP</span>
                                <span class="kit-result-value" id="datacenter-status">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">匿名等级</span>
                                <span class="kit-result-value" id="anon-level">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 5. SSL Certificate Check -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon green">🔒</div>
                                SSL 证书检查
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>网站域名</label>
                            <div class="kit-input-row">
                                <input type="text" class="kit-input-field" id="ssl-domain" placeholder="例如: github.com">
                                <button class="kit-btn kit-btn-primary" onclick="checkSSL()">检查</button>
                            </div>
                        </div>
                        <div class="kit-result-box" id="ssl-results">
                            <div style="text-align: center; color: var(--text-secondary); padding: 2rem;">
                                输入域名检查 SSL 证书信息
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 6. HTTP Headers -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon pink">📋</div>
                                HTTP 头信息
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>网站 URL</label>
                            <div class="kit-input-row">
                                <input type="text" class="kit-input-field" id="headers-url" placeholder="例如: https://example.com">
                                <button class="kit-btn kit-btn-primary" onclick="getHeaders()">获取</button>
                            </div>
                        </div>
                        <div class="kit-result-box kit-headers-list" id="headers-results">
                            <div style="text-align: center; color: var(--text-secondary); padding: 2rem; font-family: 'Outfit', sans-serif;">
                                输入 URL 获取 HTTP 响应头
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 7. Security Scan -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon red">🔍</div>
                                网站安全扫描
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>目标网站</label>
                            <div class="kit-input-row">
                                <input type="text" class="kit-input-field" id="scan-url" placeholder="例如: example.com">
                                <button class="kit-btn kit-btn-primary" onclick="runSecurityScan()">扫描</button>
                            </div>
                        </div>
                        <div class="kit-scan-progress" id="scan-progress" style="display: none;">
                            <div class="kit-progress-bar">
                                <div class="kit-progress-fill" id="scan-progress-fill" style="width: 0%;"></div>
                            </div>
                        </div>
                        <div class="kit-scan-items" id="scan-items">
                            <div class="kit-scan-item">
                                <div class="kit-scan-icon pending">○</div>
                                <span>SSL/TLS 安全性</span>
                            </div>
                            <div class="kit-scan-item">
                                <div class="kit-scan-icon pending">○</div>
                                <span>HTTP 安全头</span>
                            </div>
                            <div class="kit-scan-item">
                                <div class="kit-scan-icon pending">○</div>
                                <span>内容安全策略</span>
                            </div>
                            <div class="kit-scan-item">
                                <div class="kit-scan-icon pending">○</div>
                                <span>DNSSEC 状态</span>
                            </div>
                            <div class="kit-scan-item">
                                <div class="kit-scan-icon pending">○</div>
                                <span>恶意软件检测</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 8. Currency Exchange -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon cyan">💱</div>
                                实时汇率计算
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>金额</label>
                            <input type="number" class="kit-input-field" id="currency-amount" placeholder="输入金额" value="100" oninput="convertCurrency()">
                        </div>
                        <div class="kit-input-group">
                            <div class="kit-input-row" style="align-items: center;">
                                <select class="kit-input-field" id="currency-from" onchange="convertCurrency()">
                                    <option value="USD">🇺🇸 USD - 美元</option>
                                    <option value="EUR">🇪🇺 EUR - 欧元</option>
                                    <option value="GBP">🇬🇧 GBP - 英镑</option>
                                    <option value="JPY">🇯🇵 JPY - 日元</option>
                                    <option value="CNY" selected>🇨🇳 CNY - 人民币</option>
                                    <option value="HKD">🇭🇰 HKD - 港币</option>
                                    <option value="KRW">🇰🇷 KRW - 韩元</option>
                                    <option value="SGD">🇸🇬 SGD - 新加坡元</option>
                                    <option value="AUD">🇦🇺 AUD - 澳元</option>
                                    <option value="CAD">🇨🇦 CAD - 加元</option>
                                </select>
                                <button class="kit-swap-btn" onclick="swapCurrency()">⇄</button>
                                <select class="kit-input-field" id="currency-to" onchange="convertCurrency()">
                                    <option value="USD" selected>🇺🇸 USD - 美元</option>
                                    <option value="EUR">🇪🇺 EUR - 欧元</option>
                                    <option value="GBP">🇬🇧 GBP - 英镑</option>
                                    <option value="JPY">🇯🇵 JPY - 日元</option>
                                    <option value="CNY">🇨🇳 CNY - 人民币</option>
                                    <option value="HKD">🇭🇰 HKD - 港币</option>
                                    <option value="KRW">🇰🇷 KRW - 韩元</option>
                                    <option value="SGD">🇸🇬 SGD - 新加坡元</option>
                                    <option value="AUD">🇦🇺 AUD - 澳元</option>
                                    <option value="CAD">🇨🇦 CAD - 加元</option>
                                </select>
                            </div>
                        </div>
                        <div class="kit-currency-display">
                            <div class="kit-currency-amount" id="converted-amount">--</div>
                            <div class="kit-currency-rate" id="exchange-rate">汇率将在计算后显示</div>
                        </div>
                    </div>
                </div>

                <!-- 9. QR Code Generator -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon purple">⬛</div>
                                二维码生成器
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>输入内容</label>
                            <input type="text" class="kit-input-field" id="qr-input" placeholder="输入文本或网址...">
                        </div>
                        <div class="kit-input-group">
                            <label>尺寸</label>
                            <select class="kit-input-field" id="qr-size">
                                <option value="128">小 (128×128)</option>
                                <option value="200" selected>中 (200×200)</option>
                                <option value="300">大 (300×300)</option>
                            </select>
                        </div>
                        <button class="kit-btn kit-btn-primary" onclick="generateQRCode()" style="width: 100%; margin-bottom: 1rem;">生成二维码</button>
                        <div class="kit-qr-output" id="qr-output">
                            <div style="text-align: center; color: var(--text-secondary); padding: 1.5rem;">
                                输入内容后生成二维码
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 10. Short URL Generator -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon cyan">🔗</div>
                                短链接生成
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>原始网址</label>
                            <input type="url" class="kit-input-field" id="long-url-input" placeholder="https://example.com/very-long-url...">
                        </div>
                        <button class="kit-btn kit-btn-primary" onclick="generateShortURL()" style="width: 100%; margin-bottom: 1rem;">生成短链接</button>
                        <div class="kit-result-box" id="short-url-result">
                            <div style="text-align: center; color: var(--text-secondary); padding: 1.5rem;">
                                输入长网址生成短链接
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 11. Unit Converter -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon orange">📐</div>
                                单位换算器
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>类型</label>
                            <select class="kit-input-field" id="unit-category" onchange="updateUnitOptions()">
                                <option value="length">长度</option>
                                <option value="weight">重量</option>
                                <option value="temperature">温度</option>
                                <option value="area">面积</option>
                                <option value="data">数据存储</option>
                            </select>
                        </div>
                        <div class="kit-input-group">
                            <label>数值</label>
                            <input type="number" class="kit-input-field" id="unit-value" placeholder="输入数值" value="1" oninput="convertUnits()">
                        </div>
                        <div class="kit-input-group">
                            <div class="kit-input-row" style="align-items: center;">
                                <select class="kit-input-field" id="unit-from" onchange="convertUnits()"></select>
                                <button class="kit-swap-btn" onclick="swapUnits()">⇄</button>
                                <select class="kit-input-field" id="unit-to" onchange="convertUnits()"></select>
                            </div>
                        </div>
                        <div class="kit-currency-display" style="padding: 1rem;">
                            <div class="kit-currency-amount" id="unit-result">--</div>
                            <div class="kit-currency-rate" id="unit-formula">选择单位开始换算</div>
                        </div>
                    </div>
                </div>

                <!-- 12. Password Strength Checker -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon green">🔐</div>
                                密码强度检测
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>输入密码</label>
                            <div style="position: relative;">
                                <input type="password" class="kit-input-field" id="password-check-input" placeholder="输入要检测的密码..." oninput="checkPasswordStrength()">
                                <button class="kit-eye-btn" onclick="togglePasswordView()">👁</button>
                            </div>
                        </div>
                        <div class="kit-password-meter" id="password-meter">
                            <div class="kit-meter-bar">
                                <div class="kit-meter-fill" id="password-meter-fill"></div>
                            </div>
                            <div class="kit-password-label" id="password-strength-label">输入密码开始检测</div>
                        </div>
                        <div class="kit-password-tips" id="password-tips">
                            <div class="kit-tip-item" id="pwd-tip-length">
                                <span class="kit-tip-icon">○</span> 至少8个字符
                            </div>
                            <div class="kit-tip-item" id="pwd-tip-upper">
                                <span class="kit-tip-icon">○</span> 包含大写字母
                            </div>
                            <div class="kit-tip-item" id="pwd-tip-lower">
                                <span class="kit-tip-icon">○</span> 包含小写字母
                            </div>
                            <div class="kit-tip-item" id="pwd-tip-number">
                                <span class="kit-tip-icon">○</span> 包含数字
                            </div>
                            <div class="kit-tip-item" id="pwd-tip-special">
                                <span class="kit-tip-icon">○</span> 包含特殊字符
                            </div>
                        </div>
                        <button class="kit-btn kit-btn-primary" onclick="generateStrongPassword()" style="width: 100%; margin-top: 1rem;">生成强密码</button>
                    </div>
                </div>

                <!-- 13. Translator -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon pink">🌐</div>
                                多语言翻译
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <div class="kit-input-row" style="align-items: center;">
                                <select class="kit-input-field" id="translate-from">
                                    <option value="auto">自动检测</option>
                                    <option value="zh-CN">中文</option>
                                    <option value="en">英语</option>
                                    <option value="ja">日语</option>
                                    <option value="ko">韩语</option>
                                    <option value="fr">法语</option>
                                    <option value="de">德语</option>
                                    <option value="es">西班牙语</option>
                                    <option value="ru">俄语</option>
                                </select>
                                <button class="kit-swap-btn" onclick="swapTranslateLang()">⇄</button>
                                <select class="kit-input-field" id="translate-to">
                                    <option value="en">英语</option>
                                    <option value="zh-CN">中文</option>
                                    <option value="ja">日语</option>
                                    <option value="ko">韩语</option>
                                    <option value="fr">法语</option>
                                    <option value="de">德语</option>
                                    <option value="es">西班牙语</option>
                                    <option value="ru">俄语</option>
                                </select>
                            </div>
                        </div>
                        <div class="kit-input-group">
                            <label>原文</label>
                            <textarea class="kit-input-field kit-textarea" id="translate-input" placeholder="输入要翻译的文本..."></textarea>
                        </div>
                        <button class="kit-btn kit-btn-primary" onclick="translateText()" style="width: 100%; margin-bottom: 1rem;">翻译</button>
                        <div class="kit-input-group">
                            <label>译文</label>
                            <div class="kit-translate-output" id="translate-output">翻译结果将显示在这里...</div>
                        </div>
                    </div>
                </div>

                <!-- 14. Base Converter (进制转换器) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon cyan">🔢</div>
                                进制转换器
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>输入数值</label>
                            <input type="text" class="kit-input-field" id="base-input" placeholder="输入数字..." oninput="convertBase()">
                        </div>
                        <div class="kit-input-group">
                            <label>输入进制</label>
                            <select class="kit-input-field" id="base-from" onchange="convertBase()">
                                <option value="10" selected>十进制 (Decimal)</option>
                                <option value="2">二进制 (Binary)</option>
                                <option value="8">八进制 (Octal)</option>
                                <option value="16">十六进制 (Hex)</option>
                            </select>
                        </div>
                        <div class="kit-result-box" id="base-results">
                            <div class="kit-result-item">
                                <span class="kit-result-label">二进制 (BIN)</span>
                                <span class="kit-result-value" id="base-bin">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">八进制 (OCT)</span>
                                <span class="kit-result-value" id="base-oct">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">十进制 (DEC)</span>
                                <span class="kit-result-value accent" id="base-dec">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">十六进制 (HEX)</span>
                                <span class="kit-result-value" id="base-hex">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 15. Random Number Generator (随机数生成器) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon purple">🎲</div>
                                随机数生成器
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>范围</label>
                            <div class="kit-input-row">
                                <input type="number" class="kit-input-field" id="random-min" placeholder="最小值" value="1">
                                <span style="color: var(--text-secondary); padding: 0 0.5rem;">到</span>
                                <input type="number" class="kit-input-field" id="random-max" placeholder="最大值" value="100">
                            </div>
                        </div>
                        <div class="kit-input-group">
                            <label>生成数量</label>
                            <input type="number" class="kit-input-field" id="random-count" placeholder="数量" value="5" min="1" max="100">
                        </div>
                        <div class="kit-input-group">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="random-unique" style="width: 16px; height: 16px;">
                                <span>不重复</span>
                            </label>
                        </div>
                        <button class="kit-btn kit-btn-primary" onclick="generateRandomNumbers()" style="width: 100%; margin-bottom: 1rem;">生成随机数</button>
                        <div class="kit-result-box" id="random-results">
                            <div style="text-align: center; color: var(--text-secondary); padding: 1rem;">
                                点击按钮生成随机数
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 16. MD5/SHA Hash Generator (哈希生成器) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon orange">🔑</div>
                                MD5/SHA 哈希
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>输入文本</label>
                            <textarea class="kit-input-field kit-textarea" id="hash-input" placeholder="输入要生成哈希的文本..." oninput="generateHashes()"></textarea>
                        </div>
                        <div class="kit-result-box" id="hash-results">
                            <div class="kit-result-item">
                                <span class="kit-result-label">MD5</span>
                                <span class="kit-result-value kit-hash-value" id="hash-md5" onclick="copyToClipboard(this.textContent)">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">SHA-1</span>
                                <span class="kit-result-value kit-hash-value" id="hash-sha1" onclick="copyToClipboard(this.textContent)">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">SHA-256</span>
                                <span class="kit-result-value kit-hash-value" id="hash-sha256" onclick="copyToClipboard(this.textContent)">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">SHA-512</span>
                                <span class="kit-result-value kit-hash-value" id="hash-sha512" onclick="copyToClipboard(this.textContent)">--</span>
                            </div>
                        </div>
                        <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.5rem; text-align: center;">💡 点击哈希值可复制</p>
                    </div>
                </div>

                <!-- 17. Age Calculator (年龄计算器) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon pink">🎂</div>
                                年龄计算器
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>出生日期</label>
                            <input type="date" class="kit-input-field" id="birth-date" onchange="calculateAge()">
                        </div>
                        <div class="kit-age-display" id="age-display">
                            <div class="kit-age-main">
                                <span class="kit-age-number" id="age-years">--</span>
                                <span class="kit-age-unit">岁</span>
                            </div>
                            <div class="kit-age-detail" id="age-detail">输入出生日期计算年龄</div>
                        </div>
                        <div class="kit-result-box" id="age-results" style="display: none;">
                            <div class="kit-result-item">
                                <span class="kit-result-label">精确年龄</span>
                                <span class="kit-result-value" id="age-exact">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">已度过</span>
                                <span class="kit-result-value accent" id="age-days">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">下次生日</span>
                                <span class="kit-result-value success" id="age-next-birthday">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">生肖</span>
                                <span class="kit-result-value" id="age-zodiac">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">星座</span>
                                <span class="kit-result-value" id="age-constellation">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 18. Date Calculator (日期计算器) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon green">📅</div>
                                日期计算器
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-date-tabs">
                            <button class="kit-date-tab active" onclick="switchDateMode('diff')">日期差</button>
                            <button class="kit-date-tab" onclick="switchDateMode('add')">日期推算</button>
                        </div>
                        <div id="date-diff-mode">
                            <div class="kit-input-group">
                                <label>开始日期</label>
                                <input type="date" class="kit-input-field" id="date-start" onchange="calculateDateDiff()">
                            </div>
                            <div class="kit-input-group">
                                <label>结束日期</label>
                                <input type="date" class="kit-input-field" id="date-end" onchange="calculateDateDiff()">
                            </div>
                        </div>
                        <div id="date-add-mode" style="display: none;">
                            <div class="kit-input-group">
                                <label>起始日期</label>
                                <input type="date" class="kit-input-field" id="date-base" onchange="calculateDateAdd()">
                            </div>
                            <div class="kit-input-group">
                                <label>增减天数</label>
                                <div class="kit-input-row">
                                    <select class="kit-input-field" id="date-operation" style="width: 80px;" onchange="calculateDateAdd()">
                                        <option value="add">+</option>
                                        <option value="sub">-</option>
                                    </select>
                                    <input type="number" class="kit-input-field" id="date-days-input" placeholder="天数" value="30" onchange="calculateDateAdd()">
                                </div>
                            </div>
                        </div>
                        <div class="kit-currency-display" style="padding: 1rem;">
                            <div class="kit-currency-amount" id="date-result">--</div>
                            <div class="kit-currency-rate" id="date-detail">选择日期开始计算</div>
                        </div>
                    </div>
                </div>

                <!-- 19. World Clock (世界时钟) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon cyan">🌍</div>
                                世界时钟
                            </div>
                        </div>
                        <span class="kit-live-indicator">● LIVE</span>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-world-clocks" id="world-clocks">
                            <div class="kit-clock-item" data-tz="Asia/Shanghai">
                                <div class="kit-clock-city">🇨🇳 北京</div>
                                <div class="kit-clock-time" id="clock-beijing">--:--:--</div>
                                <div class="kit-clock-date" id="clock-beijing-date">--</div>
                            </div>
                            <div class="kit-clock-item" data-tz="America/New_York">
                                <div class="kit-clock-city">🇺🇸 纽约</div>
                                <div class="kit-clock-time" id="clock-newyork">--:--:--</div>
                                <div class="kit-clock-date" id="clock-newyork-date">--</div>
                            </div>
                            <div class="kit-clock-item" data-tz="Europe/London">
                                <div class="kit-clock-city">🇬🇧 伦敦</div>
                                <div class="kit-clock-time" id="clock-london">--:--:--</div>
                                <div class="kit-clock-date" id="clock-london-date">--</div>
                            </div>
                            <div class="kit-clock-item" data-tz="Asia/Tokyo">
                                <div class="kit-clock-city">🇯🇵 东京</div>
                                <div class="kit-clock-time" id="clock-tokyo">--:--:--</div>
                                <div class="kit-clock-date" id="clock-tokyo-date">--</div>
                            </div>
                            <div class="kit-clock-item" data-tz="Europe/Paris">
                                <div class="kit-clock-city">🇫🇷 巴黎</div>
                                <div class="kit-clock-time" id="clock-paris">--:--:--</div>
                                <div class="kit-clock-date" id="clock-paris-date">--</div>
                            </div>
                            <div class="kit-clock-item" data-tz="Australia/Sydney">
                                <div class="kit-clock-city">🇦🇺 悉尼</div>
                                <div class="kit-clock-time" id="clock-sydney">--:--:--</div>
                                <div class="kit-clock-date" id="clock-sydney-date">--</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 20. BMI Calculator (BMI计算器) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon purple">📐</div>
                                BMI 计算器
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>身高 (cm)</label>
                            <input type="number" class="kit-input-field" id="bmi-height" placeholder="例如: 175" oninput="calculateBMI()">
                        </div>
                        <div class="kit-input-group">
                            <label>体重 (kg)</label>
                            <input type="number" class="kit-input-field" id="bmi-weight" placeholder="例如: 70" oninput="calculateBMI()">
                        </div>
                        <div class="kit-bmi-display">
                            <div class="kit-bmi-gauge">
                                <div class="kit-bmi-scale">
                                    <div class="kit-bmi-zone underweight">偏瘦</div>
                                    <div class="kit-bmi-zone normal">正常</div>
                                    <div class="kit-bmi-zone overweight">偏胖</div>
                                    <div class="kit-bmi-zone obese">肥胖</div>
                                </div>
                                <div class="kit-bmi-pointer" id="bmi-pointer"></div>
                            </div>
                            <div class="kit-bmi-value">
                                <span class="kit-bmi-number" id="bmi-value">--</span>
                                <span class="kit-bmi-status" id="bmi-status">输入身高体重计算</span>
                            </div>
                        </div>
                        <div class="kit-result-box" id="bmi-results" style="display: none;">
                            <div class="kit-result-item">
                                <span class="kit-result-label">健康体重范围</span>
                                <span class="kit-result-value success" id="bmi-healthy-range">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">建议</span>
                                <span class="kit-result-value" id="bmi-suggestion">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 21. Scientific Calculator (科学计算器) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon cyan">🔬</div>
                                科学计算器
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-calc-display">
                            <div class="kit-calc-history" id="calc-history"></div>
                            <input type="text" class="kit-calc-input" id="calc-input" placeholder="0" readonly>
                        </div>
                        <div class="kit-calc-buttons">
                            <button class="kit-calc-btn func" onclick="calcFunc('sin')">sin</button>
                            <button class="kit-calc-btn func" onclick="calcFunc('cos')">cos</button>
                            <button class="kit-calc-btn func" onclick="calcFunc('tan')">tan</button>
                            <button class="kit-calc-btn func" onclick="calcInput('Math.PI')">π</button>
                            <button class="kit-calc-btn func" onclick="calcFunc('log10')">log</button>
                            <button class="kit-calc-btn func" onclick="calcFunc('log')">ln</button>
                            <button class="kit-calc-btn func" onclick="calcFunc('sqrt')">√</button>
                            <button class="kit-calc-btn func" onclick="calcInput('Math.E')">e</button>
                            <button class="kit-calc-btn op" onclick="calcInput('**2')">x²</button>
                            <button class="kit-calc-btn op" onclick="calcInput('**')">xⁿ</button>
                            <button class="kit-calc-btn op" onclick="calcInput('(')">(</button>
                            <button class="kit-calc-btn op" onclick="calcInput(')')">)</button>
                            <button class="kit-calc-btn num" onclick="calcInput('7')">7</button>
                            <button class="kit-calc-btn num" onclick="calcInput('8')">8</button>
                            <button class="kit-calc-btn num" onclick="calcInput('9')">9</button>
                            <button class="kit-calc-btn op" onclick="calcInput('/')">/</button>
                            <button class="kit-calc-btn num" onclick="calcInput('4')">4</button>
                            <button class="kit-calc-btn num" onclick="calcInput('5')">5</button>
                            <button class="kit-calc-btn num" onclick="calcInput('6')">6</button>
                            <button class="kit-calc-btn op" onclick="calcInput('*')">×</button>
                            <button class="kit-calc-btn num" onclick="calcInput('1')">1</button>
                            <button class="kit-calc-btn num" onclick="calcInput('2')">2</button>
                            <button class="kit-calc-btn num" onclick="calcInput('3')">3</button>
                            <button class="kit-calc-btn op" onclick="calcInput('-')">−</button>
                            <button class="kit-calc-btn num" onclick="calcInput('0')">0</button>
                            <button class="kit-calc-btn num" onclick="calcInput('.')">.</button>
                            <button class="kit-calc-btn clear" onclick="calcClear()">C</button>
                            <button class="kit-calc-btn op" onclick="calcInput('+')">+</button>
                            <button class="kit-calc-btn equal" onclick="calcEqual()">=</button>
                            <button class="kit-calc-btn func" onclick="calcFunc('factorial')">n!</button>
                            <button class="kit-calc-btn func" onclick="calcFunc('abs')">|x|</button>
                            <button class="kit-calc-btn del" onclick="calcDelete()">⌫</button>
                        </div>
                    </div>
                </div>

                <!-- 22. Function Graph Plotter (函数图像绘制) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon purple">📈</div>
                                函数图像绘制
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>函数表达式 f(x) =</label>
                            <input type="text" class="kit-input-field" id="func-expression" placeholder="例如: Math.sin(x), x**2, 2*x+1" value="Math.sin(x)">
                        </div>
                        <div class="kit-input-group">
                            <label>X 轴范围</label>
                            <div class="kit-input-row">
                                <input type="number" class="kit-input-field" id="func-x-min" value="-10" placeholder="最小">
                                <span style="color: var(--text-secondary); padding: 0 0.5rem;">到</span>
                                <input type="number" class="kit-input-field" id="func-x-max" value="10" placeholder="最大">
                            </div>
                        </div>
                        <button class="kit-btn kit-btn-primary" onclick="plotFunction()" style="width: 100%; margin-bottom: 1rem;">绘制图像</button>
                        <div class="kit-graph-container">
                            <canvas id="func-canvas" width="350" height="250"></canvas>
                        </div>
                        <div class="kit-func-presets">
                            <span class="kit-preset-label">快速选择:</span>
                            <button class="kit-preset-btn" onclick="setFuncPreset('Math.sin(x)')">sin(x)</button>
                            <button class="kit-preset-btn" onclick="setFuncPreset('Math.cos(x)')">cos(x)</button>
                            <button class="kit-preset-btn" onclick="setFuncPreset('x**2')">x²</button>
                            <button class="kit-preset-btn" onclick="setFuncPreset('x**3')">x³</button>
                            <button class="kit-preset-btn" onclick="setFuncPreset('1/x')">1/x</button>
                            <button class="kit-preset-btn" onclick="setFuncPreset('Math.exp(x)')">eˣ</button>
                        </div>
                    </div>
                </div>

                <!-- 23. Reference Citation Generator (参考文献格式化) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon orange">📖</div>
                                参考文献格式化
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>文献类型</label>
                            <select class="kit-input-field" id="cite-type" onchange="updateCiteFields()">
                                <option value="journal">期刊文章</option>
                                <option value="book">书籍</option>
                                <option value="website">网页</option>
                                <option value="conference">会议论文</option>
                            </select>
                        </div>
                        <div id="cite-fields">
                            <div class="kit-input-group">
                                <label>作者 (多个用逗号分隔)</label>
                                <input type="text" class="kit-input-field" id="cite-authors" placeholder="张三, 李四">
                            </div>
                            <div class="kit-input-group">
                                <label>年份</label>
                                <input type="text" class="kit-input-field" id="cite-year" placeholder="2024">
                            </div>
                            <div class="kit-input-group">
                                <label>标题</label>
                                <input type="text" class="kit-input-field" id="cite-title" placeholder="文章标题">
                            </div>
                            <div class="kit-input-group" id="cite-journal-group">
                                <label>期刊名称</label>
                                <input type="text" class="kit-input-field" id="cite-journal" placeholder="Nature">
                            </div>
                            <div class="kit-input-group" id="cite-volume-group">
                                <label>卷号/期号/页码</label>
                                <div class="kit-input-row">
                                    <input type="text" class="kit-input-field" id="cite-volume" placeholder="卷号">
                                    <input type="text" class="kit-input-field" id="cite-issue" placeholder="期号">
                                    <input type="text" class="kit-input-field" id="cite-pages" placeholder="页码">
                                </div>
                            </div>
                            <div class="kit-input-group" id="cite-doi-group">
                                <label>DOI (可选)</label>
                                <input type="text" class="kit-input-field" id="cite-doi" placeholder="10.1000/example">
                            </div>
                        </div>
                        <div class="kit-input-group">
                            <label>输出格式</label>
                            <select class="kit-input-field" id="cite-format">
                                <option value="apa">APA (第7版)</option>
                                <option value="mla">MLA (第9版)</option>
                                <option value="chicago">Chicago</option>
                                <option value="gb">GB/T 7714 (中文)</option>
                            </select>
                        </div>
                        <button class="kit-btn kit-btn-primary" onclick="generateCitation()" style="width: 100%; margin-bottom: 1rem;">生成引用</button>
                        <div class="kit-cite-output" id="cite-output">
                            <div style="text-align: center; color: var(--text-secondary); padding: 1rem;">
                                填写信息后生成引用格式
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 24. Wavelength Frequency Converter (波长频率转换) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon green">📡</div>
                                波长频率转换
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-input-group">
                            <label>输入类型</label>
                            <select class="kit-input-field" id="wave-type" onchange="convertWave()">
                                <option value="wavelength">波长 (nm)</option>
                                <option value="frequency">频率 (Hz)</option>
                                <option value="energy">能量 (eV)</option>
                            </select>
                        </div>
                        <div class="kit-input-group">
                            <label>输入数值</label>
                            <input type="number" class="kit-input-field" id="wave-input" placeholder="输入数值" oninput="convertWave()">
                        </div>
                        <div class="kit-wave-spectrum" id="wave-spectrum">
                            <div class="kit-spectrum-bar"></div>
                            <div class="kit-spectrum-pointer" id="spectrum-pointer"></div>
                        </div>
                        <div class="kit-result-box" id="wave-results">
                            <div class="kit-result-item">
                                <span class="kit-result-label">波长 λ</span>
                                <span class="kit-result-value accent" id="wave-lambda">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">频率 f</span>
                                <span class="kit-result-value" id="wave-freq">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">能量 E</span>
                                <span class="kit-result-value" id="wave-energy">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">光谱区域</span>
                                <span class="kit-result-value" id="wave-region">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">可见光颜色</span>
                                <span class="kit-result-value" id="wave-color">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 25. Lucky Color Generator (幸运颜色生成) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon pink">🌈</div>
                                幸运颜色生成
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-lucky-color-display">
                            <div class="kit-lucky-color-circle" id="lucky-color-circle">
                                <span class="kit-lucky-color-emoji">🍀</span>
                            </div>
                            <div class="kit-lucky-color-name" id="lucky-color-name">点击生成今日幸运色</div>
                            <div class="kit-lucky-color-hex" id="lucky-color-hex">#??????</div>
                        </div>
                        <div class="kit-lucky-color-info" id="lucky-color-info" style="display: none;">
                            <div class="kit-result-item">
                                <span class="kit-result-label">颜色寓意</span>
                                <span class="kit-result-value" id="lucky-color-meaning">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">适合场合</span>
                                <span class="kit-result-value" id="lucky-color-occasion">--</span>
                            </div>
                            <div class="kit-result-item">
                                <span class="kit-result-label">搭配建议</span>
                                <span class="kit-result-value" id="lucky-color-match">--</span>
                            </div>
                        </div>
                        <button class="kit-btn kit-btn-primary" onclick="generateLuckyColor()" style="width: 100%; margin-top: 1rem;">
                            🎲 生成幸运颜色
                        </button>
                        <button class="kit-btn" onclick="copyLuckyColor()" style="width: 100%; margin-top: 0.5rem; background: var(--bg-secondary); border: 1px solid var(--border); color: var(--text-primary);">
                            📋 复制颜色代码
                        </button>
                    </div>
                </div>

                <!-- 26. Tarot Card Reader (塔罗牌抽取) -->
                <div class="kit-tool-window">
                    <div class="kit-tool-header">
                        <div class="kit-tool-header-left">
                            <div class="kit-tool-dots">
                                <div class="kit-tool-dot red"></div>
                                <div class="kit-tool-dot yellow"></div>
                                <div class="kit-tool-dot green"></div>
                            </div>
                            <div class="kit-tool-title">
                                <div class="kit-tool-icon purple">🔮</div>
                                塔罗牌占卜
                            </div>
                        </div>
                    </div>
                    <div class="kit-tool-body">
                        <div class="kit-tarot-card-container">
                            <div class="kit-tarot-card" id="tarot-card" onclick="drawTarotCard()">
                                <div class="kit-tarot-front" id="tarot-front">
                                    <span class="kit-tarot-symbol">🌟</span>
                                    <span class="kit-tarot-hint">点击抽牌</span>
                                </div>
                                <div class="kit-tarot-back" id="tarot-back">
                                    <div class="kit-tarot-name" id="tarot-name"></div>
                                    <div class="kit-tarot-emoji" id="tarot-emoji"></div>
                                    <div class="kit-tarot-position" id="tarot-position"></div>
                                </div>
                            </div>
                        </div>
                        <div class="kit-tarot-meaning" id="tarot-meaning" style="display: none;">
                            <div class="kit-tarot-section">
                                <div class="kit-tarot-section-title">牌面含义</div>
                                <div class="kit-tarot-section-content" id="tarot-meaning-text"></div>
                            </div>
                            <div class="kit-tarot-section">
                                <div class="kit-tarot-section-title">💕 爱情</div>
                                <div class="kit-tarot-section-content" id="tarot-love"></div>
                            </div>
                            <div class="kit-tarot-section">
                                <div class="kit-tarot-section-title">💼 事业</div>
                                <div class="kit-tarot-section-content" id="tarot-career"></div>
                            </div>
                            <div class="kit-tarot-section">
                                <div class="kit-tarot-section-title">💡 建议</div>
                                <div class="kit-tarot-section-content" id="tarot-advice"></div>
                            </div>
                        </div>
                        <button class="kit-btn kit-btn-primary" onclick="resetTarot()" style="width: 100%; margin-top: 1rem;">
                            🔄 重新抽牌
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Documentation Page -->
    <div class="page" id="page-docs">
        <div class="docs-layout">
            <aside class="docs-sidebar">
                <div class="docs-nav-section">
                    <h4>Getting Started</h4>
                    <div class="docs-nav-links">
                        <a href="#" class="active" onclick="showDocsSection('quickstart')">Quick Start</a>
                        <a href="#" onclick="showDocsSection('installation')">Installation</a>
                        <a href="#" onclick="showDocsSection('authentication')">Authentication</a>
                    </div>
                </div>
                <div class="docs-nav-section">
                    <h4>API Reference</h4>
                    <div class="docs-nav-links">
                        <a href="#" onclick="showDocsSection('completions')">Completions</a>
                        <a href="#" onclick="showDocsSection('embeddings')">Embeddings</a>
                        <a href="#" onclick="showDocsSection('fine-tuning')">Fine-tuning</a>
                    </div>
                </div>
                <div class="docs-nav-section">
                    <h4>Guides</h4>
                    <div class="docs-nav-links">
                        <a href="#" onclick="showDocsSection('best-practices')">Best Practices</a>
                        <a href="#" onclick="showDocsSection('safety')">Safety Guidelines</a>
                        <a href="#" onclick="showDocsSection('rate-limits')">Rate Limits</a>
                    </div>
                </div>
            </aside>
            <main class="docs-main">
                <h1>Documentation</h1>
                <p>Everything you need to integrate AGI Era into your applications.</p>

                <div class="docs-section" id="docs-quickstart">
                    <h2>Quick Start</h2>
                    <p>Get up and running with AGI Era in minutes. This guide will walk you through making your first API call.</p>
                    
                    <h3 style="font-size: 1.125rem; margin: 1.5rem 0 1rem;">1. Get your API key</h3>
                    <p>Sign up for an account and generate your API key from the dashboard.</p>

                    <h3 style="font-size: 1.125rem; margin: 1.5rem 0 1rem;">2. Install the SDK</h3>
                    <div class="code-block">
                        <code>npm install @agiera/sdk</code>
                    </div>

                    <h3 style="font-size: 1.125rem; margin: 1.5rem 0 1rem;">3. Make your first request</h3>
                    <div class="code-block">
                        <code>import { AGIEra } from '@agiera/sdk';

const client = new AGIEra({
  apiKey: process.env.AGIERA_API_KEY
});

const response = await client.complete({
  model: 'agi-era-v2',
  prompt: 'Explain quantum computing in simple terms',
  maxTokens: 500
});

console.log(response.text);</code>
                    </div>
                </div>

                <div class="docs-section" id="docs-authentication">
                    <h2>Authentication</h2>
                    <p>All API requests require authentication using your API key. Include it in the Authorization header:</p>
                    <div class="code-block">
                        <code>Authorization: Bearer your-api-key-here</code>
                    </div>
                    <p>Keep your API key secure and never expose it in client-side code. Use environment variables or a secrets manager in production.</p>
                </div>

                <div class="docs-section" id="docs-safety">
                    <h2>Safety Guidelines</h2>
                    <p>We're committed to the safe and responsible use of AI. Please follow these guidelines when building with AGI Era:</p>
                    
                    <div style="margin-top: 1.5rem;">
                        <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem;">Content Filtering</h3>
                        <p>All outputs are automatically filtered for harmful content. You can customize sensitivity levels through the API.</p>
                    </div>

                    <div style="margin-top: 1.5rem;">
                        <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem;">Rate Limiting</h3>
                        <p>Implement appropriate rate limits to prevent abuse and ensure fair usage across your user base.</p>
                    </div>

                    <div style="margin-top: 1.5rem;">
                        <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem;">Human Oversight</h3>
                        <p>For high-stakes applications, we recommend implementing human review workflows for AI-generated content.</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 用户资料页 -->
    <div class="page" id="page-profile">
        <section class="hero" style="min-height: auto; padding: 8rem 2rem 4rem;">
            <div class="profile-page">
                <div class="profile-header">
                    <div class="profile-avatar-large" id="profile-avatar">U</div>
                    <div class="profile-info">
                        <h1 id="profile-display-name">Username</h1>
                        <p id="profile-email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="552026302715302d34382539307b363a38">[email&#160;protected]</a></p>
                        <div class="profile-badge unverified" id="profile-verify-badge" onclick="resendVerification()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            Email not verified - Click to resend
                        </div>
                    </div>
                </div>

                <div class="profile-message" id="profile-message"></div>

                <div class="profile-section">
                    <h3>📊 Account Stats</h3>
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="stat-api-calls">0</div>
                            <div class="profile-stat-label">API Calls</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="stat-days">0</div>
                            <div class="profile-stat-label">Days Active</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="stat-plan">Free</div>
                            <div class="profile-stat-label">Current Plan</div>
                        </div>
                    </div>
                </div>

                <div class="profile-section">
                    <h3>👤 Profile Information</h3>
                    <form id="profile-form" onsubmit="updateProfile(event)">
                        <div class="profile-form-group">
                            <label>Username</label>
                            <input type="text" id="profile-username" placeholder="Your display name" required minlength="2" maxlength="20">
                        </div>
                        <div class="profile-form-group">
                            <label>Email</label>
                            <input type="email" id="profile-email-input" disabled>
                        </div>
                        <div class="profile-form-group">
                            <label>Member Since</label>
                            <input type="text" id="profile-created" disabled>
                        </div>
                        <div class="profile-actions">
                            <button type="submit" class="profile-btn profile-btn-primary">Save Changes</button>
                        </div>
                    </form>
                </div>

                <div class="profile-section">
                    <h3>🔒 Security</h3>
                    <div class="profile-form-group">
                        <label>Change Password</label>
                        <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem;">Update your password to keep your account secure</p>
                    </div>
                    <form id="password-form" onsubmit="changePassword(event)">
                        <div class="profile-form-group">
                            <label>Current Password</label>
                            <input type="password" id="current-password" placeholder="Enter current password" required>
                        </div>
                        <div class="profile-form-group">
                            <label>New Password</label>
                            <input type="password" id="new-password" placeholder="Enter new password (min 6 chars)" required minlength="6">
                        </div>
                        <div class="profile-form-group">
                            <label>Confirm New Password</label>
                            <input type="password" id="confirm-password" placeholder="Confirm new password" required minlength="6">
                        </div>
                        <div class="profile-actions">
                            <button type="submit" class="profile-btn profile-btn-secondary">Update Password</button>
                        </div>
                    </form>
                </div>

                <div class="profile-section">
                    <h3>⚠️ Danger Zone</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem;">Once you delete your account, there is no going back. Please be certain.</p>
                    <button class="profile-btn profile-btn-danger" onclick="confirmDeleteAccount()">Delete Account</button>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M15 5L5 15M5 5l10 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            
            <!-- 登录表单 -->
            <div id="login-form-container">
                <h2>Welcome Back</h2>
                <p>Sign in to your AGI Era account</p>
                <form id="login-form" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="login-email" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="login-password" placeholder="Enter your password" required>
                    </div>
                    <div class="forgot-password">
                        <a onclick="showForgotPassword()">Forgot password?</a>
                    </div>
                    <div class="form-error" id="login-error"></div>
                    <button type="submit" class="btn-primary" id="login-btn">
                        <span class="btn-text">Sign In</span>
                        <span class="btn-loading hidden">
                            <svg class="spinner" width="16" height="16" viewBox="0 0 16 16">
                                <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="32" stroke-dashoffset="8"/>
                            </svg>
                        </span>
                        <svg class="btn-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </form>
                <div class="modal-switch">
                    Don't have an account? <a onclick="switchToSignup()">Sign up</a>
                </div>
            </div>

            <!-- 注册表单 -->
            <div id="signup-form-container" class="hidden">
                <h2>Get Started</h2>
                <p>Create your account to access AGI Era</p>
                <form id="signup-form" onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="signup-username" placeholder="Your display name" required minlength="2" maxlength="20">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="signup-email" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="signup-password" placeholder="Create a password (min 6 chars)" required minlength="6">
                    </div>
                    <div class="form-error" id="signup-error"></div>
                    <button type="submit" class="btn-primary" id="signup-btn">
                        <span class="btn-text">Create Account</span>
                        <span class="btn-loading hidden">
                            <svg class="spinner" width="16" height="16" viewBox="0 0 16 16">
                                <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="32" stroke-dashoffset="8"/>
                            </svg>
                        </span>
                        <svg class="btn-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </form>
                <div class="modal-switch">
                    Already have an account? <a onclick="switchToLogin()">Sign in</a>
                </div>
            </div>

            <!-- 忘记密码表单 -->
            <div id="forgot-form-container" class="hidden">
                <h2>Reset Password</h2>
                <p>Enter your email to receive a reset link</p>
                <form id="forgot-form" onsubmit="handleForgotPassword(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="forgot-email" placeholder="you@example.com" required>
                    </div>
                    <div class="form-error" id="forgot-error"></div>
                    <div class="form-success" id="forgot-success" style="display:none; color: var(--accent-green); font-size: 0.875rem; margin-bottom: 1rem;"></div>
                    <button type="submit" class="btn-primary" id="forgot-btn">
                        <span class="btn-text">Send Reset Link</span>
                        <span class="btn-loading hidden">
                            <svg class="spinner" width="16" height="16" viewBox="0 0 16 16">
                                <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="32" stroke-dashoffset="8"/>
                            </svg>
                        </span>
                        <svg class="btn-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </form>
                <div class="modal-switch">
                    Remember your password? <a onclick="switchToLogin()">Sign in</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Visitor Counter Section -->
    <div class="visitor-counter">
        <div class="visitor-counter-inner">
            <div class="visitor-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
            <div class="visitor-info">
                <span class="visitor-label">Total Visitors</span>
                <div class="visitor-count-wrapper">
                    <span class="visitor-count" id="visitor-uv">--</span>
                    <span class="visitor-suffix">people</span>
                    <div class="visitor-live-dot" title="Live"></div>
                </div>
            </div>
            <div class="visitor-divider"></div>
            <div class="visitor-info">
                <span class="visitor-label">Total Views</span>
                <div class="visitor-count-wrapper">
                    <span class="visitor-count" id="visitor-pv">--</span>
                    <span class="visitor-suffix">views</span>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#">Privacy</a>
                <a href="#">Terms</a>
                <a href="#">Security</a>
                <a href="#">Status</a>
                <a href="#">Careers</a>
                <a href="#">Blog</a>
            </div>
            <p class="footer-copy">© 2025 AGI Era. All rights reserved.</p>
        </div>
    </footer>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // ==================== API 配置 ====================
        const API_BASE = 'https://api.agiera.net';

        // ==================== AI 选择器配置 ====================
        const AI_MODELS = {
            qwen: {
                name: 'Qwen',
                icon: '🤖',
                desc: '通义千问 · 阿里云',
                endpoint: '/api/chat'
            },
            deepseek: {
                name: 'DeepSeek',
                icon: '🔮',
                desc: '深度求索 · DeepSeek',
                endpoint: '/api/chat/deepseek'
            }
        };

        // 当前选中的 AI（首页和 ChatBot 分别存储）
        let selectedAI = {
            demo: 'qwen',
            chatbot: 'qwen'
        };

        // 切换 AI 选择器下拉菜单
        function toggleAISelector(target) {
            const selector = document.getElementById(`${target}-ai-selector`);
            selector.classList.toggle('open');
            
            // 点击外部关闭
            const closeHandler = (e) => {
                if (!selector.contains(e.target)) {
                    selector.classList.remove('open');
                    document.removeEventListener('click', closeHandler);
                }
            };
            
            setTimeout(() => {
                document.addEventListener('click', closeHandler);
            }, 0);
        }

        // 选择 AI
        function selectAI(target, aiKey) {
            const model = AI_MODELS[aiKey];
            if (!model) return;
            
            selectedAI[target] = aiKey;
            
            // 更新按钮显示
            document.getElementById(`${target}-ai-icon`).textContent = model.icon;
            document.getElementById(`${target}-ai-name`).textContent = model.name;
            
            // 更新选中状态
            const dropdown = document.getElementById(`${target}-ai-dropdown`);
            dropdown.querySelectorAll('.ai-option').forEach(option => {
                option.classList.remove('active');
                if (option.dataset.ai === aiKey) {
                    option.classList.add('active');
                }
            });
            
            // 关闭下拉菜单
            document.getElementById(`${target}-ai-selector`).classList.remove('open');
            
            // 显示切换提示
            showToast(`已切换到 ${model.name}`);
        }

        // ==================== 访客统计功能 ====================
        async function initVisitorCounter() {
            const uvEl = document.getElementById('visitor-uv');
            const pvEl = document.getElementById('visitor-pv');
            
            if (!uvEl || !pvEl) return;

            try {
                // 记录访问并获取统计数据
                const response = await fetch(`${API_BASE}/stats/visit`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        page: window.location.pathname,
                        referrer: document.referrer || null,
                        userAgent: navigator.userAgent
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    // 动画显示数字
                    animateCounter(uvEl, data.uv || 0);
                    animateCounter(pvEl, data.pv || 0);
                } else {
                    // 如果POST失败，尝试GET获取统计
                    await fetchVisitorStats();
                }
            } catch (error) {
                console.error('Failed to record visit:', error);
                // 尝试只获取统计数据
                await fetchVisitorStats();
            }
        }

        async function fetchVisitorStats() {
            const uvEl = document.getElementById('visitor-uv');
            const pvEl = document.getElementById('visitor-pv');
            
            try {
                const response = await fetch(`${API_BASE}/stats/visitor`);
                if (response.ok) {
                    const data = await response.json();
                    animateCounter(uvEl, data.uv || 0);
                    animateCounter(pvEl, data.pv || 0);
                } else {
                    uvEl.textContent = '--';
                    pvEl.textContent = '--';
                }
            } catch (error) {
                console.error('Failed to fetch visitor stats:', error);
                uvEl.textContent = '--';
                pvEl.textContent = '--';
            }
        }

        function animateCounter(element, target) {
            if (!element || target === 0) {
                if (element) element.textContent = target.toLocaleString();
                return;
            }

            const duration = 1500;
            const start = Math.max(0, target - Math.min(100, Math.floor(target * 0.1)));
            const startTime = performance.now();

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // easeOutExpo 缓动函数
                const easeProgress = 1 - Math.pow(1 - progress, 4);
                const current = Math.floor(start + (target - start) * easeProgress);
                
                element.textContent = current.toLocaleString();

                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    element.textContent = target.toLocaleString();
                }
            }

            requestAnimationFrame(update);
        }

        // 页面加载时初始化访客计数器
        document.addEventListener('DOMContentLoaded', initVisitorCounter);

        // ==================== IP检测功能 ====================
        async function detectIP() {
            const ipEl = document.getElementById('ip-address');
            const refreshBtn = document.getElementById('ip-refresh-btn');
            
            if (!ipEl) return;
            
            ipEl.textContent = 'Detecting...';
            ipEl.classList.add('loading');
            if (refreshBtn) refreshBtn.classList.add('loading');

            // 多个备用 API
            const apis = [
                {
                    url: 'https://ipapi.co/json/',
                    parse: (data) => ({
                        ip: data.ip,
                        country: data.country_name,
                        country_code: data.country_code,
                        region: data.region,
                        city: data.city,
                        isp: data.org,
                        timezone: data.timezone,
                        lat: data.latitude,
                        lon: data.longitude
                    })
                },
                {
                    url: 'https://ipwho.is/',
                    parse: (data) => ({
                        ip: data.ip,
                        country: data.country,
                        country_code: data.country_code,
                        region: data.region,
                        city: data.city,
                        isp: data.connection?.isp || data.org,
                        timezone: data.timezone?.id,
                        lat: data.latitude,
                        lon: data.longitude
                    })
                },
                {
                    url: 'https://api.ipify.org?format=json',
                    parse: (data) => ({
                        ip: data.ip,
                        country: null,
                        country_code: null,
                        region: null,
                        city: null,
                        isp: null,
                        timezone: null,
                        lat: null,
                        lon: null
                    })
                }
            ];

            let lastError = null;

            for (const api of apis) {
                try {
                    console.log('Trying IP API:', api.url);
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000);
                    
                    const response = await fetch(api.url, { 
                        signal: controller.signal,
                        headers: { 'Accept': 'application/json' }
                    });
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    const rawData = await response.json();
                    const data = api.parse(rawData);
                    
                    if (!data.ip) {
                        throw new Error('No IP in response');
                    }
                    
                    console.log('IP detection successful:', data.ip);
                    
                    ipEl.textContent = data.ip;
                    ipEl.classList.remove('loading');
                    
                    // 处理国家显示：台湾、香港、澳门显示为中国
                    let countryName = data.country || '--';
                    const chinaRegions = ['TW', 'HK', 'MO'];
                    if (chinaRegions.includes(data.country_code)) {
                        countryName = 'China';
                    }
                    
                    // 处理地区显示
                    let regionName = data.region || '--';
                    if (data.country_code === 'TW') {
                        regionName = 'Taiwan, ' + regionName;
                    } else if (data.country_code === 'HK') {
                        regionName = 'Hong Kong SAR';
                    } else if (data.country_code === 'MO') {
                        regionName = 'Macao SAR';
                    }
                    
                    document.getElementById('ip-country').textContent = countryName;
                    document.getElementById('ip-region').textContent = regionName;
                    document.getElementById('ip-city').textContent = data.city || '--';
                    document.getElementById('ip-isp').textContent = data.isp || '--';
                    document.getElementById('ip-timezone').textContent = data.timezone || '--';
                    document.getElementById('ip-coords').textContent = 
                        data.lat && data.lon ? `${data.lat}, ${data.lon}` : '--';
                    
                    if (refreshBtn) refreshBtn.classList.remove('loading');
                    return; // 成功，退出函数
                    
                } catch (error) {
                    console.warn('IP API failed:', api.url, error.message);
                    lastError = error;
                    // 继续尝试下一个 API
                }
            }
            
            // 所有 API 都失败了
            console.error('All IP detection APIs failed:', lastError);
            ipEl.textContent = 'Unable to detect';
            ipEl.classList.remove('loading');
            if (refreshBtn) refreshBtn.classList.remove('loading');
        }

        // ==================== ChatBot功能 ====================
        let isChatWaiting = false;

        function handleChatKeypress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendChatMessage();
            }
        }

        async function sendChatMessage() {
            // 检查是否已登录
            if (!currentUser) {
                showToast('请先登录后使用 AI 助手');
                openModal('login');
                return;
            }
            
            const input = document.getElementById('chatbot-input');
            const sendBtn = document.getElementById('chatbot-send-btn');
            const messagesContainer = document.getElementById('chatbot-messages');
            const message = input.value.trim();
            
            if (!message || isChatWaiting) return;
            
            isChatWaiting = true;
            sendBtn.disabled = true;
            input.value = '';
            
            // 获取当前选中的 AI
            const currentAI = AI_MODELS[selectedAI.chatbot];
            const aiIcon = currentAI.icon;
            
            // 添加用户消息
            addChatMessage(message, 'user');
            
            // 添加加载动画
            const typingEl = document.createElement('div');
            typingEl.className = 'chatbot-message';
            typingEl.id = 'typing-indicator';
            const cube3DTyping = `<div class="cb-face cb-face-front"></div><div class="cb-face cb-face-top"></div><div class="cb-face cb-face-right"></div>`;
            typingEl.innerHTML = `
                <div class="chatbot-avatar">${cube3DTyping}</div>
                <div class="chatbot-bubble">
                    <div class="chatbot-typing">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingEl);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            try {
                const response = await fetch(`${API_BASE}${currentAI.endpoint}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message })
                });
                
                const data = await response.json();
                
                document.getElementById('typing-indicator')?.remove();
                
                if (data.success) {
                    const cube3DReply = `<div class="cb-face cb-face-front"></div><div class="cb-face cb-face-top"></div><div class="cb-face cb-face-right"></div>`;
                    addChatMessageWithIcon(data.reply, 'bot', cube3DReply);
                } else {
                    const cube3DError = `<div class="cb-face cb-face-front"></div><div class="cb-face cb-face-top"></div><div class="cb-face cb-face-right"></div>`;
                    addChatMessageWithIcon('Sorry, I encountered an error. Please try again.', 'bot', cube3DError);
                }
            } catch (error) {
                console.error('Chat error:', error);
                document.getElementById('typing-indicator')?.remove();
                const cube3DNet = `<div class="cb-face cb-face-front"></div><div class="cb-face cb-face-top"></div><div class="cb-face cb-face-right"></div>`;
                addChatMessageWithIcon('Network error. Please check your connection and try again.', 'bot', cube3DNet);
            } finally {
                isChatWaiting = false;
                sendBtn.disabled = false;
                input.focus();
            }
        }

        function addChatMessage(text, type) {
            const cube3D = `<div class="cb-face cb-face-front"></div><div class="cb-face cb-face-top"></div><div class="cb-face cb-face-right"></div>`;
            addChatMessageWithIcon(text, type, cube3D);
        }

        function addChatMessageWithIcon(text, type, icon) {
            const messagesContainer = document.getElementById('chatbot-messages');
            const messageEl = document.createElement('div');
            messageEl.className = `chatbot-message ${type === 'user' ? 'user' : ''}`;
            
            const avatar = type === 'user' ? 'U' : icon;
            messageEl.innerHTML = `
                <div class="chatbot-avatar">${avatar}</div>
                <div class="chatbot-bubble">
                    <p>${escapeHtml(text)}</p>
                </div>
            `;
            
            messagesContainer.appendChild(messageEl);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // 全局 Turnstile 验证
        let globalVerified = false;
        let welcomeShown = false;

        // 安全的 Storage 操作（兼容隐私模式和跟踪防护）
        function safeStorageSet(key, value) {
            try {
                sessionStorage.setItem(key, value);
            } catch (e) {
                console.warn('Storage blocked, using memory only:', e);
            }
        }

        function safeStorageGet(key) {
            try {
                return sessionStorage.getItem(key);
            } catch (e) {
                console.warn('Storage blocked:', e);
                return null;
            }
        }

        /* 人机验证功能暂时禁用
        function onGlobalTurnstileSuccess(token) {
            console.log('Global Turnstile verification successful, token received');
            globalVerified = true;
            
            // 隐藏验证遮罩
            const overlay = document.getElementById('turnstile-overlay');
            if (overlay) {
                overlay.classList.add('hidden');
                console.log('Turnstile overlay hidden');
            } else {
                console.error('turnstile-overlay element not found!');
            }
            
            // 显示欢迎弹窗
            setTimeout(() => {
                const welcomeOverlay = document.getElementById('welcome-overlay');
                if (welcomeOverlay) {
                    welcomeOverlay.classList.add('active');
                }
            }, 300);
            
            // 存储验证状态（安全方式）
            safeStorageSet('turnstile-verified', 'true');
        }

        function onGlobalTurnstileError(error) {
            console.error('Global Turnstile error:', error);
            const loadingEl = document.getElementById('turnstile-loading');
            if (loadingEl) {
                loadingEl.textContent = '验证加载失败，请刷新页面重试';
            }
        }
        */

        function closeWelcome() {
            const welcomeOverlay = document.getElementById('welcome-overlay');
            if (welcomeOverlay) {
                welcomeOverlay.classList.remove('active');
                welcomeOverlay.classList.add('hidden');
            }
            welcomeShown = true;
            safeStorageSet('welcome-shown', 'true');
        }

        // 检查是否已验证（同一会话内）- 人机验证暂时禁用
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            
            // 检查登录状态
            checkAuthStatus();
            
            // 直接隐藏人机验证遮罩
            const turnstileOverlay = document.getElementById('turnstile-overlay');
            if (turnstileOverlay) {
                turnstileOverlay.classList.add('hidden');
            }
            globalVerified = true;
            
            const wasWelcomeShown = safeStorageGet('welcome-shown') === 'true';
            
            // 如果未显示过欢迎弹窗，显示它
            if (!wasWelcomeShown) {
                setTimeout(() => {
                    const welcomeOverlay = document.getElementById('welcome-overlay');
                    if (welcomeOverlay) {
                        welcomeOverlay.classList.add('active');
                    }
                }, 300);
            }
            
            // 隐藏加载提示
            setTimeout(() => {
                const loadingEl = document.getElementById('turnstile-loading');
                if (loadingEl) {
                    loadingEl.classList.add('hidden');
                }
            }, 1000);
        });

        // Turnstile 状态
        let turnstileToken = null;

        // Turnstile 回调函数
        function onTurnstileSuccess(token) {
            turnstileToken = token;
            document.getElementById('turnstile-error').style.display = 'none';
            console.log('Turnstile verification successful');
        }

        function onTurnstileExpired() {
            turnstileToken = null;
            console.log('Turnstile token expired');
        }

        function onTurnstileError() {
            turnstileToken = null;
            document.getElementById('turnstile-error').textContent = '验证加载失败，请刷新页面重试';
            document.getElementById('turnstile-error').style.display = 'block';
            console.log('Turnstile error');
        }

        // Page Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            const targetPage = document.getElementById(`page-${pageId}`);
            if (targetPage) {
                targetPage.classList.add('active');
            }
            
            // Update nav links
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.page === pageId) {
                    link.classList.add('active');
                }
            });
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Generate neural network nodes for about page
            if (pageId === 'about') {
                generateNeuralNetwork();
            }
            
            // Load profile page data
            if (pageId === 'profile') {
                loadProfilePage();
            }
            
            // Detect IP for kit page
            if (pageId === 'kit') {
                detectIP();
            }
        }

        // Modal functions
        function openModal(type = 'login') {
            document.getElementById('modal').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // 显示对应的表单
            if (type === 'signup') {
                document.getElementById('login-form-container').classList.add('hidden');
                document.getElementById('signup-form-container').classList.remove('hidden');
            } else {
                document.getElementById('login-form-container').classList.remove('hidden');
                document.getElementById('signup-form-container').classList.add('hidden');
            }
            
            // 清除错误信息
            document.getElementById('login-error').classList.remove('show');
            document.getElementById('signup-error').classList.remove('show');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
            document.body.style.overflow = '';
            // 清除表单
            document.getElementById('login-form').reset();
            document.getElementById('signup-form').reset();
        }

        function switchToSignup() {
            document.getElementById('login-form-container').classList.add('hidden');
            document.getElementById('signup-form-container').classList.remove('hidden');
            document.getElementById('forgot-form-container').classList.add('hidden');
            document.getElementById('login-error').classList.remove('show');
        }

        function switchToLogin() {
            document.getElementById('signup-form-container').classList.add('hidden');
            document.getElementById('forgot-form-container').classList.add('hidden');
            document.getElementById('login-form-container').classList.remove('hidden');
            document.getElementById('signup-error').classList.remove('show');
        }

        function showForgotPassword() {
            document.getElementById('login-form-container').classList.add('hidden');
            document.getElementById('signup-form-container').classList.add('hidden');
            document.getElementById('forgot-form-container').classList.remove('hidden');
        }

        // 忘记密码处理
        async function handleForgotPassword(e) {
            e.preventDefault();
            
            const btn = document.getElementById('forgot-btn');
            const errorEl = document.getElementById('forgot-error');
            const successEl = document.getElementById('forgot-success');
            const email = document.getElementById('forgot-email').value;

            btn.classList.add('loading');
            btn.disabled = true;
            errorEl.classList.remove('show');
            successEl.style.display = 'none';

            try {
                const response = await fetch('/api/forgot-password', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });

                const data = await response.json();

                if (data.success) {
                    successEl.textContent = 'Password reset link sent! Check your email.';
                    successEl.style.display = 'block';
                    document.getElementById('forgot-form').reset();
                } else {
                    errorEl.textContent = data.message || 'Failed to send reset email';
                    errorEl.classList.add('show');
                }
            } catch (error) {
                console.error('Forgot password error:', error);
                errorEl.textContent = 'Network error, please try again';
                errorEl.classList.add('show');
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        }

        // 用户状态管理
        let currentUser = null;

        function updateUserUI() {
            const guestNav = document.getElementById('nav-auth-guest');
            const userNav = document.getElementById('nav-auth-user');
            const chatbotLoginOverlay = document.getElementById('chatbot-login-overlay');
            
            if (currentUser) {
                guestNav.classList.add('hidden');
                userNav.classList.remove('hidden');
                
                // 更新用户信息显示
                const initial = currentUser.username.charAt(0).toUpperCase();
                document.getElementById('user-avatar').textContent = initial;
                document.getElementById('user-name').textContent = currentUser.username;
                document.getElementById('dropdown-name').textContent = currentUser.username;
                document.getElementById('dropdown-email').textContent = currentUser.email;
                
                // 隐藏 ChatBot 登录遮罩
                if (chatbotLoginOverlay) {
                    chatbotLoginOverlay.classList.add('hidden');
                }
            } else {
                guestNav.classList.remove('hidden');
                userNav.classList.add('hidden');
                
                // 显示 ChatBot 登录遮罩
                if (chatbotLoginOverlay) {
                    chatbotLoginOverlay.classList.remove('hidden');
                }
            }
        }

        function toggleUserMenu() {
            const menu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('user-dropdown');
            menu.classList.toggle('active');
            dropdown.classList.toggle('active');
        }

        // 点击外部关闭用户菜单
        document.addEventListener('click', function(e) {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('user-dropdown');
            if (userMenu && !userMenu.contains(e.target)) {
                userMenu.classList.remove('active');
                dropdown.classList.remove('active');
            }
        });

        // 登录处理
        async function handleLogin(e) {
            e.preventDefault();
            
            const btn = document.getElementById('login-btn');
            const errorEl = document.getElementById('login-error');
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            // 显示 loading
            btn.classList.add('loading');
            btn.disabled = true;
            errorEl.classList.remove('show');

            try {
                const response = await fetch(`${API_BASE}/api/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (data.success) {
                    // 保存 token 和用户信息
                    localStorage.setItem('auth-token', data.token);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    currentUser = data.user;
                    
                    updateUserUI();
                    closeModal();
                    
                    // 显示欢迎提示
                    showToast(`Welcome back, ${data.user.username}!`);
                } else {
                    errorEl.textContent = data.message || '登录失败';
                    errorEl.classList.add('show');
                }
            } catch (error) {
                console.error('Login error:', error);
                errorEl.textContent = '网络错误，请稍后重试';
                errorEl.classList.add('show');
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        }

        // 注册处理
        async function handleSignup(e) {
            e.preventDefault();
            
            const btn = document.getElementById('signup-btn');
            const errorEl = document.getElementById('signup-error');
            const username = document.getElementById('signup-username').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;

            // 显示 loading
            btn.classList.add('loading');
            btn.disabled = true;
            errorEl.classList.remove('show');

            try {
                const response = await fetch(`${API_BASE}/api/signup`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, email, password })
                });

                const data = await response.json();

                if (data.success) {
                    // 保存 token 和用户信息
                    localStorage.setItem('auth-token', data.token);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    currentUser = data.user;
                    
                    updateUserUI();
                    closeModal();
                    
                    // 显示庆祝动画
                    showCelebration(data.user.username);
                } else {
                    errorEl.textContent = data.message || '注册失败';
                    errorEl.classList.add('show');
                }
            } catch (error) {
                console.error('Signup error:', error);
                errorEl.textContent = '网络错误，请稍后重试';
                errorEl.classList.add('show');
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        }

        // 登出
        function logout() {
            localStorage.removeItem('auth-token');
            localStorage.removeItem('user');
            currentUser = null;
            updateUserUI();
            toggleUserMenu();
            showPage('home');
            showToast('You have been logged out');
        }

        // ==================== 用户资料页功能 ====================
        function loadProfilePage() {
            if (!currentUser) return;
            
            // 设置头像
            const initial = currentUser.username.charAt(0).toUpperCase();
            document.getElementById('profile-avatar').textContent = initial;
            
            // 设置基本信息
            document.getElementById('profile-display-name').textContent = currentUser.username;
            document.getElementById('profile-email').textContent = currentUser.email;
            document.getElementById('profile-username').value = currentUser.username;
            document.getElementById('profile-email-input').value = currentUser.email;
            
            // 设置创建日期
            if (currentUser.createdAt) {
                const date = new Date(currentUser.createdAt);
                document.getElementById('profile-created').value = date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            } else {
                document.getElementById('profile-created').value = 'N/A';
            }
            
            // 计算活跃天数
            if (currentUser.createdAt) {
                const created = new Date(currentUser.createdAt);
                const now = new Date();
                const days = Math.floor((now - created) / (1000 * 60 * 60 * 24));
                document.getElementById('stat-days').textContent = days;
            }
            
            // 设置邮箱验证状态
            const badge = document.getElementById('profile-verify-badge');
            if (currentUser.emailVerified) {
                badge.className = 'profile-badge verified';
                badge.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg> Email verified';
                badge.onclick = null;
            } else {
                badge.className = 'profile-badge unverified';
                badge.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> Email not verified - Click to resend';
                badge.onclick = resendVerification;
            }
        }

        async function updateProfile(e) {
            e.preventDefault();
            
            const username = document.getElementById('profile-username').value;
            const messageEl = document.getElementById('profile-message');
            
            try {
                const token = localStorage.getItem('auth-token');
                const response = await fetch('/api/user/update', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ username })
                });

                const data = await response.json();

                if (data.success) {
                    currentUser.username = username;
                    localStorage.setItem('user', JSON.stringify(currentUser));
                    updateUserUI();
                    loadProfilePage();
                    
                    messageEl.className = 'profile-message success';
                    messageEl.textContent = 'Profile updated successfully!';
                } else {
                    messageEl.className = 'profile-message error';
                    messageEl.textContent = data.message || 'Failed to update profile';
                }
            } catch (error) {
                console.error('Update profile error:', error);
                messageEl.className = 'profile-message error';
                messageEl.textContent = 'Network error, please try again';
            }
            
            setTimeout(() => {
                messageEl.className = 'profile-message';
            }, 5000);
        }

        async function changePassword(e) {
            e.preventDefault();
            
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            const messageEl = document.getElementById('profile-message');
            
            if (newPassword !== confirmPassword) {
                messageEl.className = 'profile-message error';
                messageEl.textContent = 'New passwords do not match';
                return;
            }
            
            try {
                const token = localStorage.getItem('auth-token');
                const response = await fetch('/api/user/change-password', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ currentPassword, newPassword })
                });

                const data = await response.json();

                if (data.success) {
                    document.getElementById('password-form').reset();
                    messageEl.className = 'profile-message success';
                    messageEl.textContent = 'Password changed successfully!';
                } else {
                    messageEl.className = 'profile-message error';
                    messageEl.textContent = data.message || 'Failed to change password';
                }
            } catch (error) {
                console.error('Change password error:', error);
                messageEl.className = 'profile-message error';
                messageEl.textContent = 'Network error, please try again';
            }
            
            setTimeout(() => {
                messageEl.className = 'profile-message';
            }, 5000);
        }

        async function resendVerification() {
            const messageEl = document.getElementById('profile-message');
            
            try {
                const token = localStorage.getItem('auth-token');
                const response = await fetch('/api/user/resend-verification', {
                    method: 'POST',
                    headers: {
                        'Authorization': 'Bearer ' + token
                    }
                });

                const data = await response.json();

                if (data.success) {
                    messageEl.className = 'profile-message success';
                    messageEl.textContent = 'Verification email sent! Check your inbox.';
                } else {
                    messageEl.className = 'profile-message error';
                    messageEl.textContent = data.message || 'Failed to send verification email';
                }
            } catch (error) {
                console.error('Resend verification error:', error);
                messageEl.className = 'profile-message error';
                messageEl.textContent = 'Network error, please try again';
            }
            
            setTimeout(() => {
                messageEl.className = 'profile-message';
            }, 5000);
        }

        function confirmDeleteAccount() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                deleteAccount();
            }
        }

        async function deleteAccount() {
            try {
                const token = localStorage.getItem('auth-token');
                const response = await fetch('/api/user/delete', {
                    method: 'DELETE',
                    headers: {
                        'Authorization': 'Bearer ' + token
                    }
                });

                const data = await response.json();

                if (data.success) {
                    localStorage.removeItem('auth-token');
                    localStorage.removeItem('user');
                    currentUser = null;
                    updateUserUI();
                    showPage('home');
                    showToast('Your account has been deleted');
                } else {
                    showToast(data.message || 'Failed to delete account');
                }
            } catch (error) {
                console.error('Delete account error:', error);
                showToast('Network error, please try again');
            }
        }

        // ==================== 注册成功庆祝动画 ====================
        function showCelebration(username) {
            const overlay = document.getElementById('celebration-overlay');
            const usernameEl = document.getElementById('celebration-username');
            const skipBtn = document.getElementById('celebration-skip');
            
            // 设置用户名
            usernameEl.textContent = username;
            
            // 显示遮罩
            overlay.classList.add('active');
            
            // 生成粒子效果
            createParticles();
            
            // 生成神经网络背景
            createNeuralBackground();
            
            // 生成闪光效果
            createSparkles();
            
            // 5秒后按钮变为"开始探索"
            setTimeout(() => {
                skipBtn.textContent = '开始探索';
                skipBtn.classList.add('ready');
            }, 5000);
        }

        function closeCelebration() {
            const overlay = document.getElementById('celebration-overlay');
            overlay.classList.remove('active');
            
            // 清理粒子和神经网络
            document.getElementById('particles-container').innerHTML = '';
            document.getElementById('celebration-neural').innerHTML = '';
            
            // 重置按钮状态
            const skipBtn = document.getElementById('celebration-skip');
            skipBtn.textContent = '跳过';
            skipBtn.classList.remove('ready');
            
            // 显示欢迎toast
            setTimeout(() => {
                showToast('Welcome to AGI Era!');
            }, 300);
        }

        function createParticles() {
            const container = document.getElementById('particles-container');
            const colors = ['#00d4ff', '#8b5cf6', '#10b981', '#f59e0b', '#ec4899'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    
                    const size = Math.random() * 10 + 5;
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    
                    particle.style.width = size + 'px';
                    particle.style.height = size + 'px';
                    particle.style.background = color;
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.bottom = '-20px';
                    particle.style.animationDuration = (Math.random() * 2 + 3) + 's';
                    particle.style.animationDelay = (Math.random() * 0.5) + 's';
                    
                    container.appendChild(particle);
                    
                    // 移除粒子
                    setTimeout(function() { particle.remove(); }, 5000);
                }, i * 100);
            }
        }

        function createNeuralBackground() {
            const container = document.getElementById('celebration-neural');
            
            // 创建流动线条
            for (let i = 0; i < 8; i++) {
                const line = document.createElement('div');
                line.className = 'neural-line';
                line.style.top = (10 + i * 12) + '%';
                line.style.width = (Math.random() * 200 + 100) + 'px';
                line.style.animationDelay = (i * 0.3) + 's';
                line.style.animationDuration = (Math.random() * 2 + 2) + 's';
                container.appendChild(line);
            }
            
            // 创建脉冲点
            for (let i = 0; i < 20; i++) {
                const dot = document.createElement('div');
                dot.className = 'neural-dot';
                dot.style.left = Math.random() * 100 + '%';
                dot.style.top = Math.random() * 100 + '%';
                dot.style.animationDelay = (Math.random() * 2) + 's';
                container.appendChild(dot);
            }
        }

        function createSparkles() {
            const container = document.getElementById('celebration-overlay');
            
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'celebration-sparkle';
                    sparkle.style.left = Math.random() * 100 + '%';
                    sparkle.style.top = Math.random() * 100 + '%';
                    sparkle.style.animationDelay = (Math.random() * 0.5) + 's';
                    
                    container.appendChild(sparkle);
                    
                    setTimeout(function() { sparkle.remove(); }, 1500);
                }, i * 150);
            }
        }

        // Toast 提示
        function showToast(message) {
            // 移除已有的 toast
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }

            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => toast.classList.add('show'), 10);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // 检查登录状态
        function checkAuthStatus() {
            const token = localStorage.getItem('auth-token');
            const userStr = localStorage.getItem('user');
            
            if (token && userStr) {
                try {
                    currentUser = JSON.parse(userStr);
                    updateUserUI();
                } catch (e) {
                    localStorage.removeItem('auth-token');
                    localStorage.removeItem('user');
                }
            }
        }

        // Close modal on overlay click
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Demo chat - 使用真实 API
        let isDemoWaiting = false;

        async function sendDemoMessage() {
            const input = document.getElementById('demo-input-field');
            const sendBtn = input.nextElementSibling;
            const chat = document.getElementById('demo-chat');
            const message = input.value.trim();
            
            if (!message || isDemoWaiting) return;
            
            isDemoWaiting = true;
            sendBtn.disabled = true;
            input.value = '';
            
            // 获取当前选中的 AI
            const currentAI = AI_MODELS[selectedAI.demo];
            const aiIcon = currentAI.icon;
            
            // Add user message
            chat.innerHTML += `
                <div class="chat-message">
                    <div class="chat-avatar user">U</div>
                    <div class="chat-bubble">
                        <p>${escapeHtml(message)}</p>
                    </div>
                </div>
            `;
            chat.scrollTop = chat.scrollHeight;
            
            // 3D cube avatar HTML
            const cube3D = `<div class="c-face c-face-front"></div><div class="c-face c-face-top"></div><div class="c-face c-face-right"></div>`;
            
            // Add typing indicator
            const typingId = 'demo-typing-' + Date.now();
            chat.innerHTML += `
                <div class="chat-message" id="${typingId}">
                    <div class="chat-avatar">${cube3D}</div>
                    <div class="chat-bubble">
                        <div class="chatbot-typing">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            `;
            chat.scrollTop = chat.scrollHeight;
            
            try {
                const response = await fetch(`${API_BASE}${currentAI.endpoint}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message })
                });
                
                const data = await response.json();
                
                // Remove typing indicator
                document.getElementById(typingId)?.remove();
                
                if (data.success) {
                    chat.innerHTML += `
                        <div class="chat-message">
                            <div class="chat-avatar">${cube3D}</div>
                            <div class="chat-bubble">
                                <p>${escapeHtml(data.reply)}</p>
                            </div>
                        </div>
                    `;
                } else {
                    chat.innerHTML += `
                        <div class="chat-message">
                            <div class="chat-avatar">${cube3D}</div>
                            <div class="chat-bubble">
                                <p>Sorry, I encountered an error. Please try again.</p>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Demo chat error:', error);
                document.getElementById(typingId)?.remove();
                chat.innerHTML += `
                    <div class="chat-message">
                        <div class="chat-avatar">${cube3D}</div>
                        <div class="chat-bubble">
                            <p>Network error. Please check your connection and try again.</p>
                        </div>
                    </div>
                `;
            } finally {
                isDemoWaiting = false;
                sendBtn.disabled = false;
                chat.scrollTop = chat.scrollHeight;
                input.focus();
            }
        }

        function handleDemoInput(e) {
            if (e.key === 'Enter') {
                sendDemoMessage();
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Generate neural network visualization
        function generateNeuralNetwork() {
            const container = document.getElementById('neural-network');
            if (!container) return;
            
            container.innerHTML = '';
            
            const nodeCount = 30;
            for (let i = 0; i < nodeCount; i++) {
                const node = document.createElement('div');
                node.className = 'node';
                node.style.left = `${10 + Math.random() * 80}%`;
                node.style.top = `${10 + Math.random() * 80}%`;
                node.style.animationDelay = `${Math.random() * 3}s`;
                node.style.opacity = `${0.3 + Math.random() * 0.7}`;
                node.style.width = `${8 + Math.random() * 12}px`;
                node.style.height = node.style.width;
                container.appendChild(node);
            }
        }

        // Smooth reveal on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Initialize animations
        function initAnimations() {
            document.querySelectorAll('.feature-card, .stat-item, .paper-card, .value-card, .team-card, .timeline-item').forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                el.style.transitionDelay = `${index * 0.05}s`;
                observer.observe(el);
            });
        }

        // Docs section navigation
        function showDocsSection(sectionId) {
            document.querySelectorAll('.docs-nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Scroll to section
            const section = document.getElementById(`docs-${sectionId}`);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // ==================== Kit Tools Suite Functions ====================
        
        // Utility function
        function kitSleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Kit Toast notification
        function showKitToast(message, icon = '✓') {
            showToast(message);
        }

        // 1. Speed Test
        async function runSpeedTest() {
            const btn = document.getElementById('speed-test-btn');
            const status = document.getElementById('speed-status');
            btn.disabled = true;
            btn.innerHTML = '<div class="kit-loading-spinner"></div> 测试中...';
            status.style.display = 'none';

            const downloadGauge = document.getElementById('download-gauge');
            const uploadGauge = document.getElementById('upload-gauge');
            const pingGauge = document.getElementById('ping-gauge');

            // Download test
            for (let i = 0; i <= 100; i += 5) {
                await kitSleep(100);
                const speed = Math.round((i / 100) * 150 + Math.random() * 20);
                document.getElementById('download-speed').textContent = speed;
                downloadGauge.style.background = `conic-gradient(var(--accent) ${i * 3.6}deg, var(--bg-secondary) ${i * 3.6}deg)`;
            }

            // Upload test
            for (let i = 0; i <= 100; i += 5) {
                await kitSleep(80);
                const speed = Math.round((i / 100) * 50 + Math.random() * 10);
                document.getElementById('upload-speed').textContent = speed;
                uploadGauge.style.background = `conic-gradient(var(--accent-purple) ${i * 3.6}deg, var(--bg-secondary) ${i * 3.6}deg)`;
            }

            // Ping test
            const pingResult = Math.round(10 + Math.random() * 30);
            document.getElementById('ping-value').textContent = pingResult;
            pingGauge.style.background = `conic-gradient(var(--accent-green) ${Math.min(pingResult * 3, 360)}deg, var(--bg-secondary) ${Math.min(pingResult * 3, 360)}deg)`;

            btn.disabled = false;
            btn.innerHTML = '重新测速';
            status.style.display = 'inline-flex';
            showKitToast('网速测试完成');
        }

        // 2. Ping Test
        async function runPingTest() {
            const host = document.getElementById('ping-host').value.trim();
            if (!host) {
                showKitToast('请输入主机名', '⚠');
                return;
            }

            const results = document.getElementById('ping-results');
            results.innerHTML = '<div style="text-align: center; padding: 1rem;"><div class="kit-loading-spinner" style="margin: 0 auto;"></div><p style="margin-top: 0.5rem; color: var(--text-secondary);">正在 Ping...</p></div>';

            await kitSleep(500);

            const pingResults = [];
            let html = '';
            for (let i = 1; i <= 4; i++) {
                await kitSleep(300);
                const time = Math.round(10 + Math.random() * 50);
                pingResults.push(time);
                html += `<div class="kit-result-item">
                    <span class="kit-result-label">Ping #${i}</span>
                    <span class="kit-result-value ${time < 50 ? 'success' : time < 100 ? 'warning' : 'error'}">${time} ms</span>
                </div>`;
                results.innerHTML = html;
            }

            const avg = Math.round(pingResults.reduce((a, b) => a + b, 0) / pingResults.length);
            const min = Math.min(...pingResults);
            const max = Math.max(...pingResults);

            html += `<div class="kit-result-item" style="border-top: 1px solid var(--border); margin-top: 0.5rem; padding-top: 0.75rem;">
                <span class="kit-result-label">统计</span>
                <span class="kit-result-value accent">最小: ${min}ms | 平均: ${avg}ms | 最大: ${max}ms</span>
            </div>`;
            results.innerHTML = html;
            showKitToast('Ping 测试完成');
        }

        // 3. IP Detection for Kit
        async function detectIPKit() {
            document.getElementById('ipv4-addr').textContent = '检测中...';
            document.getElementById('ipv6-addr').textContent = '检测中...';

            await kitSleep(800);

            const ipv4 = `${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`;
            const hasIPv6 = Math.random() > 0.3;
            const ipv6 = hasIPv6 ? `2001:db8:${Math.random().toString(16).substr(2, 4)}::${Math.random().toString(16).substr(2, 4)}` : '不可用';

            document.getElementById('ipv4-addr').textContent = ipv4;
            document.getElementById('ipv4-addr').className = 'kit-result-value accent';
            document.getElementById('ipv6-addr').textContent = ipv6;
            document.getElementById('ipv6-addr').className = `kit-result-value ${hasIPv6 ? 'accent' : 'warning'}`;
            document.getElementById('ipv6-support').textContent = hasIPv6 ? '已启用' : '未启用';
            document.getElementById('ipv6-support').className = `kit-result-value ${hasIPv6 ? 'success' : 'warning'}`;
            document.getElementById('ip-location-kit').textContent = 'Boston, MA, US';
            document.getElementById('ip-isp-kit').textContent = 'Comcast Cable Communications';

            showKitToast('IP 检测完成');
        }

        // 4. Proxy/VPN Detection
        async function detectProxy() {
            const items = ['proxy-status', 'vpn-status', 'tor-status', 'datacenter-status', 'anon-level'];
            items.forEach(id => {
                document.getElementById(id).textContent = '检测中...';
                document.getElementById(id).className = 'kit-result-value';
            });

            await kitSleep(1200);

            const isVPN = Math.random() > 0.7;
            const isProxy = Math.random() > 0.8;
            const isTor = Math.random() > 0.95;
            const isDatacenter = Math.random() > 0.6;

            document.getElementById('proxy-status').textContent = isProxy ? '检测到代理' : '未检测到';
            document.getElementById('proxy-status').className = `kit-result-value ${isProxy ? 'warning' : 'success'}`;

            document.getElementById('vpn-status').textContent = isVPN ? '可能使用 VPN' : '未检测到';
            document.getElementById('vpn-status').className = `kit-result-value ${isVPN ? 'warning' : 'success'}`;

            document.getElementById('tor-status').textContent = isTor ? '检测到 Tor' : '未检测到';
            document.getElementById('tor-status').className = `kit-result-value ${isTor ? 'error' : 'success'}`;

            document.getElementById('datacenter-status').textContent = isDatacenter ? '是' : '否';
            document.getElementById('datacenter-status').className = `kit-result-value ${isDatacenter ? 'warning' : 'success'}`;

            let anonLevel = '低';
            let anonClass = 'success';
            if (isTor) { anonLevel = '极高'; anonClass = 'error'; }
            else if (isVPN && isProxy) { anonLevel = '高'; anonClass = 'warning'; }
            else if (isVPN || isProxy) { anonLevel = '中'; anonClass = 'warning'; }

            document.getElementById('anon-level').textContent = anonLevel;
            document.getElementById('anon-level').className = `kit-result-value ${anonClass}`;

            showKitToast('代理检测完成');
        }

        // 5. SSL Check
        async function checkSSL() {
            const domain = document.getElementById('ssl-domain').value.trim();
            if (!domain) {
                showKitToast('请输入域名', '⚠');
                return;
            }

            const results = document.getElementById('ssl-results');
            results.innerHTML = '<div style="text-align: center; padding: 1rem;"><div class="kit-loading-spinner" style="margin: 0 auto;"></div><p style="margin-top: 0.5rem; color: var(--text-secondary);">检查证书...</p></div>';

            await kitSleep(1000);

            const isValid = Math.random() > 0.1;
            const daysLeft = Math.floor(Math.random() * 300) + 30;
            const grade = isValid ? (daysLeft > 60 ? 'A+' : 'A') : 'F';

            results.innerHTML = `
                <div class="kit-result-item">
                    <span class="kit-result-label">状态</span>
                    <span class="kit-status-badge ${isValid ? 'success' : 'error'}">${isValid ? '有效' : '无效'}</span>
                </div>
                <div class="kit-result-item">
                    <span class="kit-result-label">评级</span>
                    <span class="kit-result-value ${grade === 'A+' ? 'success' : grade === 'A' ? 'success' : 'error'}">${grade}</span>
                </div>
                <div class="kit-result-item">
                    <span class="kit-result-label">颁发机构</span>
                    <span class="kit-result-value">Let's Encrypt Authority X3</span>
                </div>
                <div class="kit-result-item">
                    <span class="kit-result-label">有效期</span>
                    <span class="kit-result-value ${daysLeft > 30 ? 'success' : 'warning'}">${daysLeft} 天</span>
                </div>
                <div class="kit-result-item">
                    <span class="kit-result-label">加密算法</span>
                    <span class="kit-result-value">RSA 2048 位</span>
                </div>
                <div class="kit-result-item">
                    <span class="kit-result-label">TLS 版本</span>
                    <span class="kit-result-value success">TLS 1.3</span>
                </div>
            `;
            showKitToast('SSL 证书检查完成');
        }

        // 6. HTTP Headers
        async function getHeaders() {
            const url = document.getElementById('headers-url').value.trim();
            if (!url) {
                showKitToast('请输入 URL', '⚠');
                return;
            }

            const results = document.getElementById('headers-results');
            results.innerHTML = '<div style="text-align: center; padding: 1rem; font-family: Outfit, sans-serif;"><div class="kit-loading-spinner" style="margin: 0 auto;"></div><p style="margin-top: 0.5rem; color: var(--text-secondary);">获取头信息...</p></div>';

            await kitSleep(800);

            const headers = [
                { name: 'content-type', value: 'text/html; charset=utf-8' },
                { name: 'server', value: 'nginx/1.21.0' },
                { name: 'x-frame-options', value: 'SAMEORIGIN' },
                { name: 'x-content-type-options', value: 'nosniff' },
                { name: 'x-xss-protection', value: '1; mode=block' },
                { name: 'strict-transport-security', value: 'max-age=31536000; includeSubDomains' },
                { name: 'cache-control', value: 'public, max-age=3600' },
                { name: 'content-encoding', value: 'gzip' }
            ];

            results.innerHTML = headers.map(h => `
                <div class="kit-header-item">
                    <span class="kit-header-name">${h.name}:</span> <span class="kit-header-value">${h.value}</span>
                </div>
            `).join('');
            showKitToast('HTTP 头信息获取成功');
        }

        // 7. Security Scan
        async function runSecurityScan() {
            const url = document.getElementById('scan-url').value.trim();
            if (!url) {
                showKitToast('请输入网站地址', '⚠');
                return;
            }

            const progress = document.getElementById('scan-progress');
            const progressFill = document.getElementById('scan-progress-fill');
            const items = document.querySelectorAll('#scan-items .kit-scan-item');

            progress.style.display = 'block';

            const results = [
                { status: 'success', icon: '✓' },
                { status: Math.random() > 0.3 ? 'success' : 'warning', icon: Math.random() > 0.3 ? '✓' : '!' },
                { status: Math.random() > 0.5 ? 'success' : 'warning', icon: Math.random() > 0.5 ? '✓' : '!' },
                { status: Math.random() > 0.4 ? 'success' : 'error', icon: Math.random() > 0.4 ? '✓' : '✗' },
                { status: 'success', icon: '✓' }
            ];

            for (let i = 0; i < items.length; i++) {
                const icon = items[i].querySelector('.kit-scan-icon');
                icon.className = 'kit-scan-icon checking';
                icon.textContent = '◌';
                
                await kitSleep(800);
                
                icon.className = `kit-scan-icon ${results[i].status}`;
                icon.textContent = results[i].icon;
                
                progressFill.style.width = `${((i + 1) / items.length) * 100}%`;
            }

            showKitToast('安全扫描完成');
        }

        // 8. Currency Conversion
        const exchangeRates = {
            USD: 1,
            EUR: 0.92,
            GBP: 0.79,
            JPY: 149.50,
            CNY: 7.24,
            HKD: 7.82,
            KRW: 1320.50,
            SGD: 1.34,
            AUD: 1.53,
            CAD: 1.36
        };

        function convertCurrency() {
            const amount = parseFloat(document.getElementById('currency-amount').value) || 0;
            const from = document.getElementById('currency-from').value;
            const to = document.getElementById('currency-to').value;

            const inUSD = amount / exchangeRates[from];
            const result = inUSD * exchangeRates[to];
            const rate = exchangeRates[to] / exchangeRates[from];

            document.getElementById('converted-amount').textContent = result.toFixed(2) + ' ' + to;
            document.getElementById('exchange-rate').textContent = `1 ${from} = ${rate.toFixed(4)} ${to}`;
        }

        function swapCurrency() {
            const from = document.getElementById('currency-from');
            const to = document.getElementById('currency-to');
            const temp = from.value;
            from.value = to.value;
            to.value = temp;
            convertCurrency();
        }

        // Initialize currency on page load
        document.addEventListener('DOMContentLoaded', () => {
            if (document.getElementById('currency-amount')) {
                convertCurrency();
            }
            // Initialize unit converter
            if (document.getElementById('unit-category')) {
                updateUnitOptions();
            }
        });

        // ==================== 9. QR Code Generator ====================
        function generateQRCode() {
            const text = document.getElementById('qr-input').value.trim();
            if (!text) {
                showKitToast('请输入内容', '⚠');
                return;
            }
            
            const size = parseInt(document.getElementById('qr-size').value);
            const output = document.getElementById('qr-output');
            
            output.innerHTML = '<div class="kit-loading-spinner" style="margin: 0 auto;"></div>';
            
            setTimeout(() => {
                const canvas = document.createElement('canvas');
                QRCode.toCanvas(canvas, text, {
                    width: size,
                    margin: 2,
                    color: { dark: '#000000', light: '#ffffff' }
                }, (error) => {
                    if (error) {
                        output.innerHTML = '<div style="color: #ef4444;">生成失败，请重试</div>';
                        showKitToast('生成失败', '✗');
                    } else {
                        output.innerHTML = '';
                        output.appendChild(canvas);
                        
                        const downloadBtn = document.createElement('button');
                        downloadBtn.className = 'kit-btn kit-btn-primary';
                        downloadBtn.innerHTML = '下载图片';
                        downloadBtn.style.marginTop = '1rem';
                        downloadBtn.onclick = () => {
                            const link = document.createElement('a');
                            link.download = 'qrcode.png';
                            link.href = canvas.toDataURL();
                            link.click();
                            showKitToast('下载成功');
                        };
                        output.appendChild(downloadBtn);
                        
                        showKitToast('二维码生成成功');
                    }
                });
            }, 300);
        }

        // ==================== 10. Short URL Generator ====================
        async function generateShortURL() {
            const longUrl = document.getElementById('long-url-input').value.trim();
            if (!longUrl) {
                showKitToast('请输入网址', '⚠');
                return;
            }
            
            if (!longUrl.startsWith('http://') && !longUrl.startsWith('https://')) {
                showKitToast('请输入有效的网址（以 http:// 或 https:// 开头）', '⚠');
                return;
            }
            
            const result = document.getElementById('short-url-result');
            result.innerHTML = '<div style="text-align: center; padding: 1rem;"><div class="kit-loading-spinner" style="margin: 0 auto;"></div><p style="margin-top: 0.5rem; color: var(--text-secondary);">生成中...</p></div>';
            
            try {
                const response = await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(longUrl)}`);
                const shortUrl = await response.text();
                
                if (shortUrl.startsWith('http')) {
                    result.innerHTML = `
                        <div class="kit-short-url-box">
                            <span class="kit-short-url-text">${shortUrl}</span>
                            <button class="kit-btn kit-btn-primary" onclick="copyToClipboard('${shortUrl}')">复制</button>
                        </div>
                    `;
                    showKitToast('短链接生成成功');
                } else {
                    result.innerHTML = '<div style="text-align: center; color: #ef4444; padding: 1rem;">生成失败，请检查网址格式</div>';
                    showKitToast('生成失败', '✗');
                }
            } catch (error) {
                result.innerHTML = '<div style="text-align: center; color: #ef4444; padding: 1rem;">网络错误，请稍后重试</div>';
                showKitToast('网络错误', '✗');
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showKitToast('已复制到剪贴板');
            }).catch(() => {
                showKitToast('复制失败', '✗');
            });
        }

        // ==================== 11. Unit Converter ====================
        const unitData = {
            length: {
                units: ['米', '厘米', '毫米', '千米', '英寸', '英尺', '码', '英里'],
                base: [1, 0.01, 0.001, 1000, 0.0254, 0.3048, 0.9144, 1609.344]
            },
            weight: {
                units: ['千克', '克', '毫克', '吨', '磅', '盎司', '斤', '两'],
                base: [1, 0.001, 0.000001, 1000, 0.453592, 0.0283495, 0.5, 0.05]
            },
            temperature: {
                units: ['摄氏度', '华氏度', '开尔文'],
                convert: (value, from, to) => {
                    let celsius;
                    if (from === '摄氏度') celsius = value;
                    else if (from === '华氏度') celsius = (value - 32) * 5/9;
                    else celsius = value - 273.15;
                    
                    if (to === '摄氏度') return celsius;
                    else if (to === '华氏度') return celsius * 9/5 + 32;
                    else return celsius + 273.15;
                }
            },
            area: {
                units: ['平方米', '平方厘米', '平方千米', '公顷', '亩', '平方英尺', '平方英里'],
                base: [1, 0.0001, 1000000, 10000, 666.667, 0.092903, 2589988.11]
            },
            data: {
                units: ['字节', 'KB', 'MB', 'GB', 'TB', '比特'],
                base: [1, 1024, 1048576, 1073741824, 1099511627776, 0.125]
            }
        };

        let currentUnitCategory = 'length';

        function updateUnitOptions() {
            currentUnitCategory = document.getElementById('unit-category').value;
            const category = unitData[currentUnitCategory];
            const fromSelect = document.getElementById('unit-from');
            const toSelect = document.getElementById('unit-to');
            
            fromSelect.innerHTML = category.units.map((u, i) => `<option value="${i}">${u}</option>`).join('');
            toSelect.innerHTML = category.units.map((u, i) => `<option value="${i}" ${i === 1 ? 'selected' : ''}>${u}</option>`).join('');
            
            convertUnits();
        }

        function convertUnits() {
            const category = unitData[currentUnitCategory];
            const fromValue = parseFloat(document.getElementById('unit-value').value) || 0;
            const fromIndex = parseInt(document.getElementById('unit-from').value);
            const toIndex = parseInt(document.getElementById('unit-to').value);
            
            let result;
            if (currentUnitCategory === 'temperature') {
                result = category.convert(fromValue, category.units[fromIndex], category.units[toIndex]);
            } else {
                const baseValue = fromValue * category.base[fromIndex];
                result = baseValue / category.base[toIndex];
            }
            
            document.getElementById('unit-result').textContent = result.toPrecision(8);
            document.getElementById('unit-formula').textContent = 
                `${fromValue} ${category.units[fromIndex]} = ${result.toPrecision(8)} ${category.units[toIndex]}`;
        }

        function swapUnits() {
            const fromSelect = document.getElementById('unit-from');
            const toSelect = document.getElementById('unit-to');
            const temp = fromSelect.value;
            fromSelect.value = toSelect.value;
            toSelect.value = temp;
            convertUnits();
        }

        // ==================== 12. Password Strength Checker ====================
        function checkPasswordStrength() {
            const password = document.getElementById('password-check-input').value;
            const meter = document.getElementById('password-meter');
            const fill = document.getElementById('password-meter-fill');
            const label = document.getElementById('password-strength-label');
            
            if (!password) {
                fill.className = 'kit-meter-fill';
                label.className = 'kit-password-label';
                label.textContent = '输入密码开始检测';
                resetPasswordTips();
                return;
            }
            
            const checks = {
                length: password.length >= 8,
                upper: /[A-Z]/.test(password),
                lower: /[a-z]/.test(password),
                number: /[0-9]/.test(password),
                special: /[!@#$%^&*(),.?":{}|<>_\-+=\[\]\\\/`~]/.test(password)
            };
            
            // Update tips
            Object.keys(checks).forEach(key => {
                const el = document.getElementById(`pwd-tip-${key}`);
                if (el) {
                    if (checks[key]) {
                        el.classList.add('pass');
                        el.querySelector('.kit-tip-icon').textContent = '✓';
                    } else {
                        el.classList.remove('pass');
                        el.querySelector('.kit-tip-icon').textContent = '○';
                    }
                }
            });
            
            const score = Object.values(checks).filter(Boolean).length;
            
            fill.className = 'kit-meter-fill';
            label.className = 'kit-password-label';
            
            if (score <= 2) {
                fill.classList.add('weak');
                label.classList.add('weak');
                label.textContent = '弱 - 容易被破解';
            } else if (score === 3) {
                fill.classList.add('fair');
                label.classList.add('fair');
                label.textContent = '一般 - 建议增强';
            } else if (score === 4) {
                fill.classList.add('good');
                label.classList.add('good');
                label.textContent = '良好 - 较为安全';
            } else {
                fill.classList.add('strong');
                label.classList.add('strong');
                label.textContent = '强 - 非常安全';
            }
        }

        function resetPasswordTips() {
            ['length', 'upper', 'lower', 'number', 'special'].forEach(key => {
                const el = document.getElementById(`pwd-tip-${key}`);
                if (el) {
                    el.classList.remove('pass');
                    el.querySelector('.kit-tip-icon').textContent = '○';
                }
            });
        }

        function togglePasswordView() {
            const input = document.getElementById('password-check-input');
            input.type = input.type === 'password' ? 'text' : 'password';
        }

        function generateStrongPassword() {
            const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=';
            let password = '';
            // Ensure at least one of each type
            password += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'[Math.floor(Math.random() * 26)];
            password += 'abcdefghijklmnopqrstuvwxyz'[Math.floor(Math.random() * 26)];
            password += '0123456789'[Math.floor(Math.random() * 10)];
            password += '!@#$%^&*()_+-='[Math.floor(Math.random() * 14)];
            
            for (let i = 4; i < 16; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            // Shuffle the password
            password = password.split('').sort(() => Math.random() - 0.5).join('');
            
            document.getElementById('password-check-input').value = password;
            checkPasswordStrength();
            showKitToast('已生成强密码');
        }

        // ==================== 13. Translator ====================
        async function translateText() {
            const sourceText = document.getElementById('translate-input').value.trim();
            if (!sourceText) {
                showKitToast('请输入要翻译的文本', '⚠');
                return;
            }
            
            const sourceLang = document.getElementById('translate-from').value;
            const targetLang = document.getElementById('translate-to').value;
            const output = document.getElementById('translate-output');
            
            output.textContent = '翻译中...';
            output.style.color = 'var(--text-secondary)';
            
            try {
                const langPair = sourceLang === 'auto' ? 
                    `autodetect|${targetLang}` : 
                    `${sourceLang}|${targetLang}`;
                
                const response = await fetch(
                    `https://api.mymemory.translated.net/get?q=${encodeURIComponent(sourceText)}&langpair=${langPair}`
                );
                const data = await response.json();
                
                if (data.responseStatus === 200) {
                    output.textContent = data.responseData.translatedText;
                    output.style.color = 'var(--text-primary)';
                    showKitToast('翻译完成');
                } else {
                    output.textContent = '翻译失败，请稍后重试';
                    output.style.color = '#ef4444';
                    showKitToast('翻译失败', '✗');
                }
            } catch (error) {
                output.textContent = '网络错误，请稍后重试';
                output.style.color = '#ef4444';
                showKitToast('网络错误', '✗');
            }
        }

        function swapTranslateLang() {
            const from = document.getElementById('translate-from');
            const to = document.getElementById('translate-to');
            
            if (from.value === 'auto') {
                showKitToast('请先选择源语言', '⚠');
                return;
            }
            
            const temp = from.value;
            from.value = to.value;
            to.value = temp;
            
            // Also swap the text if there's translation result
            const input = document.getElementById('translate-input');
            const output = document.getElementById('translate-output');
            
            if (output.textContent && 
                output.textContent !== '翻译结果将显示在这里...' &&
                output.textContent !== '翻译中...' &&
                output.style.color !== '#ef4444') {
                input.value = output.textContent;
                output.textContent = '翻译结果将显示在这里...';
                output.style.color = 'var(--text-secondary)';
            }
        }

        // ==================== 14. Base Converter (进制转换器) ====================
        function convertBase() {
            const input = document.getElementById('base-input').value.trim();
            const fromBase = parseInt(document.getElementById('base-from').value);
            
            if (!input) {
                document.getElementById('base-bin').textContent = '--';
                document.getElementById('base-oct').textContent = '--';
                document.getElementById('base-dec').textContent = '--';
                document.getElementById('base-hex').textContent = '--';
                return;
            }
            
            try {
                // Parse input in the specified base to decimal
                const decimal = parseInt(input, fromBase);
                
                if (isNaN(decimal)) {
                    throw new Error('Invalid input');
                }
                
                // Convert to all bases
                document.getElementById('base-bin').textContent = decimal.toString(2);
                document.getElementById('base-oct').textContent = decimal.toString(8);
                document.getElementById('base-dec').textContent = decimal.toString(10);
                document.getElementById('base-hex').textContent = decimal.toString(16).toUpperCase();
            } catch (e) {
                document.getElementById('base-bin').textContent = '无效输入';
                document.getElementById('base-oct').textContent = '无效输入';
                document.getElementById('base-dec').textContent = '无效输入';
                document.getElementById('base-hex').textContent = '无效输入';
            }
        }

        // ==================== 15. Random Number Generator (随机数生成器) ====================
        function generateRandomNumbers() {
            const min = parseInt(document.getElementById('random-min').value) || 1;
            const max = parseInt(document.getElementById('random-max').value) || 100;
            const count = Math.min(parseInt(document.getElementById('random-count').value) || 5, 100);
            const unique = document.getElementById('random-unique').checked;
            
            if (min > max) {
                showKitToast('最小值不能大于最大值', '⚠');
                return;
            }
            
            if (unique && (max - min + 1) < count) {
                showKitToast('范围内数字不足以生成不重复的结果', '⚠');
                return;
            }
            
            let numbers = [];
            
            if (unique) {
                // Generate unique numbers
                const pool = [];
                for (let i = min; i <= max; i++) pool.push(i);
                for (let i = 0; i < count; i++) {
                    const idx = Math.floor(Math.random() * pool.length);
                    numbers.push(pool.splice(idx, 1)[0]);
                }
            } else {
                // Generate with possible duplicates
                for (let i = 0; i < count; i++) {
                    numbers.push(Math.floor(Math.random() * (max - min + 1)) + min);
                }
            }
            
            const result = document.getElementById('random-results');
            result.innerHTML = `
                <div class="kit-random-numbers">
                    ${numbers.map(n => `<span class="kit-random-number">${n}</span>`).join('')}
                </div>
            `;
            showKitToast('随机数生成成功');
        }

        // ==================== 16. MD5/SHA Hash Generator (哈希生成器) ====================
        async function generateHashes() {
            const input = document.getElementById('hash-input').value;
            
            if (!input) {
                document.getElementById('hash-md5').textContent = '--';
                document.getElementById('hash-sha1').textContent = '--';
                document.getElementById('hash-sha256').textContent = '--';
                document.getElementById('hash-sha512').textContent = '--';
                return;
            }
            
            const encoder = new TextEncoder();
            const data = encoder.encode(input);
            
            // MD5 (using a simple implementation since Web Crypto doesn't support it)
            document.getElementById('hash-md5').textContent = md5(input);
            
            // SHA-1
            const sha1Buffer = await crypto.subtle.digest('SHA-1', data);
            document.getElementById('hash-sha1').textContent = bufferToHex(sha1Buffer);
            
            // SHA-256
            const sha256Buffer = await crypto.subtle.digest('SHA-256', data);
            document.getElementById('hash-sha256').textContent = bufferToHex(sha256Buffer);
            
            // SHA-512
            const sha512Buffer = await crypto.subtle.digest('SHA-512', data);
            document.getElementById('hash-sha512').textContent = bufferToHex(sha512Buffer);
        }

        function bufferToHex(buffer) {
            return Array.from(new Uint8Array(buffer))
                .map(b => b.toString(16).padStart(2, '0'))
                .join('');
        }

        // Simple MD5 implementation
        function md5(string) {
            function md5cycle(x, k) {
                var a = x[0], b = x[1], c = x[2], d = x[3];
                a = ff(a, b, c, d, k[0], 7, -680876936); d = ff(d, a, b, c, k[1], 12, -389564586);
                c = ff(c, d, a, b, k[2], 17, 606105819); b = ff(b, c, d, a, k[3], 22, -1044525330);
                a = ff(a, b, c, d, k[4], 7, -176418897); d = ff(d, a, b, c, k[5], 12, 1200080426);
                c = ff(c, d, a, b, k[6], 17, -1473231341); b = ff(b, c, d, a, k[7], 22, -45705983);
                a = ff(a, b, c, d, k[8], 7, 1770035416); d = ff(d, a, b, c, k[9], 12, -1958414417);
                c = ff(c, d, a, b, k[10], 17, -42063); b = ff(b, c, d, a, k[11], 22, -1990404162);
                a = ff(a, b, c, d, k[12], 7, 1804603682); d = ff(d, a, b, c, k[13], 12, -40341101);
                c = ff(c, d, a, b, k[14], 17, -1502002290); b = ff(b, c, d, a, k[15], 22, 1236535329);
                a = gg(a, b, c, d, k[1], 5, -165796510); d = gg(d, a, b, c, k[6], 9, -1069501632);
                c = gg(c, d, a, b, k[11], 14, 643717713); b = gg(b, c, d, a, k[0], 20, -373897302);
                a = gg(a, b, c, d, k[5], 5, -701558691); d = gg(d, a, b, c, k[10], 9, 38016083);
                c = gg(c, d, a, b, k[15], 14, -660478335); b = gg(b, c, d, a, k[4], 20, -405537848);
                a = gg(a, b, c, d, k[9], 5, 568446438); d = gg(d, a, b, c, k[14], 9, -1019803690);
                c = gg(c, d, a, b, k[3], 14, -187363961); b = gg(b, c, d, a, k[8], 20, 1163531501);
                a = gg(a, b, c, d, k[13], 5, -1444681467); d = gg(d, a, b, c, k[2], 9, -51403784);
                c = gg(c, d, a, b, k[7], 14, 1735328473); b = gg(b, c, d, a, k[12], 20, -1926607734);
                a = hh(a, b, c, d, k[5], 4, -378558); d = hh(d, a, b, c, k[8], 11, -2022574463);
                c = hh(c, d, a, b, k[11], 16, 1839030562); b = hh(b, c, d, a, k[14], 23, -35309556);
                a = hh(a, b, c, d, k[1], 4, -1530992060); d = hh(d, a, b, c, k[4], 11, 1272893353);
                c = hh(c, d, a, b, k[7], 16, -155497632); b = hh(b, c, d, a, k[10], 23, -1094730640);
                a = hh(a, b, c, d, k[13], 4, 681279174); d = hh(d, a, b, c, k[0], 11, -358537222);
                c = hh(c, d, a, b, k[3], 16, -722521979); b = hh(b, c, d, a, k[6], 23, 76029189);
                a = hh(a, b, c, d, k[9], 4, -640364487); d = hh(d, a, b, c, k[12], 11, -421815835);
                c = hh(c, d, a, b, k[15], 16, 530742520); b = hh(b, c, d, a, k[2], 23, -995338651);
                a = ii(a, b, c, d, k[0], 6, -198630844); d = ii(d, a, b, c, k[7], 10, 1126891415);
                c = ii(c, d, a, b, k[14], 15, -1416354905); b = ii(b, c, d, a, k[5], 21, -57434055);
                a = ii(a, b, c, d, k[12], 6, 1700485571); d = ii(d, a, b, c, k[3], 10, -1894986606);
                c = ii(c, d, a, b, k[10], 15, -1051523); b = ii(b, c, d, a, k[1], 21, -2054922799);
                a = ii(a, b, c, d, k[8], 6, 1873313359); d = ii(d, a, b, c, k[15], 10, -30611744);
                c = ii(c, d, a, b, k[6], 15, -1560198380); b = ii(b, c, d, a, k[13], 21, 1309151649);
                a = ii(a, b, c, d, k[4], 6, -145523070); d = ii(d, a, b, c, k[11], 10, -1120210379);
                c = ii(c, d, a, b, k[2], 15, 718787259); b = ii(b, c, d, a, k[9], 21, -343485551);
                x[0] = add32(a, x[0]); x[1] = add32(b, x[1]); x[2] = add32(c, x[2]); x[3] = add32(d, x[3]);
            }
            function cmn(q, a, b, x, s, t) { a = add32(add32(a, q), add32(x, t)); return add32((a << s) | (a >>> (32 - s)), b); }
            function ff(a, b, c, d, x, s, t) { return cmn((b & c) | ((~b) & d), a, b, x, s, t); }
            function gg(a, b, c, d, x, s, t) { return cmn((b & d) | (c & (~d)), a, b, x, s, t); }
            function hh(a, b, c, d, x, s, t) { return cmn(b ^ c ^ d, a, b, x, s, t); }
            function ii(a, b, c, d, x, s, t) { return cmn(c ^ (b | (~d)), a, b, x, s, t); }
            function md51(s) {
                var n = s.length, state = [1732584193, -271733879, -1732584194, 271733878], i;
                for (i = 64; i <= s.length; i += 64) { md5cycle(state, md5blk(s.substring(i - 64, i))); }
                s = s.substring(i - 64); var tail = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
                for (i = 0; i < s.length; i++) tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);
                tail[i >> 2] |= 0x80 << ((i % 4) << 3);
                if (i > 55) { md5cycle(state, tail); for (i = 0; i < 16; i++) tail[i] = 0; }
                tail[14] = n * 8; md5cycle(state, tail); return state;
            }
            function md5blk(s) { var md5blks = [], i; for (i = 0; i < 64; i += 4) { md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24); } return md5blks; }
            var hex_chr = '0123456789abcdef'.split('');
            function rhex(n) { var s = '', j = 0; for (; j < 4; j++) s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F]; return s; }
            function hex(x) { for (var i = 0; i < x.length; i++) x[i] = rhex(x[i]); return x.join(''); }
            function add32(a, b) { return (a + b) & 0xFFFFFFFF; }
            return hex(md51(string));
        }

        // ==================== 17. Age Calculator (年龄计算器) ====================
        function calculateAge() {
            const birthInput = document.getElementById('birth-date').value;
            if (!birthInput) return;
            
            const birthDate = new Date(birthInput);
            const today = new Date();
            
            // Calculate age
            let years = today.getFullYear() - birthDate.getFullYear();
            let months = today.getMonth() - birthDate.getMonth();
            let days = today.getDate() - birthDate.getDate();
            
            if (days < 0) {
                months--;
                const lastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                days += lastMonth.getDate();
            }
            if (months < 0) {
                years--;
                months += 12;
            }
            
            // Update display
            document.getElementById('age-years').textContent = years;
            document.getElementById('age-detail').textContent = `${years}岁${months}个月${days}天`;
            
            // Show results
            const results = document.getElementById('age-results');
            results.style.display = 'block';
            
            // Exact age
            document.getElementById('age-exact').textContent = `${years}岁${months}个月${days}天`;
            
            // Total days lived
            const totalDays = Math.floor((today - birthDate) / (1000 * 60 * 60 * 24));
            document.getElementById('age-days').textContent = `${totalDays.toLocaleString()} 天`;
            
            // Next birthday
            const nextBirthday = new Date(today.getFullYear(), birthDate.getMonth(), birthDate.getDate());
            if (nextBirthday < today) {
                nextBirthday.setFullYear(nextBirthday.getFullYear() + 1);
            }
            const daysUntilBirthday = Math.ceil((nextBirthday - today) / (1000 * 60 * 60 * 24));
            document.getElementById('age-next-birthday').textContent = daysUntilBirthday === 0 ? '🎉 今天！' : `还有 ${daysUntilBirthday} 天`;
            
            // Chinese Zodiac
            const zodiacAnimals = ['鼠', '牛', '虎', '兔', '龙', '蛇', '马', '羊', '猴', '鸡', '狗', '猪'];
            const zodiacIndex = (birthDate.getFullYear() - 4) % 12;
            document.getElementById('age-zodiac').textContent = zodiacAnimals[zodiacIndex];
            
            // Constellation
            const month = birthDate.getMonth() + 1;
            const day = birthDate.getDate();
            const constellations = [
                { name: '摩羯座', end: [1, 19] }, { name: '水瓶座', end: [2, 18] },
                { name: '双鱼座', end: [3, 20] }, { name: '白羊座', end: [4, 19] },
                { name: '金牛座', end: [5, 20] }, { name: '双子座', end: [6, 21] },
                { name: '巨蟹座', end: [7, 22] }, { name: '狮子座', end: [8, 22] },
                { name: '处女座', end: [9, 22] }, { name: '天秤座', end: [10, 23] },
                { name: '天蝎座', end: [11, 22] }, { name: '射手座', end: [12, 21] },
                { name: '摩羯座', end: [12, 31] }
            ];
            let constellation = '摩羯座';
            for (const c of constellations) {
                if (month < c.end[0] || (month === c.end[0] && day <= c.end[1])) {
                    constellation = c.name;
                    break;
                }
            }
            document.getElementById('age-constellation').textContent = constellation;
        }

        // ==================== 18. Date Calculator (日期计算器) ====================
        let currentDateMode = 'diff';

        function switchDateMode(mode) {
            currentDateMode = mode;
            document.querySelectorAll('.kit-date-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelector(`.kit-date-tab[onclick="switchDateMode('${mode}')"]`).classList.add('active');
            
            document.getElementById('date-diff-mode').style.display = mode === 'diff' ? 'block' : 'none';
            document.getElementById('date-add-mode').style.display = mode === 'add' ? 'block' : 'none';
            
            document.getElementById('date-result').textContent = '--';
            document.getElementById('date-detail').textContent = '选择日期开始计算';
        }

        function calculateDateDiff() {
            const startDate = document.getElementById('date-start').value;
            const endDate = document.getElementById('date-end').value;
            
            if (!startDate || !endDate) return;
            
            const start = new Date(startDate);
            const end = new Date(endDate);
            const diffTime = Math.abs(end - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            document.getElementById('date-result').textContent = `${diffDays} 天`;
            
            const weeks = Math.floor(diffDays / 7);
            const remainingDays = diffDays % 7;
            const months = Math.floor(diffDays / 30);
            const years = Math.floor(diffDays / 365);
            
            let detail = `≈ ${weeks}周${remainingDays}天`;
            if (months > 0) detail += ` ≈ ${months}个月`;
            if (years > 0) detail += ` ≈ ${years}年`;
            
            document.getElementById('date-detail').textContent = detail;
        }

        function calculateDateAdd() {
            const baseDate = document.getElementById('date-base').value;
            const operation = document.getElementById('date-operation').value;
            const days = parseInt(document.getElementById('date-days-input').value) || 0;
            
            if (!baseDate) return;
            
            const date = new Date(baseDate);
            if (operation === 'add') {
                date.setDate(date.getDate() + days);
            } else {
                date.setDate(date.getDate() - days);
            }
            
            const resultDate = date.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });
            document.getElementById('date-result').textContent = resultDate;
            document.getElementById('date-detail').textContent = date.toISOString().split('T')[0];
        }

        // ==================== 19. World Clock (世界时钟) ====================
        function updateWorldClocks() {
            const clocks = [
                { id: 'beijing', tz: 'Asia/Shanghai' },
                { id: 'newyork', tz: 'America/New_York' },
                { id: 'london', tz: 'Europe/London' },
                { id: 'tokyo', tz: 'Asia/Tokyo' },
                { id: 'paris', tz: 'Europe/Paris' },
                { id: 'sydney', tz: 'Australia/Sydney' }
            ];
            
            const now = new Date();
            
            clocks.forEach(clock => {
                const options = { timeZone: clock.tz, hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
                const dateOptions = { timeZone: clock.tz, month: 'short', day: 'numeric', weekday: 'short' };
                
                try {
                    document.getElementById(`clock-${clock.id}`).textContent = now.toLocaleTimeString('zh-CN', options);
                    document.getElementById(`clock-${clock.id}-date`).textContent = now.toLocaleDateString('zh-CN', dateOptions);
                } catch (e) {
                    console.error(`Error updating ${clock.id}:`, e);
                }
            });
        }

        // Start world clock updates
        setInterval(updateWorldClocks, 1000);
        updateWorldClocks(); // Initial call

        // ==================== 20. BMI Calculator (BMI计算器) ====================
        function calculateBMI() {
            const height = parseFloat(document.getElementById('bmi-height').value);
            const weight = parseFloat(document.getElementById('bmi-weight').value);
            
            if (!height || !weight || height <= 0 || weight <= 0) {
                document.getElementById('bmi-value').textContent = '--';
                document.getElementById('bmi-status').textContent = '输入身高体重计算';
                document.getElementById('bmi-status').className = 'kit-bmi-status';
                document.getElementById('bmi-pointer').classList.remove('show');
                document.getElementById('bmi-results').style.display = 'none';
                return;
            }
            
            const heightM = height / 100;
            const bmi = weight / (heightM * heightM);
            const bmiRounded = bmi.toFixed(1);
            
            document.getElementById('bmi-value').textContent = bmiRounded;
            
            // Determine status
            let status, statusClass;
            if (bmi < 18.5) {
                status = '偏瘦';
                statusClass = 'underweight';
            } else if (bmi < 24) {
                status = '正常';
                statusClass = 'normal';
            } else if (bmi < 28) {
                status = '偏胖';
                statusClass = 'overweight';
            } else {
                status = '肥胖';
                statusClass = 'obese';
            }
            
            document.getElementById('bmi-status').textContent = status;
            document.getElementById('bmi-status').className = `kit-bmi-status ${statusClass}`;
            
            // Update pointer position (BMI 15-35 mapped to 0-100%)
            const pointer = document.getElementById('bmi-pointer');
            const position = Math.min(Math.max((bmi - 15) / 20 * 100, 0), 100);
            pointer.style.left = `${position}%`;
            pointer.classList.add('show');
            
            // Show detailed results
            document.getElementById('bmi-results').style.display = 'block';
            
            // Healthy weight range
            const minHealthy = (18.5 * heightM * heightM).toFixed(1);
            const maxHealthy = (24 * heightM * heightM).toFixed(1);
            document.getElementById('bmi-healthy-range').textContent = `${minHealthy} - ${maxHealthy} kg`;
            
            // Suggestion
            let suggestion;
            if (bmi < 18.5) {
                suggestion = '建议适当增加营养摄入';
            } else if (bmi < 24) {
                suggestion = '继续保持健康的生活方式';
            } else if (bmi < 28) {
                suggestion = '建议增加运动，控制饮食';
            } else {
                suggestion = '建议咨询医生，制定减重计划';
            }
            document.getElementById('bmi-suggestion').textContent = suggestion;
        }

        // ==================== 21. Scientific Calculator (科学计算器) ====================
        let calcExpression = '';

        function calcInput(value) {
            calcExpression += value;
            document.getElementById('calc-input').value = calcExpression;
        }

        function calcFunc(func) {
            if (func === 'factorial') {
                calcExpression = `factorial(${calcExpression})`;
            } else if (func === 'log10') {
                calcExpression = `Math.log10(${calcExpression})`;
            } else if (func === 'log') {
                calcExpression = `Math.log(${calcExpression})`;
            } else if (func === 'sqrt') {
                calcExpression = `Math.sqrt(${calcExpression})`;
            } else if (func === 'abs') {
                calcExpression = `Math.abs(${calcExpression})`;
            } else {
                calcExpression = `Math.${func}(${calcExpression})`;
            }
            document.getElementById('calc-input').value = calcExpression;
        }

        function factorial(n) {
            n = Math.round(n);
            if (n < 0) return NaN;
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) result *= i;
            return result;
        }

        function calcClear() {
            calcExpression = '';
            document.getElementById('calc-input').value = '';
            document.getElementById('calc-history').textContent = '';
        }

        function calcDelete() {
            calcExpression = calcExpression.slice(0, -1);
            document.getElementById('calc-input').value = calcExpression;
        }

        function calcEqual() {
            try {
                const result = eval(calcExpression);
                document.getElementById('calc-history').textContent = calcExpression + ' =';
                calcExpression = String(result);
                document.getElementById('calc-input').value = result;
            } catch (e) {
                document.getElementById('calc-input').value = 'Error';
                calcExpression = '';
            }
        }

        // ==================== 22. Function Graph Plotter (函数图像绘制) ====================
        function plotFunction() {
            const canvas = document.getElementById('func-canvas');
            const ctx = canvas.getContext('2d');
            const expr = document.getElementById('func-expression').value;
            const xMin = parseFloat(document.getElementById('func-x-min').value) || -10;
            const xMax = parseFloat(document.getElementById('func-x-max').value) || 10;

            // Clear canvas
            ctx.fillStyle = '#111113';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const width = canvas.width;
            const height = canvas.height;
            const xRange = xMax - xMin;
            const padding = 30;
            const graphWidth = width - 2 * padding;
            const graphHeight = height - 2 * padding;

            // Calculate y values to determine y range
            const points = [];
            const steps = 200;
            let yMin = Infinity, yMax = -Infinity;

            for (let i = 0; i <= steps; i++) {
                const x = xMin + (xRange * i / steps);
                try {
                    const y = eval(expr.replace(/x/g, `(${x})`));
                    if (isFinite(y)) {
                        points.push({ x, y });
                        yMin = Math.min(yMin, y);
                        yMax = Math.max(yMax, y);
                    }
                } catch (e) {}
            }

            if (points.length === 0) {
                ctx.fillStyle = '#ef4444';
                ctx.font = '14px Outfit';
                ctx.textAlign = 'center';
                ctx.fillText('无效的函数表达式', width / 2, height / 2);
                return;
            }

            // Add padding to y range
            const yPadding = (yMax - yMin) * 0.1 || 1;
            yMin -= yPadding;
            yMax += yPadding;
            const yRange = yMax - yMin;

            // Draw grid
            ctx.strokeStyle = 'rgba(255,255,255,0.1)';
            ctx.lineWidth = 1;

            // Vertical grid lines
            for (let i = 0; i <= 10; i++) {
                const x = padding + (graphWidth * i / 10);
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();
            }

            // Horizontal grid lines
            for (let i = 0; i <= 10; i++) {
                const y = padding + (graphHeight * i / 10);
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }

            // Draw axes
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.lineWidth = 2;

            // X axis (y = 0)
            if (yMin <= 0 && yMax >= 0) {
                const y0 = padding + graphHeight * (yMax / yRange);
                ctx.beginPath();
                ctx.moveTo(padding, y0);
                ctx.lineTo(width - padding, y0);
                ctx.stroke();
            }

            // Y axis (x = 0)
            if (xMin <= 0 && xMax >= 0) {
                const x0 = padding + graphWidth * (-xMin / xRange);
                ctx.beginPath();
                ctx.moveTo(x0, padding);
                ctx.lineTo(x0, height - padding);
                ctx.stroke();
            }

            // Draw function
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 2;
            ctx.beginPath();

            let started = false;
            for (const point of points) {
                const px = padding + graphWidth * ((point.x - xMin) / xRange);
                const py = padding + graphHeight * ((yMax - point.y) / yRange);

                if (!started) {
                    ctx.moveTo(px, py);
                    started = true;
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();

            // Draw labels
            ctx.fillStyle = 'rgba(255,255,255,0.5)';
            ctx.font = '10px Space Mono';
            ctx.textAlign = 'center';
            ctx.fillText(xMin.toFixed(1), padding, height - 10);
            ctx.fillText(xMax.toFixed(1), width - padding, height - 10);
            ctx.textAlign = 'right';
            ctx.fillText(yMax.toFixed(1), padding - 5, padding + 10);
            ctx.fillText(yMin.toFixed(1), padding - 5, height - padding);
        }

        function setFuncPreset(expr) {
            document.getElementById('func-expression').value = expr;
            plotFunction();
        }

        // Initialize graph on page load
        setTimeout(() => {
            if (document.getElementById('func-canvas')) {
                plotFunction();
            }
        }, 1000);

        // ==================== 23. Reference Citation Generator (参考文献格式化) ====================
        function updateCiteFields() {
            const type = document.getElementById('cite-type').value;
            const journalGroup = document.getElementById('cite-journal-group');
            const volumeGroup = document.getElementById('cite-volume-group');
            const doiGroup = document.getElementById('cite-doi-group');

            // Reset all
            journalGroup.style.display = 'block';
            volumeGroup.style.display = 'block';
            doiGroup.style.display = 'block';

            // Update labels based on type
            if (type === 'book') {
                journalGroup.querySelector('label').textContent = '出版社';
                journalGroup.querySelector('input').placeholder = 'Penguin Books';
                volumeGroup.style.display = 'none';
            } else if (type === 'website') {
                journalGroup.querySelector('label').textContent = '网站名称';
                journalGroup.querySelector('input').placeholder = 'Wikipedia';
                volumeGroup.style.display = 'none';
                doiGroup.querySelector('label').textContent = 'URL';
                doiGroup.querySelector('input').placeholder = 'https://example.com';
            } else if (type === 'conference') {
                journalGroup.querySelector('label').textContent = '会议名称';
                journalGroup.querySelector('input').placeholder = 'ACM Conference';
            } else {
                journalGroup.querySelector('label').textContent = '期刊名称';
                journalGroup.querySelector('input').placeholder = 'Nature';
            }
        }

        function generateCitation() {
            const type = document.getElementById('cite-type').value;
            const authors = document.getElementById('cite-authors').value.trim();
            const year = document.getElementById('cite-year').value.trim();
            const title = document.getElementById('cite-title').value.trim();
            const journal = document.getElementById('cite-journal').value.trim();
            const volume = document.getElementById('cite-volume').value.trim();
            const issue = document.getElementById('cite-issue').value.trim();
            const pages = document.getElementById('cite-pages').value.trim();
            const doi = document.getElementById('cite-doi').value.trim();
            const format = document.getElementById('cite-format').value;

            if (!authors || !year || !title) {
                showKitToast('请至少填写作者、年份和标题', '⚠');
                return;
            }

            let citation = '';
            const authorList = authors.split(',').map(a => a.trim());

            if (format === 'apa') {
                // APA 7th Edition
                const apaAuthors = authorList.length > 1 
                    ? authorList.slice(0, -1).join(', ') + ', & ' + authorList.slice(-1)
                    : authorList[0];
                
                if (type === 'journal') {
                    citation = `${apaAuthors} (${year}). ${title}. <i>${journal}</i>`;
                    if (volume) citation += `, <i>${volume}</i>`;
                    if (issue) citation += `(${issue})`;
                    if (pages) citation += `, ${pages}`;
                    citation += '.';
                    if (doi) citation += ` https://doi.org/${doi}`;
                } else if (type === 'book') {
                    citation = `${apaAuthors} (${year}). <i>${title}</i>. ${journal}.`;
                } else if (type === 'website') {
                    citation = `${apaAuthors} (${year}). ${title}. <i>${journal}</i>. ${doi}`;
                }
            } else if (format === 'mla') {
                // MLA 9th Edition
                const mlaAuthors = authorList.length > 1
                    ? authorList[0] + ', et al.'
                    : authorList[0];
                
                if (type === 'journal') {
                    citation = `${mlaAuthors}. "${title}." <i>${journal}</i>`;
                    if (volume) citation += `, vol. ${volume}`;
                    if (issue) citation += `, no. ${issue}`;
                    citation += `, ${year}`;
                    if (pages) citation += `, pp. ${pages}`;
                    citation += '.';
                }
            } else if (format === 'chicago') {
                // Chicago Style
                const chicagoAuthors = authorList.join(', ');
                if (type === 'journal') {
                    citation = `${chicagoAuthors}. "${title}." <i>${journal}</i> ${volume}`;
                    if (issue) citation += `, no. ${issue}`;
                    citation += ` (${year})`;
                    if (pages) citation += `: ${pages}`;
                    citation += '.';
                }
            } else if (format === 'gb') {
                // GB/T 7714 中文格式
                const gbAuthors = authorList.join(', ');
                if (type === 'journal') {
                    citation = `${gbAuthors}. ${title}[J]. ${journal}`;
                    if (year) citation += `, ${year}`;
                    if (volume) citation += `, ${volume}`;
                    if (issue) citation += `(${issue})`;
                    if (pages) citation += `: ${pages}`;
                    citation += '.';
                } else if (type === 'book') {
                    citation = `${gbAuthors}. ${title}[M]. ${journal}, ${year}.`;
                }
            }

            const output = document.getElementById('cite-output');
            output.innerHTML = `
                <span class="kit-cite-format-label">${format.toUpperCase()} 格式</span>
                <div class="cite-text" onclick="copyCitation(this)">${citation}</div>
                <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.5rem;">💡 点击引用文本可复制</p>
            `;
            showKitToast('引用格式生成成功');
        }

        function copyCitation(element) {
            const text = element.innerText;
            navigator.clipboard.writeText(text).then(() => {
                showKitToast('引用已复制到剪贴板');
            });
        }

        // ==================== 24. Wavelength Frequency Converter (波长频率转换) ====================
        const c = 299792458; // Speed of light (m/s)
        const h = 6.62607015e-34; // Planck constant (J·s)
        const eV = 1.602176634e-19; // Electron volt (J)

        function convertWave() {
            const type = document.getElementById('wave-type').value;
            const input = parseFloat(document.getElementById('wave-input').value);

            if (!input || input <= 0) {
                resetWaveResults();
                return;
            }

            let wavelengthNm, frequencyHz, energyEv;

            if (type === 'wavelength') {
                wavelengthNm = input;
                frequencyHz = c / (wavelengthNm * 1e-9);
                energyEv = (h * frequencyHz) / eV;
            } else if (type === 'frequency') {
                frequencyHz = input;
                wavelengthNm = (c / frequencyHz) * 1e9;
                energyEv = (h * frequencyHz) / eV;
            } else if (type === 'energy') {
                energyEv = input;
                frequencyHz = (energyEv * eV) / h;
                wavelengthNm = (c / frequencyHz) * 1e9;
            }

            // Display results
            document.getElementById('wave-lambda').textContent = formatWaveValue(wavelengthNm, 'nm');
            document.getElementById('wave-freq').textContent = formatFrequency(frequencyHz);
            document.getElementById('wave-energy').textContent = energyEv.toExponential(4) + ' eV';

            // Determine spectrum region
            const region = getSpectrumRegion(wavelengthNm);
            document.getElementById('wave-region').textContent = region.name;
            document.getElementById('wave-color').textContent = region.color;

            // Update spectrum pointer
            updateSpectrumPointer(wavelengthNm);
        }

        function formatWaveValue(nm, unit) {
            if (nm >= 1e6) return (nm / 1e6).toFixed(2) + ' mm';
            if (nm >= 1e3) return (nm / 1e3).toFixed(2) + ' μm';
            return nm.toFixed(2) + ' nm';
        }

        function formatFrequency(hz) {
            if (hz >= 1e15) return (hz / 1e15).toFixed(4) + ' PHz';
            if (hz >= 1e12) return (hz / 1e12).toFixed(4) + ' THz';
            if (hz >= 1e9) return (hz / 1e9).toFixed(4) + ' GHz';
            if (hz >= 1e6) return (hz / 1e6).toFixed(4) + ' MHz';
            return hz.toExponential(4) + ' Hz';
        }

        function getSpectrumRegion(nm) {
            if (nm < 10) return { name: 'X射线/伽马射线', color: '--' };
            if (nm < 380) return { name: '紫外线 (UV)', color: '--' };
            if (nm < 450) return { name: '可见光', color: '紫色 💜' };
            if (nm < 495) return { name: '可见光', color: '蓝色 💙' };
            if (nm < 570) return { name: '可见光', color: '绿色 💚' };
            if (nm < 590) return { name: '可见光', color: '黄色 💛' };
            if (nm < 620) return { name: '可见光', color: '橙色 🧡' };
            if (nm < 750) return { name: '可见光', color: '红色 ❤️' };
            if (nm < 1e6) return { name: '红外线 (IR)', color: '--' };
            return { name: '微波/无线电波', color: '--' };
        }

        function updateSpectrumPointer(nm) {
            const pointer = document.getElementById('spectrum-pointer');
            if (nm >= 380 && nm <= 700) {
                const position = ((nm - 380) / (700 - 380)) * 100;
                pointer.style.left = `${position}%`;
                pointer.classList.add('show');
            } else {
                pointer.classList.remove('show');
            }
        }

        function resetWaveResults() {
            document.getElementById('wave-lambda').textContent = '--';
            document.getElementById('wave-freq').textContent = '--';
            document.getElementById('wave-energy').textContent = '--';
            document.getElementById('wave-region').textContent = '--';
            document.getElementById('wave-color').textContent = '--';
            document.getElementById('spectrum-pointer').classList.remove('show');
        }

        // ==================== 25. Lucky Color Generator (幸运颜色生成) ====================
        const luckyColors = [
            { name: '热情红', hex: '#E74C3C', meaning: '充满活力与热情', occasion: '重要演讲、约会', match: '白色、黑色、金色' },
            { name: '宁静蓝', hex: '#3498DB', meaning: '平和、信任、专业', occasion: '商务会议、面试', match: '白色、灰色、米色' },
            { name: '生机绿', hex: '#27AE60', meaning: '成长、健康、希望', occasion: '户外活动、新开始', match: '白色、棕色、米色' },
            { name: '活力橙', hex: '#E67E22', meaning: '创意、乐观、社交', occasion: '团队活动、聚会', match: '蓝色、白色、棕色' },
            { name: '优雅紫', hex: '#9B59B6', meaning: '神秘、创造、灵性', occasion: '艺术活动、冥想', match: '白色、银色、粉色' },
            { name: '温暖黄', hex: '#F1C40F', meaning: '快乐、智慧、光明', occasion: '学习、创作', match: '蓝色、灰色、白色' },
            { name: '浪漫粉', hex: '#E91E63', meaning: '温柔、浪漫、关爱', occasion: '约会、庆祝', match: '白色、灰色、金色' },
            { name: '沉稳棕', hex: '#795548', meaning: '稳重、可靠、自然', occasion: '谈判、重要决定', match: '米色、绿色、橙色' },
            { name: '简约灰', hex: '#607D8B', meaning: '中立、冷静、专业', occasion: '工作、学习', match: '白色、黑色、蓝色' },
            { name: '珊瑚色', hex: '#FF7F50', meaning: '温暖、友善、活泼', occasion: '社交、聚餐', match: '白色、米色、蓝色' },
            { name: '薄荷绿', hex: '#1ABC9C', meaning: '清新、放松、治愈', occasion: '休闲、疗愈', match: '白色、粉色、灰色' },
            { name: '皇家蓝', hex: '#2980B9', meaning: '权威、智慧、信任', occasion: '领导、演讲', match: '白色、金色、银色' },
            { name: '玫瑰金', hex: '#B76E79', meaning: '优雅、时尚、温馨', occasion: '派对、约会', match: '白色、黑色、米色' },
            { name: '森林绿', hex: '#228B22', meaning: '自然、平衡、和谐', occasion: '户外、放松', match: '棕色、米色、白色' },
            { name: '阳光橙', hex: '#FF8C00', meaning: '热情、创造、冒险', occasion: '运动、探索', match: '蓝色、白色、黑色' }
        ];

        let currentLuckyColor = null;

        function generateLuckyColor() {
            const randomIndex = Math.floor(Math.random() * luckyColors.length);
            currentLuckyColor = luckyColors[randomIndex];

            const circle = document.getElementById('lucky-color-circle');
            circle.style.background = currentLuckyColor.hex;
            circle.style.borderColor = currentLuckyColor.hex;
            circle.innerHTML = '';

            document.getElementById('lucky-color-name').textContent = currentLuckyColor.name;
            document.getElementById('lucky-color-hex').textContent = currentLuckyColor.hex;

            document.getElementById('lucky-color-meaning').textContent = currentLuckyColor.meaning;
            document.getElementById('lucky-color-occasion').textContent = currentLuckyColor.occasion;
            document.getElementById('lucky-color-match').textContent = currentLuckyColor.match;

            document.getElementById('lucky-color-info').style.display = 'block';
            showKitToast(`今日幸运色：${currentLuckyColor.name}`);
        }

        function copyLuckyColor() {
            if (!currentLuckyColor) {
                showKitToast('请先生成幸运颜色', '⚠');
                return;
            }
            navigator.clipboard.writeText(currentLuckyColor.hex).then(() => {
                showKitToast(`已复制 ${currentLuckyColor.hex}`);
            });
        }

        // ==================== 26. Tarot Card Reader (塔罗牌抽取) ====================
        const tarotCards = [
            { name: '愚者', emoji: '🃏', upright: '新开始、冒险、天真', reversed: '鲁莽、冒失、不成熟',
              love: '可能遇到意想不到的浪漫', career: '适合尝试新方向', advice: '保持开放心态，勇于尝试' },
            { name: '魔术师', emoji: '🎩', upright: '创造力、意志力、技能', reversed: '欺骗、操控、才能未发挥',
              love: '主动表达心意会有好结果', career: '发挥专长的好时机', advice: '相信自己的能力，大胆行动' },
            { name: '女祭司', emoji: '🌙', upright: '直觉、神秘、内在智慧', reversed: '秘密、压抑、忽视直觉',
              love: '倾听内心的声音', career: '需要深入研究和思考', advice: '相信你的直觉，答案就在心中' },
            { name: '女皇', emoji: '👑', upright: '丰收、母性、创造', reversed: '依赖、过度保护、创造力受阻',
              love: '感情进入稳定甜蜜期', career: '项目会有丰硕成果', advice: '用爱和耐心培育你的梦想' },
            { name: '皇帝', emoji: '🏛️', upright: '权威、结构、领导力', reversed: '专制、僵化、控制欲',
              love: '需要更多责任感和承诺', career: '展现领导才能', advice: '建立秩序，但保持灵活' },
            { name: '教皇', emoji: '⛪', upright: '传统、指导、信仰', reversed: '教条、叛逆、不合群',
              love: '传统方式的爱情发展', career: '寻求导师或前辈指点', advice: '尊重传统，也要有自己的思考' },
            { name: '恋人', emoji: '💕', upright: '爱情、和谐、选择', reversed: '不和谐、失衡、错误选择',
              love: '重要的感情抉择时刻', career: '需要做出重要决定', advice: '跟随内心，做出真诚的选择' },
            { name: '战车', emoji: '🏆', upright: '胜利、意志、决心', reversed: '失控、挫败、缺乏方向',
              love: '积极追求会有好结果', career: '全力以赴必能成功', advice: '坚定目标，勇往直前' },
            { name: '力量', emoji: '🦁', upright: '勇气、耐心、内在力量', reversed: '软弱、自我怀疑、失控',
              love: '用温柔和耐心对待感情', career: '需要坚持和韧性', advice: '真正的力量来自内心的平静' },
            { name: '隐士', emoji: '🏔️', upright: '内省、独处、寻找真理', reversed: '孤立、逃避、与世隔绝',
              love: '需要时间独处和思考', career: '深入研究会有收获', advice: '给自己一些独处的时间' },
            { name: '命运之轮', emoji: '🎡', upright: '转变、机遇、命运', reversed: '厄运、变化中的阻力',
              love: '感情将有新的转机', career: '把握即将到来的机会', advice: '顺应变化，相信一切都是最好的安排' },
            { name: '正义', emoji: '⚖️', upright: '公平、真相、因果', reversed: '不公、偏见、逃避责任',
              love: '诚实是感情的基础', career: '公正行事会得到认可', advice: '做正确的事，承担应有的责任' },
            { name: '倒吊人', emoji: '🙃', upright: '牺牲、新视角、等待', reversed: '抗拒、无谓牺牲、拖延',
              love: '换个角度看待感情', career: '暂时的停滞是为了更好的前进', advice: '有时候放手才能得到更多' },
            { name: '死神', emoji: '🦋', upright: '结束、转变、新生', reversed: '抗拒改变、恐惧、停滞',
              love: '旧的结束，新的开始', career: '职业转型的好时机', advice: '勇敢告别过去，迎接新生' },
            { name: '节制', emoji: '⚗️', upright: '平衡、耐心、调和', reversed: '失衡、过度、缺乏远见',
              love: '保持感情中的平衡', career: '稳步前进比冲动更好', advice: '凡事适度，保持内心平和' },
            { name: '恶魔', emoji: '😈', upright: '束缚、诱惑、执念', reversed: '解脱、觉醒、克服执念',
              love: '警惕不健康的依赖', career: '不要被欲望蒙蔽', advice: '认清束缚你的是什么，然后放下' },
            { name: '高塔', emoji: '🗼', upright: '突变、觉醒、释放', reversed: '恐惧改变、延迟灾难',
              love: '感情可能面临考验', career: '突破困境的机会', advice: '改变虽然痛苦，但是必要的成长' },
            { name: '星星', emoji: '⭐', upright: '希望、灵感、宁静', reversed: '失望、悲观、缺乏信心',
              love: '充满希望的感情发展', career: '创意灵感涌现', advice: '保持希望，相信美好即将到来' },
            { name: '月亮', emoji: '🌕', upright: '幻觉、直觉、潜意识', reversed: '困惑消除、真相大白',
              love: '需要信任和沟通', career: '注意隐藏的信息', advice: '相信直觉，但也要理性判断' },
            { name: '太阳', emoji: '☀️', upright: '快乐、成功、活力', reversed: '悲观、延迟的成功',
              love: '幸福快乐的感情', career: '成功和认可即将到来', advice: '保持积极乐观，好运自然来' },
            { name: '审判', emoji: '📯', upright: '觉醒、重生、判决', reversed: '自我怀疑、拒绝反思',
              love: '感情需要重新审视', career: '重要决定的时刻', advice: '诚实面对自己，做出改变' },
            { name: '世界', emoji: '🌍', upright: '完成、整合、成就', reversed: '未完成、缺乏结束',
              love: '感情进入圆满阶段', career: '达成重要目标', advice: '庆祝成就，准备新的旅程' }
        ];

        let tarotFlipped = false;

        function drawTarotCard() {
            if (tarotFlipped) return;

            const card = document.getElementById('tarot-card');
            const randomCard = tarotCards[Math.floor(Math.random() * tarotCards.length)];
            const isReversed = Math.random() > 0.5;

            document.getElementById('tarot-name').textContent = randomCard.name;
            document.getElementById('tarot-emoji').textContent = randomCard.emoji;
            document.getElementById('tarot-position').textContent = isReversed ? '逆位' : '正位';

            const meaningText = isReversed ? randomCard.reversed : randomCard.upright;
            document.getElementById('tarot-meaning-text').textContent = meaningText;
            document.getElementById('tarot-love').textContent = randomCard.love;
            document.getElementById('tarot-career').textContent = randomCard.career;
            document.getElementById('tarot-advice').textContent = randomCard.advice;

            card.classList.add('flipped');
            tarotFlipped = true;

            setTimeout(() => {
                document.getElementById('tarot-meaning').style.display = 'block';
            }, 800);

            showKitToast(`抽到了「${randomCard.name}」${isReversed ? '逆位' : '正位'}`);
        }

        function resetTarot() {
            const card = document.getElementById('tarot-card');
            card.classList.remove('flipped');
            document.getElementById('tarot-meaning').style.display = 'none';
            tarotFlipped = false;
        }

        // 初始化
        initAnimations();

        // ==================== 管理员系统 - 双重API保险 ====================
        const ADMIN_API_URLS = [
            'https://api.agiera.net',
            'https://visitor-stats.metanext.workers.dev'
        ];

        // 智能API请求 - 自动故障转移
        async function adminFetch(endpoint, options = {}) {
            let lastError = null;
            
            for (const baseUrl of ADMIN_API_URLS) {
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000);
                    
                    const response = await fetch(`${baseUrl}${endpoint}`, {
                        ...options,
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (response.ok || response.status < 500) {
                        return response;
                    }
                    
                    lastError = new Error(`HTTP ${response.status}`);
                } catch (err) {
                    console.warn(`API ${baseUrl} failed:`, err.message);
                    lastError = err;
                }
            }
            
            throw lastError || new Error('All API endpoints failed');
        }

        // ==================== 管理员登录 ====================
        function openAdminLogin() {
            document.getElementById('admin-login-modal').classList.add('active');
            document.getElementById('admin-username').focus();
        }

        function closeAdminLogin() {
            document.getElementById('admin-login-modal').classList.remove('active');
            document.getElementById('admin-username').value = '';
            document.getElementById('admin-password').value = '';
            document.getElementById('admin-error').classList.remove('show');
        }

        async function handleAdminLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            const btn = document.getElementById('admin-login-btn');
            const error = document.getElementById('admin-error');
            
            if (!username || !password) {
                error.textContent = 'Please enter username and password';
                error.classList.add('show');
                return;
            }
            
            btn.classList.add('loading');
            btn.disabled = true;
            error.classList.remove('show');
            
            try {
                const res = await adminFetch('/api/admin/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, password })
                });
                
                const data = await res.json();
                
                if (data.success) {
                    localStorage.setItem('admin_token', data.token);
                    closeAdminLogin();
                    showWelcomeAdmin();
                } else {
                    error.textContent = data.message || 'Invalid credentials';
                    error.classList.add('show');
                }
            } catch (err) {
                console.error('Login error:', err);
                error.textContent = 'Network error. Please try again.';
                error.classList.add('show');
            }
            
            btn.classList.remove('loading');
            btn.disabled = false;
        }

        function showWelcomeAdmin() {
            document.getElementById('welcome-admin').classList.add('active');
        }

        function enterAdminPanel() {
            document.getElementById('welcome-admin').classList.remove('active');
            document.getElementById('admin-panel').classList.add('active');
            initMatrixRain();
            loadAdminFiles();
        }

        function adminLogout() {
            document.getElementById('admin-panel').classList.remove('active');
            localStorage.removeItem('admin_token');
            stopMatrixRain();
            showAdminToast('Logged out successfully');
        }

        // ==================== Matrix雨效果 ====================
        let matrixAnimationId = null;

        function initMatrixRain() {
            const canvas = document.getElementById('matrix-canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // 更密集：间距从20改为14
            const fontSize = 14;
            const columns = Math.floor(canvas.width / fontSize);
            const drops = [];
            
            for (let i = 0; i < columns; i++) {
                drops[i] = Math.floor(Math.random() * canvas.height / fontSize);
            }
            
            // 只用 0 和 1
            const chars = '01';
            
            function draw() {
                // 更慢的淡出效果，让字符持续更久
                ctx.fillStyle = 'rgba(0, 0, 0, 0.03)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.font = `${fontSize}px Space Mono`;
                
                for (let i = 0; i < drops.length; i++) {
                    const char = chars[Math.floor(Math.random() * chars.length)];
                    
                    // 随机亮度，整体降低对比度
                    const brightness = Math.floor(Math.random() * 60) + 30; // 30-90 范围，更柔和
                    ctx.fillStyle = `rgb(0, ${brightness}, ${Math.floor(brightness * 0.4)})`;
                    
                    ctx.fillText(char, i * fontSize, drops[i] * fontSize);
                    
                    if (drops[i] * fontSize > canvas.height && Math.random() > 0.95) {
                        drops[i] = 0;
                    }
                    drops[i]++;
                }
                
                matrixAnimationId = requestAnimationFrame(draw);
            }
            
            draw();
            
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        function stopMatrixRain() {
            if (matrixAnimationId) {
                cancelAnimationFrame(matrixAnimationId);
                matrixAnimationId = null;
            }
        }

        // ==================== 文件管理 ====================
        let adminFiles = [];

        async function loadAdminFiles() {
            const token = localStorage.getItem('admin_token');
            
            try {
                const res = await adminFetch('/api/admin/files', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const data = await res.json();
                
                if (data.success) {
                    adminFiles = data.files || [];
                } else {
                    adminFiles = [];
                }
            } catch (err) {
                console.error('Load files error:', err);
                const stored = localStorage.getItem('admin_files');
                adminFiles = stored ? JSON.parse(stored) : [];
            }
            
            renderAdminFiles();
            updateAdminStats();
        }

        function saveAdminFilesLocal() {
            localStorage.setItem('admin_files', JSON.stringify(adminFiles));
        }

        function renderAdminFiles() {
            const tbody = document.getElementById('file-list');
            const emptyState = document.getElementById('empty-state');
            const table = tbody.closest('table');
            
            if (adminFiles.length === 0) {
                table.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            table.style.display = 'table';
            emptyState.style.display = 'none';
            
            tbody.innerHTML = adminFiles.map((file, index) => `
                <tr>
                    <td>
                        <div class="file-name">
                            <div class="file-icon">${getAdminFileIcon(file.type)}</div>
                            <div class="file-info">
                                <span class="file-title">${escapeAdminHtml(file.name)}</span>
                                <span class="file-type">${file.type || 'unknown'}</span>
                            </div>
                        </div>
                    </td>
                    <td class="file-size">${formatAdminFileSize(file.size)}</td>
                    <td class="file-date">${formatAdminFileDate(file.date || file.created_at)}</td>
                    <td>
                        <div class="file-actions">
                            <button class="file-action-btn" onclick="downloadAdminFile('${file.id}', ${index})" title="Download">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7 10 12 15 17 10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                            </button>
                            <button class="file-action-btn delete" onclick="deleteAdminFile('${file.id}', ${index})" title="Delete">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function updateAdminStats() {
            document.getElementById('stat-files').textContent = adminFiles.length;
            
            const totalSize = adminFiles.reduce((sum, f) => sum + (f.size || 0), 0);
            document.getElementById('stat-size').textContent = formatAdminFileSize(totalSize);
            
            const downloads = adminFiles.reduce((sum, f) => sum + (f.downloads || 0), 0);
            document.getElementById('stat-downloads').textContent = downloads;
            
            if (adminFiles.length > 0) {
                const lastFile = adminFiles[0];
                document.getElementById('stat-last').textContent = formatAdminFileDate(lastFile.date || lastFile.created_at);
            } else {
                document.getElementById('stat-last').textContent = '--';
            }
        }

        function getAdminFileIcon(type) {
            const icons = {
                'pdf': '📄', 'doc': '📝', 'docx': '📝', 'xls': '📊', 'xlsx': '📊',
                'ppt': '📽️', 'pptx': '📽️', 'jpg': '🖼️', 'jpeg': '🖼️', 'png': '🖼️',
                'gif': '🖼️', 'mp4': '🎬', 'mp3': '🎵', 'zip': '📦', 'rar': '📦',
                'txt': '📃', 'js': '⚡', 'html': '🌐', 'css': '🎨', 'json': '{}'
            };
            return icons[type?.toLowerCase()] || '📁';
        }

        function formatAdminFileSize(bytes) {
            if (!bytes || bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }

        function formatAdminFileDate(dateStr) {
            if (!dateStr) return '--';
            const date = new Date(dateStr);
            return date.toLocaleDateString('zh-CN', { year: 'numeric', month: 'short', day: 'numeric' });
        }

        function escapeAdminHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ==================== 文件上传 ====================
        function openUploadModal() {
            document.getElementById('upload-modal').classList.add('active');
        }

        function closeUploadModal() {
            document.getElementById('upload-modal').classList.remove('active');
            document.getElementById('file-input').value = '';
        }

        function handleAdminFileSelect(e) {
            handleAdminFiles(e.target.files);
        }

        async function handleAdminFiles(fileList) {
            const token = localStorage.getItem('admin_token');
            let successCount = 0;
            
            for (const file of fileList) {
                try {
                    // 使用 FormData 上传真实文件到 R2
                    const formData = new FormData();
                    formData.append('file', file);
                    
                    const res = await adminFetch('/api/admin/files', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${token}`
                            // 注意：不要设置 Content-Type，让浏览器自动设置 multipart/form-data
                        },
                        body: formData
                    });
                    
                    const data = await res.json();
                    
                    if (data.success) {
                        adminFiles.unshift({
                            id: data.file.id,
                            name: file.name,
                            type: file.name.split('.').pop(),
                            size: file.size,
                            date: new Date().toISOString(),
                            downloads: 0
                        });
                        successCount++;
                    } else {
                        console.error('Upload failed:', data.message);
                        showAdminToast(data.message || 'Upload failed', true);
                    }
                } catch (err) {
                    console.error('Upload error:', err);
                    showAdminToast('Upload error: ' + err.message, true);
                }
            }
            
            saveAdminFilesLocal();
            renderAdminFiles();
            updateAdminStats();
            closeUploadModal();
            
            if (successCount > 0) {
                showAdminToast(`${successCount} file(s) uploaded successfully`);
            }
        }

        async function downloadAdminFile(fileId, index) {
            const token = localStorage.getItem('admin_token');
            const fileName = adminFiles[index]?.name || 'file';
            
            try {
                showAdminToast(`Downloading: ${fileName}`);
                
                // 直接下载文件
                const res = await adminFetch(`/api/admin/files/${fileId}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                // 检查是否是真实文件（有 Content-Disposition）
                const contentDisposition = res.headers.get('Content-Disposition');
                
                if (contentDisposition) {
                    // 真实文件下载
                    const blob = await res.blob();
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = fileName;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    // 更新本地计数
                    if (adminFiles[index]) {
                        adminFiles[index].downloads = (adminFiles[index].downloads || 0) + 1;
                        saveAdminFilesLocal();
                        updateAdminStats();
                    }
                    
                    showAdminToast(`Downloaded: ${fileName}`);
                } else {
                    // 只是元数据
                    const data = await res.json();
                    if (adminFiles[index]) {
                        adminFiles[index].downloads = (adminFiles[index].downloads || 0) + 1;
                        saveAdminFilesLocal();
                        updateAdminStats();
                    }
                    showAdminToast('File info retrieved (no actual file in R2)');
                }
            } catch (err) {
                console.error('Download error:', err);
                showAdminToast('Download failed: ' + err.message, true);
            }
        }

        async function deleteAdminFile(fileId, index) {
            const fileName = adminFiles[index]?.name || 'this file';
            
            if (!confirm(`Delete "${fileName}"?`)) {
                return;
            }
            
            const token = localStorage.getItem('admin_token');
            
            try {
                const res = await adminFetch(`/api/admin/files/${fileId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                const data = await res.json();
                
                if (data.success) {
                    adminFiles.splice(index, 1);
                    saveAdminFilesLocal();
                    renderAdminFiles();
                    updateAdminStats();
                    showAdminToast('File deleted');
                } else {
                    showAdminToast(data.message || 'Delete failed', true);
                }
            } catch (err) {
                console.error('Delete error:', err);
                adminFiles.splice(index, 1);
                saveAdminFilesLocal();
                renderAdminFiles();
                updateAdminStats();
                showAdminToast('File deleted (local)');
            }
        }

        async function refreshAdminFiles() {
            showAdminToast('Refreshing...');
            await loadAdminFiles();
            showAdminToast('Files refreshed');
        }

        // ==================== Toast通知 ====================
        function showAdminToast(message, isError = false) {
            const toast = document.getElementById('admin-toast');
            const msgEl = document.getElementById('toast-message');
            
            if (!toast || !msgEl) return;
            
            msgEl.textContent = message;
            toast.classList.toggle('error', isError);
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // 拖拽上传初始化
        document.addEventListener('DOMContentLoaded', function() {
            const dropzone = document.getElementById('upload-dropzone');
            if (dropzone) {
                dropzone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropzone.classList.add('dragover');
                });
                dropzone.addEventListener('dragleave', () => {
                    dropzone.classList.remove('dragover');
                });
                dropzone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropzone.classList.remove('dragover');
                    handleAdminFiles(e.dataTransfer.files);
                });
            }
        });

        // ESC 关闭模态框
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeAdminLogin();
                closeUploadModal();
            }
        });
    </script>

    <!-- 管理员登录模态框 -->
    <div class="admin-modal-overlay" id="admin-login-modal" onclick="if(event.target===this)closeAdminLogin()">
        <div class="admin-modal">
            <button class="admin-modal-close" onclick="closeAdminLogin()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
            <div class="admin-modal-header">
                <div class="admin-modal-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                </div>
                <h2>Administrator Access</h2>
                <p>Enter your credentials to access the control panel</p>
            </div>
            <div class="admin-error" id="admin-error">Invalid username or password</div>
            <form onsubmit="handleAdminLogin(event)">
                <div class="admin-form-group">
                    <label>Username</label>
                    <input type="text" id="admin-username" placeholder="Enter username" autocomplete="off">
                </div>
                <div class="admin-form-group">
                    <label>Password</label>
                    <input type="password" id="admin-password" placeholder="Enter password">
                </div>
                <button type="submit" class="admin-login-btn" id="admin-login-btn">
                    <span class="btn-text">Access System</span>
                    <div class="spinner"></div>
                </button>
            </form>
        </div>
    </div>

    <!-- 管理员欢迎弹窗 -->
    <div class="welcome-admin-overlay" id="welcome-admin">
        <div class="welcome-admin-box">
            <div class="welcome-admin-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            </div>
            <h1 class="welcome-admin-title">Welcome, 杨浩</h1>
            <p class="welcome-admin-subtitle">System access granted • Full privileges enabled</p>
            <button class="welcome-admin-enter" onclick="enterAdminPanel()">
                [ ENTER SYSTEM ]
            </button>
        </div>
    </div>

    <!-- 管理后台面板 -->
    <div class="admin-panel" id="admin-panel">
        <div class="matrix-bg">
            <canvas class="matrix-canvas" id="matrix-canvas"></canvas>
        </div>
        <div class="admin-content">
            <header class="admin-header">
                <div class="admin-header-left">
                    <div class="admin-logo">
                        <div class="admin-logo-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="3" y1="9" x2="21" y2="9"></line>
                                <line x1="9" y1="21" x2="9" y2="9"></line>
                            </svg>
                        </div>
                        <span class="admin-logo-text">ADMIN_PANEL</span>
                    </div>
                    <div class="admin-status">SYSTEM ONLINE</div>
                </div>
                <div class="admin-header-right">
                    <div class="admin-user">
                        <div class="admin-user-avatar">杨</div>
                        <div class="admin-user-info">
                            <span class="admin-user-name">杨浩</span>
                            <span class="admin-user-role">Super Admin</span>
                        </div>
                    </div>
                    <button class="admin-logout-btn" onclick="adminLogout()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                        Logout
                    </button>
                </div>
            </header>
            <main class="admin-main">
                <h1 class="admin-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                    </svg>
                    FILE_STORAGE
                </h1>
                <p class="admin-subtitle">Manage your files and documents • Upload, download, and organize</p>
                <div class="admin-stats">
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon">📁</div>
                        <div class="admin-stat-value" id="stat-files">0</div>
                        <div class="admin-stat-label">Total Files</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon">💾</div>
                        <div class="admin-stat-value" id="stat-size">0 KB</div>
                        <div class="admin-stat-label">Storage Used</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon">📊</div>
                        <div class="admin-stat-value" id="stat-downloads">0</div>
                        <div class="admin-stat-label">Downloads</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon">🕐</div>
                        <div class="admin-stat-value" id="stat-last">--</div>
                        <div class="admin-stat-label">Last Upload</div>
                    </div>
                </div>
                <div class="admin-storage">
                    <div class="admin-storage-header">
                        <div class="admin-storage-title">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                            </svg>
                            FILES
                        </div>
                        <div class="admin-storage-actions">
                            <button class="admin-btn admin-btn-secondary" onclick="refreshAdminFiles()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="23 4 23 10 17 10"></polyline>
                                    <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                                </svg>
                                Refresh
                            </button>
                            <button class="admin-btn admin-btn-primary" onclick="openUploadModal()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="17 8 12 3 7 8"></polyline>
                                    <line x1="12" y1="3" x2="12" y2="15"></line>
                                </svg>
                                Upload
                            </button>
                        </div>
                    </div>
                    <div id="file-list-container">
                        <table class="admin-file-table">
                            <thead>
                                <tr>
                                    <th>File Name</th>
                                    <th>Size</th>
                                    <th>Upload Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="file-list"></tbody>
                        </table>
                        <div class="admin-empty" id="empty-state" style="display: none;">
                            <div class="admin-empty-icon">📂</div>
                            <h3>No files yet</h3>
                            <p>Upload your first file to get started</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 上传模态框 -->
    <div class="upload-modal-overlay" id="upload-modal" onclick="if(event.target===this)closeUploadModal()">
        <div class="upload-modal">
            <h3>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                Upload Files
            </h3>
            <div class="upload-dropzone" id="upload-dropzone" onclick="document.getElementById('file-input').click()">
                <div class="upload-dropzone-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                </div>
                <h4>Drop files here or click to browse</h4>
                <p>Supports all file types • Max 50MB per file</p>
                <input type="file" id="file-input" multiple onchange="handleAdminFileSelect(event)">
            </div>
            <div class="upload-modal-actions">
                <button class="admin-btn admin-btn-secondary" onclick="closeUploadModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Toast通知 -->
    <div class="admin-toast" id="admin-toast">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <span id="toast-message">Operation successful</span>
    </div>

</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGI Era - Liquid Glass</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --glass-bg: rgba(255,255,255,0.08);
            --glass-border: rgba(255,255,255,0.12);
            --glass-blur: 24px;
            --glass-shadow: 0 8px 32px rgba(0,0,0,0.3);
            --primary: #6C63FF;
            --primary-glow: rgba(108,99,255,0.4);
            --secondary: #00D4AA;
            --accent: #FF6B9D;
            --text-primary: #ffffff;
            --text-secondary: rgba(255,255,255,0.7);
            --text-muted: rgba(255,255,255,0.4);
            --bg-dark: #0a0a1a;
            --bg-gradient: linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        [data-theme="light"] {
            --glass-bg: rgba(255,255,255,0.45);
            --glass-border: rgba(255,255,255,0.6);
            --glass-shadow: 0 8px 32px rgba(0,0,0,0.1);
            --text-primary: #1a1a2e;
            --text-secondary: rgba(26,26,46,0.7);
            --text-muted: rgba(26,26,46,0.4);
            --bg-dark: #e8e8f0;
            --bg-gradient: linear-gradient(135deg, #e8e8f0 0%, #d0d0e8 50%, #e8e8f0 100%);
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-gradient);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            transition: var(--transition);
        }
        /* === 背景动画粒子 === */
        .bg-orbs {
            position: fixed; top:0; left:0; width:100%; height:100%;
            pointer-events: none; z-index:0; overflow:hidden;
        }
        .bg-orbs .orb {
            position: absolute; border-radius: 50%; filter: blur(80px);
            animation: floatOrb 20s ease-in-out infinite;
        }
        .bg-orbs .orb:nth-child(1) {
            width:500px;height:500px;background:rgba(108,99,255,0.15);
            top:-10%;left:-5%;animation-delay:0s;
        }
        .bg-orbs .orb:nth-child(2) {
            width:400px;height:400px;background:rgba(0,212,170,0.1);
            top:50%;right:-10%;animation-delay:-7s;
        }
        .bg-orbs .orb:nth-child(3) {
            width:350px;height:350px;background:rgba(255,107,157,0.1);
            bottom:-5%;left:30%;animation-delay:-14s;
        }
        @keyframes floatOrb {
            0%,100%{transform:translate(0,0) scale(1);}
            33%{transform:translate(60px,-80px) scale(1.1);}
            66%{transform:translate(-40px,60px) scale(0.9);}
        }

        /* === 闪屏 === */
        #splash-screen {
            position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;
            background:linear-gradient(135deg,#0a0a1a,#1a1a3e);
            display:flex;flex-direction:column;align-items:center;justify-content:center;
            transition:opacity 0.8s ease, visibility 0.8s ease;
        }
        #splash-screen.hidden { opacity:0; visibility:hidden; pointer-events:none; }
        .splash-logo {
            font-size:3rem;font-weight:900;
            background:linear-gradient(135deg,var(--primary),var(--secondary));
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
            animation:splashPulse 2s ease-in-out infinite;
        }
        .splash-subtitle { color:var(--text-secondary);margin-top:12px;font-size:1rem; }
        .splash-bar {
            width:200px;height:3px;background:rgba(255,255,255,0.1);border-radius:3px;
            margin-top:30px;overflow:hidden;
        }
        .splash-bar-inner {
            width:0%;height:100%;border-radius:3px;
            background:linear-gradient(90deg,var(--primary),var(--secondary));
            animation:splashLoad 2s ease-in-out forwards;
        }
        @keyframes splashPulse { 0%,100%{opacity:1;}50%{opacity:0.6;} }
        @keyframes splashLoad { 0%{width:0%;}100%{width:100%;} }

        /* === 玻璃态通用 === */
        .glass {
            background:var(--glass-bg);
            backdrop-filter:blur(var(--glass-blur));
            -webkit-backdrop-filter:blur(var(--glass-blur));
            border:1px solid var(--glass-border);
            border-radius:16px;
            box-shadow:var(--glass-shadow);
            transition:var(--transition);
        }
        .glass:hover {
            background:rgba(255,255,255,0.12);
            border-color:rgba(255,255,255,0.2);
            box-shadow:0 12px 40px rgba(0,0,0,0.4);
            transform:translateY(-2px);
        }
        [data-theme="light"] .glass:hover {
            background:rgba(255,255,255,0.6);
        }

        /* === 导航栏 === */
        .navbar {
            position:fixed;top:0;left:0;width:100%;z-index:1000;
            padding:16px 40px;
            display:flex;align-items:center;justify-content:space-between;
            background:rgba(10,10,26,0.6);
            backdrop-filter:blur(20px);
            border-bottom:1px solid var(--glass-border);
            transition:var(--transition);
        }
        [data-theme="light"] .navbar { background:rgba(255,255,255,0.6); }
        .navbar.scrolled {
            padding:10px 40px;
            background:rgba(10,10,26,0.85);
        }
        [data-theme="light"] .navbar.scrolled { background:rgba(255,255,255,0.85); }
        .nav-brand {
            font-size:1.5rem;font-weight:800;
            background:linear-gradient(135deg,var(--primary),var(--secondary));
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
            cursor:pointer;
        }
        .nav-links { display:flex; align-items:center; gap:8px; list-style:none; }
        .nav-links a {
            color:var(--text-secondary);text-decoration:none;
            padding:8px 16px;border-radius:10px;font-size:0.9rem;font-weight:500;
            transition:var(--transition);position:relative;
        }
        .nav-links a:hover, .nav-links a.active {
            color:var(--text-primary);background:var(--glass-bg);
        }
        .nav-right { display:flex;align-items:center;gap:12px; }
        .theme-toggle, .nav-btn {
            background:var(--glass-bg);border:1px solid var(--glass-border);
            color:var(--text-primary);padding:8px 12px;border-radius:10px;
            cursor:pointer;font-size:0.85rem;transition:var(--transition);
            backdrop-filter:blur(10px);
        }
        .theme-toggle:hover, .nav-btn:hover {
            background:rgba(255,255,255,0.15);transform:translateY(-1px);
        }
        .nav-btn-primary {
            background:linear-gradient(135deg,var(--primary),#8B5CF6);
            border:none;color:#fff;padding:8px 20px;border-radius:10px;
            cursor:pointer;font-size:0.85rem;font-weight:600;transition:var(--transition);
        }
        .nav-btn-primary:hover {
            box-shadow:0 4px 20px var(--primary-glow);transform:translateY(-1px);
        }
        .mobile-toggle {
            display:none;background:none;border:none;color:var(--text-primary);
            font-size:1.4rem;cursor:pointer;
        }
        @media(max-width:768px) {
            .navbar { padding:12px 20px; }
            .nav-links { 
                display:none;position:fixed;top:60px;left:0;width:100%;
                flex-direction:column;padding:20px;gap:4px;
                background:rgba(10,10,26,0.95);backdrop-filter:blur(20px);
                border-bottom:1px solid var(--glass-border);
            }
            [data-theme="light"] .nav-links { background:rgba(255,255,255,0.95); }
            .nav-links.open { display:flex; }
            .nav-links a { padding:12px 16px; }
            .mobile-toggle { display:block; }
            .nav-right .theme-toggle-text, .nav-right .nav-btn, .nav-right .nav-btn-primary {
                display:none;
            }
        }

        /* === 页面区域 === */
        .page { display:none; min-height:100vh; padding-top:80px; }
        .page.active { display:block; }

        /* === Hero === */
        .hero {
            min-height:90vh;display:flex;flex-direction:column;
            align-items:center;justify-content:center;text-align:center;
            padding:60px 20px;position:relative;
        }
        .hero-badge {
            display:inline-flex;align-items:center;gap:8px;
            padding:6px 16px;border-radius:50px;font-size:0.8rem;
            background:var(--glass-bg);border:1px solid var(--glass-border);
            backdrop-filter:blur(10px);color:var(--text-secondary);
            margin-bottom:24px;
        }
        .hero-badge .dot {
            width:6px;height:6px;border-radius:50%;
            background:var(--secondary);animation:blink 1.5s infinite;
        }
        @keyframes blink { 0%,100%{opacity:1;}50%{opacity:0.3;} }
        .hero h1 {
            font-size:clamp(2.5rem,6vw,4.5rem);font-weight:900;
            line-height:1.1;margin-bottom:20px;
        }
        .hero h1 .gradient-text {
            background:linear-gradient(135deg,var(--primary),var(--secondary),var(--accent));
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
        }
        .hero p {
            font-size:1.1rem;color:var(--text-secondary);
            max-width:600px;margin-bottom:36px;line-height:1.7;
        }
        .hero-buttons { display:flex;gap:12px;flex-wrap:wrap;justify-content:center; }
        .btn-hero {
            padding:14px 32px;border-radius:12px;font-size:0.95rem;
            font-weight:600;cursor:pointer;transition:var(--transition);
            text-decoration:none;border:none;display:inline-flex;align-items:center;gap:8px;
        }
        .btn-hero-primary {
            background:linear-gradient(135deg,var(--primary),#8B5CF6);
            color:#fff;box-shadow:0 4px 20px var(--primary-glow);
        }
        .btn-hero-primary:hover { transform:translateY(-2px);box-shadow:0 8px 30px var(--primary-glow); }
        .btn-hero-secondary {
            background:var(--glass-bg);color:var(--text-primary);
            border:1px solid var(--glass-border);
            backdrop-filter:blur(10px);
        }
        .btn-hero-secondary:hover { background:rgba(255,255,255,0.15);transform:translateY(-2px); }
        .hero-stats {
            display:flex;gap:40px;margin-top:60px;flex-wrap:wrap;justify-content:center;
        }
        .hero-stat { text-align:center; }
        .hero-stat .number {
            font-size:2rem;font-weight:800;
            background:linear-gradient(135deg,var(--primary),var(--secondary));
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
        }
        .hero-stat .label { font-size:0.8rem;color:var(--text-muted);margin-top:4px; }

        /* === 特性卡片 === */
        .section { padding:80px 40px; max-width:1200px; margin:0 auto; }
        .section-header { text-align:center; margin-bottom:60px; }
        .section-header h2 {
            font-size:2.5rem;font-weight:800;margin-bottom:12px;
        }
        .section-header h2 .gradient-text {
            background:linear-gradient(135deg,var(--primary),var(--secondary));
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
        }
        .section-header p { color:var(--text-secondary);font-size:1rem;max-width:500px;margin:0 auto; }
        .features-grid {
            display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
            gap:24px;
        }
        .feature-card {
            padding:32px;position:relative;overflow:hidden;
        }
        .feature-card .card-icon {
            width:50px;height:50px;border-radius:12px;
            display:flex;align-items:center;justify-content:center;
            font-size:1.3rem;margin-bottom:20px;
            background:linear-gradient(135deg,var(--primary),var(--secondary));
            color:#fff;
        }
        .feature-card h3 { font-size:1.2rem;font-weight:700;margin-bottom:10px; }
        .feature-card p { color:var(--text-secondary);font-size:0.9rem;line-height:1.6; }
        .feature-card .card-glow {
            position:absolute;top:-50%;right:-50%;width:200px;height:200px;
            border-radius:50%;filter:blur(80px);opacity:0;
            transition:opacity 0.5s;pointer-events:none;
        }
        .feature-card:hover .card-glow { opacity:0.3; }
        .feature-card:nth-child(1) .card-glow { background:var(--primary); }
        .feature-card:nth-child(2) .card-glow { background:var(--secondary); }
        .feature-card:nth-child(3) .card-glow { background:var(--accent); }
        .feature-card:nth-child(4) .card-glow { background:#FFD700; }
        .feature-card:nth-child(5) .card-glow { background:#00BFFF; }
        .feature-card:nth-child(6) .card-glow { background:#FF6347; }

        /* === ChatBot === */
        .chatbot-container {
            max-width:900px;margin:0 auto;padding:20px 20px 40px;
        }
        .chat-model-selector {
            display:flex;gap:10px;margin-bottom:20px;justify-content:center;flex-wrap:wrap;
        }
        .model-btn {
            padding:8px 20px;border-radius:10px;border:1px solid var(--glass-border);
            background:var(--glass-bg);color:var(--text-secondary);cursor:pointer;
            font-size:0.85rem;transition:var(--transition);backdrop-filter:blur(10px);
        }
        .model-btn.active {
            background:linear-gradient(135deg,var(--primary),#8B5CF6);
            color:#fff;border-color:transparent;
        }
        .chat-box {
            height:55vh;overflow-y:auto;padding:24px;margin-bottom:16px;
        }
        .chat-box::-webkit-scrollbar { width:4px; }
        .chat-box::-webkit-scrollbar-thumb { background:var(--glass-border);border-radius:4px; }
        .chat-message {
            display:flex;gap:12px;margin-bottom:20px;
            animation:msgIn 0.3s ease-out;
        }
        @keyframes msgIn { from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:none;} }
        .chat-message.user { flex-direction:row-reverse; }
        .chat-avatar {
            width:36px;height:36px;border-radius:10px;
            display:flex;align-items:center;justify-content:center;
            font-size:0.85rem;flex-shrink:0;
        }
        .chat-message.bot .chat-avatar {
            background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;
        }
        .chat-message.user .chat-avatar {
            background:linear-gradient(135deg,var(--accent),#FF8C69);color:#fff;
        }
        .chat-bubble {
            max-width:75%;padding:14px 18px;border-radius:14px;
            font-size:0.9rem;line-height:1.6;
        }
        .chat-message.bot .chat-bubble {
            background:var(--glass-bg);border:1px solid var(--glass-border);
            color:var(--text-primary);
            border-top-left-radius:4px;
        }
        .chat-message.user .chat-bubble {
            background:linear-gradient(135deg,var(--primary),#8B5CF6);
            color:#fff;border-top-right-radius:4px;
        }
        .chat-input-area {
            display:flex;gap:10px;
        }
        .chat-input-area input {
            flex:1;padding:14px 18px;border-radius:12px;
            background:var(--glass-bg);border:1px solid var(--glass-border);
            color:var(--text-primary);font-size:0.9rem;
            backdrop-filter:blur(10px);outline:none;
            transition:var(--transition);
        }
        .chat-input-area input:focus { border-color:var(--primary); }
        .chat-input-area button {
            padding:14px 24px;border-radius:12px;border:none;
            background:linear-gradient(135deg,var(--primary),#8B5CF6);
            color:#fff;cursor:pointer;font-size:0.9rem;font-weight:600;
            transition:var(--transition);
        }
        .chat-input-area button:hover { box-shadow:0 4px 20px var(--primary-glow); }

        /* === Super Kit === */
        .kit-search {
            max-width:500px;margin:0 auto 40px;position:relative;
        }
        .kit-search input {
            width:100%;padding:14px 18px 14px 44px;border-radius:12px;
            background:var(--glass-bg);border:1px solid var(--glass-border);
            color:var(--text-primary);font-size:0.9rem;outline:none;
            backdrop-filter:blur(10px);transition:var(--transition);
        }
        .kit-search input:focus { border-color:var(--primary); }
        .kit-search i {
            position:absolute;left:16px;top:50%;transform:translateY(-50%);
            color:var(--text-muted);
        }
        .kit-grid {
            display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
            gap:16px;
        }
        .kit-card {
            padding:24px 16px;text-align:center;cursor:pointer;
        }
        .kit-card .kit-icon {
            font-size:1.8rem;margin-bottom:12px;
            background:linear-gradient(135deg,var(--primary),var(--secondary));
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
        }
        .kit-card h4 { font-size:0.85rem;font-weight:600;margin-bottom:4px; }
        .kit-card p { font-size:0.7rem;color:var(--text-muted); }

        /* === 工具弹窗 === */
        .tool-modal {
            display:none;position:fixed;top:0;left:0;width:100%;height:100%;
            z-index:5000;align-items:center;justify-content:center;
            background:rgba(0,0,0,0.6);backdrop-filter:blur(8px);
        }
        .tool-modal.open { display:flex; }
        .tool-modal-content {
            width:90%;max-width:600px;max-height:80vh;overflow-y:auto;
            padding:32px;position:relative;
        }
        .tool-modal-content h3 { font-size:1.3rem;font-weight:700;margin-bottom:20px; }
        .tool-close {
            position:absolute;top:16px;right:16px;background:none;border:none;
            color:var(--text-secondary);font-size:1.2rem;cursor:pointer;
        }
        .tool-input {
            width:100%;padding:12px 16px;border-radius:10px;margin-bottom:12px;
            background:var(--glass-bg);border:1px solid var(--glass-border);
            color:var(--text-primary);font-size:0.9rem;outline:none;
        }
        .tool-input:focus { border-color:var(--primary); }
        .tool-btn {
            padding:10px 24px;border-radius:10px;border:none;
            background:linear-gradient(135deg,var(--primary),#8B5CF6);
            color:#fff;cursor:pointer;font-weight:600;transition:var(--transition);
        }
        .tool-btn:hover { box-shadow:0 4px 20px var(--primary-glow); }
        .tool-result {
            margin-top:16px;padding:16px;border-radius:10px;
            background:rgba(108,99,255,0.08);border:1px solid rgba(108,99,255,0.15);
            font-size:0.9rem;line-height:1.6;min-height:40px;
            word-break:break-all;
        }

        /* === About === */
        .about-section { margin-bottom:60px; }
        .about-grid {
            display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
            gap:24px;
        }
        .about-card { padding:28px; }
        .about-card h3 { font-size:1.1rem;font-weight:700;margin-bottom:10px; }
        .about-card p { color:var(--text-secondary);font-size:0.9rem;line-height:1.7; }
        .team-grid {
            display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
            gap:20px;
        }
        .team-card {
            padding:24px;text-align:center;
        }
        .team-avatar {
            width:70px;height:70px;border-radius:50%;
            background:linear-gradient(135deg,var(--primary),var(--secondary));
            display:flex;align-items:center;justify-content:center;
            font-size:1.5rem;color:#fff;margin:0 auto 14px;
        }
        .team-card h4 { font-size:1rem;font-weight:600;margin-bottom:4px; }
        .team-card .role { color:var(--text-muted);font-size:0.8rem; }
        .timeline {
            position:relative;padding-left:30px;
            border-left:2px solid var(--glass-border);
        }
        .timeline-item {
            position:relative;margin-bottom:32px;padding-left:20px;
        }
        .timeline-item::before {
            content:'';position:absolute;left:-36px;top:6px;
            width:12px;height:12px;border-radius:50%;
            background:linear-gradient(135deg,var(--primary),var(--secondary));
        }
        .timeline-item .year {
            font-size:0.8rem;color:var(--primary);font-weight:700;margin-bottom:4px;
        }
        .timeline-item h4 { font-size:1rem;font-weight:600;margin-bottom:4px; }
        .timeline-item p { color:var(--text-secondary);font-size:0.85rem; }

        /* === Research === */
        .research-list { display:flex;flex-direction:column;gap:16px; }
        .research-card {
            padding:24px;display:flex;gap:20px;align-items:flex-start;
        }
        .research-card .r-icon {
            width:44px;height:44px;border-radius:10px;flex-shrink:0;
            background:linear-gradient(135deg,var(--primary),var(--secondary));
            display:flex;align-items:center;justify-content:center;
            color:#fff;font-size:1rem;
        }
        .research-card h4 { font-size:1rem;font-weight:600;margin-bottom:6px; }
        .research-card p { color:var(--text-secondary);font-size:0.85rem;line-height:1.6; }
        .research-card .meta {
            font-size:0.75rem;color:var(--text-muted);margin-top:8px;
        }

        /* === 登录/注册弹窗 === */
        .auth-modal {
            display:none;position:fixed;top:0;left:0;width:100%;height:100%;
            z-index:6000;align-items:center;justify-content:center;
            background:rgba(0,0,0,0.6);backdrop-filter:blur(8px);
        }
        .auth-modal.open { display:flex; }
        .auth-content {
            width:90%;max-width:420px;padding:36px;position:relative;
        }
        .auth-content h2 {
            font-size:1.5rem;font-weight:800;margin-bottom:6px;text-align:center;
        }
        .auth-content .auth-sub {
            color:var(--text-secondary);font-size:0.85rem;text-align:center;margin-bottom:24px;
        }
        .auth-field { margin-bottom:16px; }
        .auth-field label {
            display:block;font-size:0.8rem;font-weight:600;
            color:var(--text-secondary);margin-bottom:6px;
        }
        .auth-field input {
            width:100%;padding:12px 16px;border-radius:10px;
            background:var(--glass-bg);border:1px solid var(--glass-border);
            color:var(--text-primary);font-size:0.9rem;outline:none;
            transition:var(--transition);
        }
        .auth-field input:focus { border-color:var(--primary); }
        .auth-submit {
            width:100%;padding:14px;border-radius:12px;border:none;
            background:linear-gradient(135deg,var(--primary),#8B5CF6);
            color:#fff;font-size:0.95rem;font-weight:700;cursor:pointer;
            margin-top:8px;transition:var(--transition);
        }
        .auth-submit:hover { box-shadow:0 4px 20px var(--primary-glow); }
        .auth-footer {
            text-align:center;margin-top:16px;font-size:0.8rem;color:var(--text-muted);
        }
        .auth-footer a {
            color:var(--primary);cursor:pointer;text-decoration:none;
        }
        .auth-close {
            position:absolute;top:16px;right:16px;background:none;border:none;
            color:var(--text-secondary);font-size:1.2rem;cursor:pointer;
        }

        /* === 用户设置 === */
        .settings-container {
            max-width:800px;margin:0 auto;padding:20px 20px 60px;
        }
        .settings-section {
            padding:28px;margin-bottom:20px;
        }
        .settings-section h3 {
            font-size:1.1rem;font-weight:700;margin-bottom:20px;
            padding-bottom:12px;border-bottom:1px solid var(--glass-border);
        }
        .settings-row {
            display:flex;justify-content:space-between;align-items:center;
            padding:12px 0;border-bottom:1px solid rgba(255,255,255,0.05);
        }
        .settings-row:last-child { border-bottom:none; }
        .settings-row .label { font-size:0.9rem; }
        .settings-row .value { color:var(--text-secondary);font-size:0.85rem; }
        .settings-row input[type="text"],
        .settings-row input[type="email"],
        .settings-row input[type="password"] {
            padding:8px 12px;border-radius:8px;
            background:var(--glass-bg);border:1px solid var(--glass-border);
            color:var(--text-primary);font-size:0.85rem;outline:none;
            width:220px;transition:var(--transition);
        }
        .settings-row input:focus { border-color:var(--primary); }
        .toggle-switch {
            width:44px;height:24px;border-radius:12px;
            background:rgba(255,255,255,0.15);position:relative;cursor:pointer;
            transition:var(--transition);
        }
        .toggle-switch.on { background:var(--primary); }
        .toggle-switch::after {
            content:'';position:absolute;top:3px;left:3px;
            width:18px;height:18px;border-radius:50%;
            background:#fff;transition:var(--transition);
        }
        .toggle-switch.on::after { left:23px; }

        /* === 页脚 === */
        .footer {
            padding:40px;text-align:center;
            border-top:1px solid var(--glass-border);
            margin-top:60px;
        }
        .footer-links { display:flex;justify-content:center;gap:24px;flex-wrap:wrap;margin-bottom:16px; }
        .footer-links a {
            color:var(--text-secondary);text-decoration:none;font-size:0.85rem;
            transition:var(--transition);
        }
        .footer-links a:hover { color:var(--text-primary); }
        .footer p { color:var(--text-muted);font-size:0.8rem; }
        .visitor-count {
            display:inline-flex;align-items:center;gap:6px;
            padding:4px 14px;border-radius:20px;font-size:0.75rem;
            background:var(--glass-bg);border:1px solid var(--glass-border);
            color:var(--text-muted);margin-top:12px;
        }

        /* === 滚动动画 === */
        .fade-up {
            opacity:0;transform:translateY(30px);
            transition:opacity 0.6s ease,transform 0.6s ease;
        }
        .fade-up.visible { opacity:1;transform:none; }

        /* === 通知提示 === */
        .toast {
            position:fixed;top:90px;right:20px;z-index:9000;
            padding:14px 24px;border-radius:12px;
            background:var(--glass-bg);border:1px solid var(--glass-border);
            backdrop-filter:blur(20px);color:var(--text-primary);
            font-size:0.85rem;box-shadow:var(--glass-shadow);
            transform:translateX(120%);transition:transform 0.4s ease;
        }
        .toast.show { transform:translateX(0); }
        .toast.success { border-left:3px solid var(--secondary); }
        .toast.error { border-left:3px solid var(--accent); }

        /* === 响应式 === */
        @media(max-width:768px) {
            .section { padding:40px 16px; }
            .hero h1 { font-size:2rem; }
            .hero-stats { gap:20px; }
            .features-grid { grid-template-columns:1fr; }
            .kit-grid { grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); }
            .chat-box { height:45vh; }
            .settings-row { flex-direction:column;align-items:flex-start;gap:8px; }
            .settings-row input { width:100%; }
            .footer-links { gap:12px; }
        }

        /* === 文档页面 === */
        .docs-container {
            max-width:900px;margin:0 auto;padding:20px 20px 60px;
        }
        .docs-block {
            padding:28px;margin-bottom:20px;
        }
        .docs-block h3 {
            font-size:1.15rem;font-weight:700;margin-bottom:16px;
            display:flex;align-items:center;gap:10px;
        }
        .docs-block h3 i { color:var(--primary); }
        .docs-block p, .docs-block li {
            color:var(--text-secondary);font-size:0.9rem;line-height:1.8;
        }
        .docs-block ul { padding-left:20px; }
        .docs-block code {
            display:block;padding:16px;margin:12px 0;border-radius:10px;
            background:rgba(0,0,0,0.3);font-family:'Courier New',monospace;
            font-size:0.8rem;color:var(--secondary);overflow-x:auto;
            border:1px solid var(--glass-border);
        }
        [data-theme="light"] .docs-block code {
            background:rgba(0,0,0,0.05);color:#6C63FF;
        }

        /* 隐藏admin入口但保留功能 */
        .admin-panel {
            max-width:900px;margin:0 auto;padding:20px 20px 60px;
        }
        .admin-file-list {
            display:flex;flex-direction:column;gap:10px;margin-top:16px;
        }
        .admin-file-item {
            padding:14px 18px;border-radius:10px;
            background:var(--glass-bg);border:1px solid var(--glass-border);
            display:flex;justify-content:space-between;align-items:center;
            font-size:0.85rem;
        }
        .admin-file-item .file-name { display:flex;align-items:center;gap:10px; }
        .admin-file-item .file-actions { display:flex;gap:8px; }
        .admin-file-item .file-actions button {
            padding:6px 12px;border-radius:8px;border:none;
            font-size:0.75rem;cursor:pointer;transition:var(--transition);
        }
        .admin-file-item .file-actions .btn-del {
            background:rgba(255,107,157,0.15);color:var(--accent);
        }
        .admin-file-item .file-actions .btn-dl {
            background:rgba(108,99,255,0.15);color:var(--primary);
        }
    </style>
</head>
<body>
    <!-- 背景粒子 -->
    <div class="bg-orbs">
        <div class="orb"></div>
        <div class="orb"></div>
        <div class="orb"></div>
    </div>

    <!-- 闪屏 -->
    <div id="splash-screen">
        <div class="splash-logo">AGI Era</div>
        <div class="splash-subtitle">Initializing Liquid Glass Interface...</div>
        <div class="splash-bar"><div class="splash-bar-inner"></div></div>
    </div>

    <!-- Toast通知 -->
    <div id="toast" class="toast"></div>

    <!-- 导航栏 -->
    <nav class="navbar" id="navbar">
        <div class="nav-brand" onclick="navigateTo('home')">AGI Era</div>
        <button class="mobile-toggle" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </button>
        <ul class="nav-links" id="navLinks">
            <li><a href="#" class="active" data-page="home" onclick="navigateTo('home')"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="#" data-page="research" onclick="navigateTo('research')"><i class="fas fa-flask"></i> Research</a></li>
            <li><a href="#" data-page="chatbot" onclick="navigateTo('chatbot')"><i class="fas fa-robot"></i> ChatBot</a></li>
            <li><a href="#" data-page="kit" onclick="navigateTo('kit')"><i class="fas fa-toolbox"></i> Kit</a></li>
            <li><a href="#" data-page="docs" onclick="navigateTo('docs')"><i class="fas fa-book"></i> Docs</a></li>
            <li><a href="#" data-page="about" onclick="navigateTo('about')"><i class="fas fa-info-circle"></i> About</a></li>
        </ul>
        <div class="nav-right">
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme">
                <i class="fas fa-moon" id="themeIcon"></i>
            </button>
            <button class="nav-btn" onclick="openAuth('login')" id="loginBtn">
                <i class="fas fa-sign-in-alt"></i> Log In
            </button>
            <button class="nav-btn-primary" onclick="openAuth('signup')" id="signupBtn">Sign Up</button>
            <button class="nav-btn" onclick="navigateTo('settings')" id="profileBtn" style="display:none;">
                <i class="fas fa-user-circle"></i> <span id="profileName">User</span>
            </button>
            <button class="nav-btn" onclick="logoutUser()" id="logoutBtn" style="display:none;">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </nav>

    <!-- ========== HOME ========== -->
    <div class="page active" id="page-home">
        <section class="hero">
            <div class="hero-badge fade-up">
                <span class="dot"></span> AGI Research Lab — Now Live
            </div>
            <h1 class="fade-up">
                Welcome to the<br>
                <span class="gradient-text">AGI Era</span>
            </h1>
            <p class="fade-up">
                Exploring the frontiers of Artificial General Intelligence through cutting-edge research, open-source tools, and an intelligent assistant built for the next era of computing.
            </p>
            <div class="hero-buttons fade-up">
                <button class="btn-hero btn-hero-primary" onclick="navigateTo('chatbot')">
                    <i class="fas fa-robot"></i> Try ChatBot
                </button>
                <button class="btn-hero btn-hero-secondary" onclick="navigateTo('kit')">
                    <i class="fas fa-toolbox"></i> Super Kit
                </button>
                <button class="btn-hero btn-hero-secondary" onclick="navigateTo('research')">
                    <i class="fas fa-flask"></i> Research
                </button>
            </div>
            <div class="hero-stats fade-up">
                <div class="hero-stat">
                    <div class="number" id="stat1">0</div>
                    <div class="label">AI Models</div>
                </div>
                <div class="hero-stat">
                    <div class="number" id="stat2">0</div>
                    <div class="label">Tool Kits</div>
                </div>
                <div class="hero-stat">
                    <div class="number" id="stat3">0</div>
                    <div class="label">Research Papers</div>
                </div>
                <div class="hero-stat">
                    <div class="number" id="stat4">0</div>
                    <div class="label">Contributors</div>
                </div>
            </div>
        </section>

        <!-- 特性 -->
        <section class="section">
            <div class="section-header fade-up">
                <h2>Core <span class="gradient-text">Features</span></h2>
                <p>Empowering the future with intelligent tools and research</p>
            </div>
            <div class="features-grid">
                <div class="feature-card glass fade-up">
                    <div class="card-glow"></div>
                    <div class="card-icon"><i class="fas fa-brain"></i></div>
                    <h3>Advanced AI Models</h3>
                    <p>Access state-of-the-art language models including Qwen and DeepSeek for intelligent conversations and complex reasoning tasks.</p>
                </div>
                <div class="feature-card glass fade-up">
                    <div class="card-glow"></div>
                    <div class="card-icon"><i class="fas fa-toolbox"></i></div>
                    <h3>Super Kit Tools</h3>
                    <p>26+ productivity tools including speed test, ping monitor, IP lookup, QR generator, translator, calculator and more — all in one place.</p>
                </div>
                <div class="feature-card glass fade-up">
                    <div class="card-glow"></div>
                    <div class="card-icon"><i class="fas fa-shield-alt"></i></div>
                    <h3>Privacy First</h3>
                    <p>Your data stays yours. We implement end-to-end encryption and zero-knowledge architecture to protect your privacy.</p>
                </div>
                <div class="feature-card glass fade-up">
                    <div class="card-glow"></div>
                    <div class="card-icon"><i class="fas fa-code"></i></div>
                    <h3>Open Source</h3>
                    <p>Built on open-source foundations. Contribute, fork, and customize — the source code is available for the community.</p>
                </div>
                <div class="feature-card glass fade-up">
                    <div class="card-glow"></div>
                    <div class="card-icon"><i class="fas fa-globe"></i></div>
                    <h3>Multi-Language</h3>
                    <p>Supporting multiple languages with real-time translation capabilities powered by advanced neural machine translation.</p>
                </div>
                <div class="feature-card glass fade-up">
                    <div class="card-glow"></div>
                    <div class="card-icon"><i class="fas fa-chart-line"></i></div>
                    <h3>Research Hub</h3>
                    <p>Access our latest research papers, technical reports, and academic publications on AGI and related fields.</p>
                </div>
            </div>
        </section>
    </div>

    <!-- ========== CHATBOT ========== -->
    <div class="page" id="page-chatbot">
        <section class="section">
            <div class="section-header fade-up">
                <h2><span class="gradient-text">AI ChatBot</span></h2>
                <p>Chat with advanced AI models in real-time</p>
            </div>
        </section>
        <div class="chatbot-container">
            <div class="chat-model-selector fade-up">
                <button class="model-btn active" data-model="qwen" onclick="switchModel('qwen')">
                    <i class="fas fa-star"></i> Qwen
                </button>
                <button class="model-btn" data-model="deepseek" onclick="switchModel('deepseek')">
                    <i class="fas fa-bolt"></i> DeepSeek
                </button>
            </div>
            <div class="chat-box glass" id="chatBox">
                <div class="chat-message bot">
                    <div class="chat-avatar"><i class="fas fa-robot"></i></div>
                    <div class="chat-bubble">Hello! I'm your AI assistant. Choose a model and start chatting. How can I help you today?</div>
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chatInput" placeholder="Type your message..." onkeypress="if(event.key==='Enter')sendChat()">
                <button onclick="sendChat()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <!-- ========== KIT ========== -->
    <div class="page" id="page-kit">
        <section class="section">
            <div class="section-header fade-up">
                <h2>Super <span class="gradient-text">Kit</span></h2>
                <p>26+ powerful tools at your fingertips</p>
            </div>
            <div class="kit-search fade-up">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search tools..." id="kitSearch" oninput="filterKits()">
            </div>
            <div class="kit-grid" id="kitGrid">
                <!-- 工具卡片由JS生成 -->
            </div>
        </section>
    </div>

    <!-- 工具弹窗 -->
    <div class="tool-modal" id="toolModal">
        <div class="tool-modal-content glass" id="toolModalContent">
            <button class="tool-close" onclick="closeToolModal()"><i class="fas fa-times"></i></button>
            <div id="toolBody"></div>
        </div>
    </div>

    <!-- ========== RESEARCH ========== -->
    <div class="page" id="page-research">
        <section class="section">
            <div class="section-header fade-up">
                <h2><span class="gradient-text">Research</span> Papers</h2>
                <p>Our latest publications and findings</p>
            </div>
            <div class="research-list" id="researchList">
                <!-- 由JS生成 -->
            </div>
        </section>
    </div>

    <!-- ========== DOCS ========== -->
    <div class="page" id="page-docs">
        <div class="docs-container">
            <div class="section-header fade-up" style="margin-bottom:40px;text-align:center;">
                <h2><span class="gradient-text">Documentation</span></h2>
                <p>Quick start guide and API reference</p>
            </div>
            <div class="docs-block glass fade-up">
                <h3><i class="fas fa-rocket"></i> Quick Start</h3>
                <p>Welcome to AGI Era! Get started in 3 simple steps:</p>
                <ul>
                    <li>Create an account or log in</li>
                    <li>Choose your preferred AI model (Qwen or DeepSeek)</li>
                    <li>Start chatting or explore the Super Kit tools</li>
                </ul>
            </div>
            <div class="docs-block glass fade-up">
                <h3><i class="fas fa-code"></i> API Reference</h3>
                <p>Use our ChatBot API endpoint:</p>
                <code>POST /api/chat
Content-Type: application/json

{
  "model": "qwen" | "deepseek",
  "messages": [
    {"role": "user", "content": "Hello!"}
  ]
}</code>
                <p>Response format:</p>
                <code>{
  "id": "chat-xxxx",
  "model": "qwen",
  "choices": [
    {"message": {"role":"assistant","content":"Hi there!"}}
  ]
}</code>
            </div>
            <div class="docs-block glass fade-up">
                <h3><i class="fas fa-toolbox"></i> Kit Tools API</h3>
                <p>Each kit tool can be accessed via:</p>
                <code>GET /api/kit/{tool_name}?param=value</code>
                <p>Available tools: speedtest, ping, ip-lookup, qr-generator, translator, calculator, base64, hash, color-picker, unit-converter, and more.</p>
            </div>
            <div class="docs-block glass fade-up">
                <h3><i class="fas fa-shield-alt"></i> Authentication</h3>
                <p>All API calls require a Bearer token:</p>
                <code>Authorization: Bearer YOUR_API_KEY</code>
                <p>You can generate API keys from your account settings page.</p>
            </div>
        </div>
    </div>

    <!-- ========== ABOUT ========== -->
    <div class="page" id="page-about">
        <section class="section">
            <div class="section-header fade-up">
                <h2>About <span class="gradient-text">AGI Era</span></h2>
                <p>Our mission, values, and the team behind the vision</p>
            </div>

            <!-- 使命与愿景 -->
            <div class="about-section">
                <div class="about-grid">
                    <div class="about-card glass fade-up">
                        <h3><i class="fas fa-bullseye"></i> Our Mission</h3>
                        <p>To democratize Artificial General Intelligence by building open, accessible, and safe AI systems that benefit all of humanity. We believe AGI should be a public good.</p>
                    </div>
                    <div class="about-card glass fade-up">
                        <h3><i class="fas fa-eye"></i> Our Vision</h3>
                        <p>A world where advanced AI seamlessly augments human capabilities, accelerating scientific discovery, creativity, and problem-solving on a global scale.</p>
                    </div>
                    <div class="about-card glass fade-up">
                        <h3><i class="fas fa-heart"></i> Our Values</h3>
                        <p>Transparency, safety, collaboration, and innovation. We commit to ethical AI development and believe in building technology that puts people first.</p>
                    </div>
                </div>
            </div>

            <!-- 团队 -->
            <div class="about-section">
                <h2 class="fade-up" style="font-size:1.6rem;font-weight:700;margin-bottom:24px;">
                    Leadership <span class="gradient-text">Team</span>
                </h2>
                <div class="team-grid">
                    <div class="team-card glass fade-up">
                        <div class="team-avatar"><i class="fas fa-user-tie"></i></div>
                        <h4>Alex Chen</h4>
                        <div class="role">Founder & CEO</div>
                    </div>
                    <div class="team-card glass fade-up">
                        <div class="team-avatar"><i class="fas fa-user-cog"></i></div>
                        <h4>Maya Patel</h4>
                        <div class="role">CTO</div>
                    </div>
                    <div class="team-card glass fade-up">
                        <div class="team-avatar"><i class="fas fa-user-graduate"></i></div>
                        <h4>James Liu</h4>
                        <div class="role">Head of Research</div>
                    </div>
                    <div class="team-card glass fade-up">
                        <div class="team-avatar"><i class="fas fa-user-shield"></i></div>
                        <h4>Sarah Kim</h4>
                        <div class="role">VP of Safety</div>
                    </div>
                </div>
            </div>

            <!-- 发展历程 -->
            <div class="about-section">
                <h2 class="fade-up" style="font-size:1.6rem;font-weight:700;margin-bottom:24px;">
                    Our <span class="gradient-text">Journey</span>
                </h2>
                <div class="timeline fade-up">
                    <div class="timeline-item">
                        <div class="year">2023 Q1</div>
                        <h4>Project Launch</h4>
                        <p>AGI Era founded with a mission to build safe and accessible artificial general intelligence.</p>
                    </div>
                    <div class="timeline-item">
                        <div class="year">2023 Q3</div>
                        <h4>First AI Model Integration</h4>
                        <p>Successfully integrated Qwen model for intelligent multi-turn conversations.</p>
                    </div>
                    <div class="timeline-item">
                        <div class="year">2024 Q1</div>
                        <h4>Super Kit Release</h4>
                        <p>Launched 26+ productivity tools in the Super Kit, covering networking, encryption, and utilities.</p>
                    </div>
                    <div class="timeline-item">
                        <div class="year">2024 Q3</div>
                        <h4>DeepSeek Integration</h4>
                        <p>Added DeepSeek model support, offering users multiple AI backends for diverse tasks.</p>
                    </div>
                    <div class="timeline-item">
                        <div class="year">2025</div>
                        <h4>Liquid Glass Redesign</h4>
                        <p>Complete UI overhaul with the Liquid Glass design system — modern, elegant, and immersive.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- ========== SETTINGS ========== -->
    <div class="page" id="page-settings">
        <div class="settings-container">
            <div class="section-header fade-up" style="margin-bottom:40px;text-align:center;">
                <h2><span class="gradient-text">Settings</span></h2>
                <p>Manage your account and preferences</p>
            </div>
            <div class="settings-section glass fade-up">
                <h3><i class="fas fa-user"></i> Profile</h3>
                <div class="settings-row">
                    <span class="label">Username</span>
                    <input type="text" id="settingsUsername" placeholder="Your username">
                </div>
                <div class="settings-row">
                    <span class="label">Email</span>
                    <input type="email" id="settingsEmail" placeholder="your@email.com">
                </div>
                <div class="settings-row">
                    <span class="label">Bio</span>
                    <input type="text" id="settingsBio" placeholder="A short bio...">
                </div>
            </div>
            <div class="settings-section glass fade-up">
                <h3><i class="fas fa-shield-alt"></i> Security</h3>
                <div class="settings-row">
                    <span class="label">Current Password</span>
                    <input type="password" id="currentPw" placeholder="••••••••">
                </div>
                <div class="settings-row">
                    <span class="label">New Password</span>
                    <input type="password" id="newPw" placeholder="••••••••">
                </div>
                <div class="settings-row">
                    <span class="label">Two-Factor Auth</span>
                    <div class="toggle-switch" id="toggle2FA" onclick="toggle2FA()"></div>
                </div>
            </div>
            <div class="settings-section glass fade-up">
                <h3><i class="fas fa-palette"></i> Preferences</h3>
                <div class="settings-row">
                    <span class="label">Dark Mode</span>
                    <div class="toggle-switch on" id="toggleDark" onclick="toggleTheme()"></div>
                </div>
                <div class="settings-row">
                    <span class="label">Notifications</span>
                    <div class="toggle-switch on" id="toggleNotif" onclick="this.classList.toggle('on')"></div>
                </div>
                <div class="settings-row">
                    <span class="label">Default AI Model</span>
                    <select style="padding:8px 12px;border-radius:8px;background:var(--glass-bg);border:1px solid var(--glass-border);color:var(--text-primary);font-size:0.85rem;outline:none;">
                        <option value="qwen">Qwen</option>
                        <option value="deepseek">DeepSeek</option>
                    </select>
                </div>
            </div>
            <button class="tool-btn fade-up" onclick="showToast('Settings saved successfully!','success')" style="width:100%;padding:14px;">
                <i class="fas fa-save"></i> Save Changes
            </button>
        </div>
    </div>

    <!-- ========== AUTH MODAL ========== -->
    <div class="auth-modal" id="authModal">
        <div class="auth-content glass" id="authContent">
            <button class="auth-close" onclick="closeAuth()"><i class="fas fa-times"></i></button>

            <!-- Login Form -->
            <div id="authLogin">
                <h2>Welcome Back</h2>
                <div class="auth-sub">Log in to your AGI Era account</div>
                <div class="auth-field">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="your@email.com">
                </div>
                <div class="auth-field">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="••••••••">
                </div>
                <button class="auth-submit" onclick="handleLogin()">Log In</button>
                <div class="auth-footer">
                    <a onclick="showAuthPanel('forgot')">Forgot password?</a><br>
                    Don't have an account? <a onclick="showAuthPanel('signup')">Sign Up</a>
                </div>
            </div>

            <!-- Signup Form -->
            <div id="authSignup" style="display:none;">
                <h2>Create Account</h2>
                <div class="auth-sub">Join the AGI Era community</div>
                <div class="auth-field">
                    <label>Username</label>
                    <input type="text" id="signupName" placeholder="Choose a username">
                </div>
                <div class="auth-field">
                    <label>Email</label>
                    <input type="email" id="signupEmail" placeholder="your@email.com">
                </div>
                <div class="auth-field">
                    <label>Password
</label>
                    <input type="password" id="signupPassword" placeholder="••••••••">
                </div>
                <div class="auth-field">
                    <label>Confirm Password</label>
                    <input type="password" id="signupConfirm" placeholder="••••••••">
                </div>
                <button class="auth-submit" onclick="handleSignup()">Create Account</button>
                <div class="auth-footer">
                    Already have an account? <a onclick="showAuthPanel('login')">Log In</a>
                </div>
            </div>

            <!-- Forgot Password -->
            <div id="authForgot" style="display:none;">
                <h2>Reset Password</h2>
                <div class="auth-sub">Enter your email to receive a reset link</div>
                <div class="auth-field">
                    <label>Email</label>
                    <input type="email" id="forgotEmail" placeholder="your@email.com">
                </div>
                <button class="auth-submit" onclick="handleForgot()">Send Reset Link</button>
                <div class="auth-footer">
                    <a onclick="showAuthPanel('login')">Back to Log In</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== FOOTER ========== -->
    <footer class="footer" id="mainFooter">
        <div class="footer-links">
            <a href="#" onclick="navigateTo('home')">Home</a>
            <a href="#" onclick="navigateTo('research')">Research</a>
            <a href="#" onclick="navigateTo('chatbot')">ChatBot</a>
            <a href="#" onclick="navigateTo('kit')">Super Kit</a>
            <a href="#" onclick="navigateTo('docs')">Docs</a>
            <a href="#" onclick="navigateTo('about')">About</a>
        </div>
        <p>&copy; 2025 AGI Era. All rights reserved. Built with Liquid Glass Design.</p>
        <div class="visitor-count">
            <i class="fas fa-eye"></i> Visitors: <span id="visitorCount">0</span>
        </div>
    </footer>

    <!-- ========== JAVASCRIPT ========== -->
    <script>
    // ============ 全局状态 ============
    let currentPage = 'home';
    let currentModel = 'qwen';
    let isLoggedIn = false;
    let currentUser = null;
    let chatHistory = [];

    // ============ 闪屏 ============
    window.addEventListener('load', () => {
        setTimeout(() => {
            document.getElementById('splash-screen').classList.add('hidden');
            animateStats();
            initScrollAnimations();
        }, 2200);
        initVisitorCount();
    });

    // ============ 导航 ============
    function navigateTo(page) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        const target = document.getElementById('page-' + page);
        if (target) {
            target.classList.add('active');
            currentPage = page;
        }
        document.querySelectorAll('.nav-links a').forEach(a => {
            a.classList.toggle('active', a.dataset.page === page);
        });
        document.getElementById('navLinks').classList.remove('open');
        window.scrollTo({ top: 0, behavior: 'smooth' });
        setTimeout(initScrollAnimations, 100);
    }

    function toggleMobileMenu() {
        document.getElementById('navLinks').classList.toggle('open');
    }

    // 导航栏滚动效果
    window.addEventListener('scroll', () => {
        const nav = document.getElementById('navbar');
        nav.classList.toggle('scrolled', window.scrollY > 50);
    });

    // ============ 主题切换 ============
    function toggleTheme() {
        const html = document.documentElement;
        const isDark = html.getAttribute('data-theme') !== 'light';
        html.setAttribute('data-theme', isDark ? 'light' : 'dark');
        document.getElementById('themeIcon').className = isDark ? 'fas fa-sun' : 'fas fa-moon';
        const toggle = document.getElementById('toggleDark');
        if (toggle) toggle.classList.toggle('on', !isDark);
        localStorage.setItem('theme', isDark ? 'light' : 'dark');
    }
    // 加载保存的主题
    (function() {
        const saved = localStorage.getItem('theme');
        if (saved === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
            setTimeout(() => {
                document.getElementById('themeIcon').className = 'fas fa-sun';
                const t = document.getElementById('toggleDark');
                if (t) t.classList.remove('on');
            }, 0);
        }
    })();

    // ============ 滚动动画 ============
    function initScrollAnimations() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.fade-up:not(.visible)').forEach(el => observer.observe(el));
    }

    // ============ 统计数字动画 ============
    function animateStats() {
        animateNumber('stat1', 0, 5, 1500);
        animateNumber('stat2', 0, 26, 1500);
        animateNumber('stat3', 0, 12, 1500);
        animateNumber('stat4', 0, 50, 1500);
    }
    function animateNumber(id, start, end, duration) {
        const el = document.getElementById(id);
        if (!el) return;
        const range = end - start;
        const startTime = performance.now();
        function update(now) {
            const elapsed = now - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const eased = 1 - Math.pow(1 - progress, 3);
            el.textContent = Math.floor(start + range * eased) + '+';
            if (progress < 1) requestAnimationFrame(update);
        }
        requestAnimationFrame(update);
    }

    // ============ Toast通知 ============
    function showToast(msg, type = 'success') {
        const t = document.getElementById('toast');
        t.textContent = msg;
        t.className = 'toast ' + type + ' show';
        setTimeout(() => t.classList.remove('show'), 3000);
    }

    // ============ 认证系统 ============
    function openAuth(type) {
        document.getElementById('authModal').classList.add('open');
        showAuthPanel(type);
    }
    function closeAuth() {
        document.getElementById('authModal').classList.remove('open');
    }
    function showAuthPanel(panel) {
        document.getElementById('authLogin').style.display = panel === 'login' ? 'block' : 'none';
        document.getElementById('authSignup').style.display = panel === 'signup' ? 'block' : 'none';
        document.getElementById('authForgot').style.display = panel === 'forgot' ? 'block' : 'none';
    }
    function handleLogin() {
        const email = document.getElementById('loginEmail').value.trim();
        const pw = document.getElementById('loginPassword').value.trim();
        if (!email || !pw) return showToast('Please fill in all fields', 'error');
        // 模拟登录 — 检查localStorage
        const users = JSON.parse(localStorage.getItem('agiUsers') || '[]');
        const user = users.find(u => u.email === email && u.password === pw);
        if (user) {
            loginSuccess(user);
        } else {
            showToast('Invalid email or password', 'error');
        }
    }
    function handleSignup() {
        const name = document.getElementById('signupName').value.trim();
        const email = document.getElementById('signupEmail').value.trim();
        const pw = document.getElementById('signupPassword').value.trim();
        const confirm = document.getElementById('signupConfirm').value.trim();
        if (!name || !email || !pw || !confirm) return showToast('Please fill in all fields', 'error');
        if (pw !== confirm) return showToast('Passwords do not match', 'error');
        if (pw.length < 6) return showToast('Password must be at least 6 characters', 'error');
        const users = JSON.parse(localStorage.getItem('agiUsers') || '[]');
        if (users.find(u => u.email === email)) return showToast('Email already registered', 'error');
        const newUser = { name, email, password: pw, bio: '', created: new Date().toISOString() };
        users.push(newUser);
        localStorage.setItem('agiUsers', JSON.stringify(users));
        loginSuccess(newUser);
        showToast('Account created successfully!', 'success');
    }
    function handleForgot() {
        const email = document.getElementById('forgotEmail').value.trim();
        if (!email) return showToast('Please enter your email', 'error');
        showToast('Reset link sent to ' + email, 'success');
        setTimeout(() => showAuthPanel('login'), 1500);
    }
    function loginSuccess(user) {
        isLoggedIn = true;
        currentUser = user;
        localStorage.setItem('agiCurrentUser', JSON.stringify(user));
        closeAuth();
        updateAuthUI();
        showToast('Welcome back, ' + user.name + '!', 'success');
        // 填充设置
        document.getElementById('settingsUsername').value = user.name || '';
        document.getElementById('settingsEmail').value = user.email || '';
        document.getElementById('settingsBio').value = user.bio || '';
    }
    function logoutUser() {
        isLoggedIn = false;
        currentUser = null;
        localStorage.removeItem('agiCurrentUser');
        updateAuthUI();
        showToast('Logged out successfully', 'success');
        navigateTo('home');
    }
    function updateAuthUI() {
        document.getElementById('loginBtn').style.display = isLoggedIn ? 'none' : '';
        document.getElementById('signupBtn').style.display = isLoggedIn ? 'none' : '';
        document.getElementById('profileBtn').style.display = isLoggedIn ? '' : 'none';
        document.getElementById('logoutBtn').style.display = isLoggedIn ? '' : 'none';
        if (isLoggedIn && currentUser) {
            document.getElementById('profileName').textContent = currentUser.name;
        }
    }
    // 自动登录
    (function() {
        const saved = localStorage.getItem('agiCurrentUser');
        if (saved) {
            try {
                const user = JSON.parse(saved);
                loginSuccess(user);
            } catch(e) {}
        }
    })();

    // ============ 访客统计 ============
    function initVisitorCount() {
        let count = parseInt(localStorage.getItem('agiVisitors') || '0');
        if (!sessionStorage.getItem('agiVisited')) {
            count++;
            localStorage.setItem('agiVisitors', count);
            sessionStorage.setItem('agiVisited', '1');
        }
        animateNumber('visitorCount', 0, count, 1500);
        // 修正最终值
        setTimeout(() => {
            document.getElementById('visitorCount').textContent = count;
        }, 1600);
    }

    // ============ 2FA Toggle ============
    function toggle2FA() {
        const el = document.getElementById('toggle2FA');
        el.classList.toggle('on');
        showToast(el.classList.contains('on') ? '2FA Enabled' : '2FA Disabled', 'success');
    }

    // ============ ChatBot ============
    function switchModel(model) {
        currentModel = model;
        document.querySelectorAll('.model-btn').forEach(b => {
            b.classList.toggle('active', b.dataset.model === model);
        });
        showToast('Switched to ' + model.charAt(0).toUpperCase() + model.slice(1), 'success');
    }

    function sendChat() {
        const input = document.getElementById('chatInput');
        const msg = input.value.trim();
        if (!msg) return;
        input.value = '';

        appendChatMessage('user', msg);

        // 显示typing指示
        const typingId = 'typing-' + Date.now();
        appendTypingIndicator(typingId);

        // 调用AI API
        callAI(msg).then(reply => {
            removeTyping(typingId);
            appendChatMessage('bot', reply);
        }).catch(err => {
            removeTyping(typingId);
            appendChatMessage('bot', 'Sorry, an error occurred. Please try again.');
        });
    }

    function appendChatMessage(role, text) {
        const box = document.getElementById('chatBox');
        const div = document.createElement('div');
        div.className = 'chat-message ' + role;
        const icon = role === 'bot' ? '<i class="fas fa-robot"></i>' : '<i class="fas fa-user"></i>';
        div.innerHTML = `
            <div class="chat-avatar">${icon}</div>
            <div class="chat-bubble">${escapeHTML(text)}</div>
        `;
        box.appendChild(div);
        box.scrollTop = box.scrollHeight;
        chatHistory.push({ role: role === 'bot' ? 'assistant' : 'user', content: text });
    }

    function appendTypingIndicator(id) {
        const box = document.getElementById('chatBox');
        const div = document.createElement('div');
        div.className = 'chat-message bot';
        div.id = id;
        div.innerHTML = `
            <div class="chat-avatar"><i class="fas fa-robot"></i></div>
            <div class="chat-bubble" style="opacity:0.6;">Thinking<span class="typing-dots">...</span></div>
        `;
        box.appendChild(div);
        box.scrollTop = box.scrollHeight;
    }
    function removeTyping(id) {
        const el = document.getElementById(id);
        if (el) el.remove();
    }

    async function callAI(message) {
        const apiConfigs = {
            qwen: {
                url: 'https://api.siliconflow.cn/v1/chat/completions',
                key: 'sk-your-key-here',
                model: 'Qwen/Qwen2.5-7B-Instruct'
            },
            deepseek: {
                url: 'https://api.siliconflow.cn/v1/chat/completions',
                key: 'sk-your-key-here',
                model: 'deepseek-ai/DeepSeek-V2.5'
            }
        };
        const config = apiConfigs[currentModel];
        const messages = [
            { role: 'system', content: 'You are a helpful AI assistant from AGI Era. Be concise, helpful, and friendly.' },
            ...chatHistory.slice(-10),
            { role: 'user', content: message }
        ];

        try {
            const res = await fetch(config.url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer ' + config.key
                },
                body: JSON.stringify({
                    model: config.model,
                    messages: messages,
                    max_tokens: 1024,
                    temperature: 0.7
                })
            });
            const data = await res.json();
            if (data.choices && data.choices[0]) {
                return data.choices[0].message.content;
            }
            return 'I received your message but could not generate a response. (API may need configuration)';
        } catch (e) {
            // 本地降级回复
            return localFallbackReply(message);
        }
    }

    function localFallbackReply(msg) {
        const replies = [
            "That's an interesting question! While I'm currently in offline mode, I'd love to discuss this further when the API is connected.",
            "I appreciate your message. The AI backend is being configured — please try again shortly.",
            "Great question! I'm running in demo mode right now. Connect an API key in the settings to enable full AI responses.",
            "Thanks for chatting with me! Full AI capabilities will be available once the API endpoint is configured.",
            "I'm here to help! Currently in demo mode. For full responses, please configure the AI API key."
        ];
        return replies[Math.floor(Math.random() * replies.length)];
    }

    function escapeHTML(str) {
        const div = document.createElement('div');
        div.textContent = str;
        return div.innerHTML;
    }

    // ============ Super Kit 工具 ============
    const kitTools = [
        { id:'speedtest', name:'Speed Test', icon:'fa-tachometer-alt', desc:'Test internet speed' },
        { id:'ping', name:'Ping Test', icon:'fa-satellite-dish', desc:'Ping a host' },
        { id:'ip', name:'IP Lookup', icon:'fa-map-marker-alt', desc:'Find IP info' },
        { id:'dns', name:'DNS Lookup', icon:'fa-server', desc:'Query DNS records' },
        { id:'whois', name:'Whois', icon:'fa-search', desc:'Domain whois info' },
        { id:'qr', name:'QR Generator', icon:'fa-qrcode', desc:'Generate QR codes' },
        { id:'base64', name:'Base64', icon:'fa-exchange-alt', desc:'Encode/Decode Base64' },
        { id:'hash', name:'Hash Generator', icon:'fa-fingerprint', desc:'MD5/SHA hashes' },
        { id:'url', name:'URL Encode', icon:'fa-link', desc:'Encode/Decode URLs' },
        { id:'json', name:'JSON Format', icon:'fa-code', desc:'Format JSON data' },
        { id:'color', name:'Color Picker', icon:'fa-palette', desc:'Pick & convert colors' },
        { id:'calc', name:'Calculator', icon:'fa-calculator', desc:'Scientific calculator' },
        { id:'unit', name:'Unit Converter', icon:'fa-ruler', desc:'Convert units' },
        { id:'currency', name:'Currency', icon:'fa-dollar-sign', desc:'Exchange rates' },
        { id:'translate', name:'Translator', icon:'fa-language', desc:'Translate text' },
        { id:'timer', name:'Timer', icon:'fa-stopwatch', desc:'Stopwatch & timer' },
        { id:'password', name:'Password Gen', icon:'fa-key', desc:'Generate passwords' },
        { id:'lorem', name:'Lorem Ipsum', icon:'fa-paragraph', desc:'Generate placeholder' },
        { id:'markdown', name:'Markdown', icon:'fa-file-alt', desc:'Markdown preview' },
        { id:'regex', name:'Regex Tester', icon:'fa-spell-check', desc:'Test regex patterns' },
        { id:'timestamp', name:'Timestamp', icon:'fa-clock', desc:'Unix timestamp tool' },
        { id:'uuid', name:'UUID', icon:'fa-barcode', desc:'Generate UUIDs' },
        { id:'word', name:'Word Counter', icon:'fa-font', desc:'Count words & chars' },
        { id:'diff', name:'Text Diff', icon:'fa-columns', desc:'Compare texts' },
        { id:'css', name:'CSS Minify', icon:'fa-compress', desc:'Minify CSS code' },
        { id:'emoji', name:'Emoji Picker', icon:'fa-smile', desc:'Browse emojis' }
    ];

    function renderKitGrid() {
        const grid = document.getElementById('kitGrid');
        grid.innerHTML = kitTools.map(t => `
            <div class="kit-card glass fade-up" data-name="${t.name.toLowerCase()}" onclick="openTool('${t.id}')">
                <div class="kit-icon"><i class="fas ${t.icon}"></i></div>
                <h4>${t.name}</h4>
                <p>${t.desc}</p>
            </div>
        `).join('');
    }
    renderKitGrid();

    function filterKits() {
        const q = document.getElementById('kitSearch').value.toLowerCase();
        document.querySelectorAll('.kit-card').forEach(card => {
            const name = card.dataset.name;
            card.style.display = name.includes(q) ? '' : 'none';
        });
    }

    // ============ 工具弹窗 ============
    function openTool(id) {
        const body = document.getElementById('toolBody');
        body.innerHTML = getToolHTML(id);
        document.getElementById('toolModal').classList.add('open');
    }
    function closeToolModal() {
        document.getElementById('toolModal').classList.remove('open');
    }

    function getToolHTML(id) {
        const tools = {
            speedtest: `
                <h3><i class="fas fa-tachometer-alt"></i> Speed Test</h3>
                <p style="color:var(--text-secondary);margin-bottom:16px;">Test your internet connection speed</p>
                <button class="tool-btn" onclick="runSpeedTest()"><i class="fas fa-play"></i> Start Test</button>
                <div class="tool-result" id="speedResult">Click Start to begin speed test...</div>
            `,
            ping: `
                <h3><i class="fas fa-satellite-dish"></i> Ping Test</h3>
                <input class="tool-input" id="pingHost" placeholder="Enter hostname (e.g. google.com)">
                <button class="tool-btn" onclick="runPing()"><i class="fas fa-play"></i> Ping</button>
                <div class="tool-result" id="pingResult">Enter a host and click Ping</div>
            `,
            ip: `
                <h3><i class="fas fa-map-marker-alt"></i> IP Lookup</h3>
                <input class="tool-input" id="ipInput" placeholder="Enter IP or leave blank for yours">
                <button class="tool-btn" onclick="runIPLookup()"><i class="fas fa-search"></i> Lookup</button>
                <div class="tool-result" id="ipResult">Click Lookup to find IP information</div>
            `,
            dns: `
                <h3><i class="fas fa-server"></i> DNS Lookup</h3>
                <input class="tool-input" id="dnsInput" placeholder="Enter domain (e.g. example.com)">
                <button class="tool-btn" onclick="runDNS()"><i class="fas fa-search"></i> Lookup</button>
                <div class="tool-result" id="dnsResult">Enter a domain to query</div>
            `,
            whois: `
                <h3><i class="fas fa-search"></i> Whois Lookup</h3>
                <input class="tool-input" id="whoisInput" placeholder="Enter domain">
                <button class="tool-btn" onclick="runWhois()"><i class="fas fa-search"></i> Lookup</button>
                <div class="tool-result" id="whoisResult">Enter a domain</div>
            `,
            qr: `
                <h3><i class="fas fa-qrcode"></i> QR Code Generator</h3>
                <input class="tool-input" id="qrInput" placeholder="Enter text or URL">
                <button class="tool-btn" onclick="generateQR()"><i class="fas fa-qrcode"></i> Generate</button>
                <div class="tool-result" id="qrResult" style="text-align:center;">Enter content and click Generate</div>
            `,
            base64: `
                <h3><i class="fas fa-exchange-alt"></i> Base64 Encode/Decode</h3>
                <textarea class="tool-input" id="b64Input" rows="3" placeholder="Enter text..." style="resize:vertical;font-family:monospace;"></textarea>
                <div style="display:flex;gap:8px;margin-bottom:12px;">
                    <button class="tool-btn" onclick="b64Encode()">Encode</button>
                    <button class="tool-btn" onclick="b64Decode()">Decode</button>
                </div>
                <div class="tool-result" id="b64Result"></div>
            `,
            hash: `
                <h3><i class="fas fa-fingerprint"></i> Hash Generator</h3>
                <input class="tool-input" id="hashInput" placeholder="Enter text to hash">
                <button class="tool-btn" onclick="generateHash()">Generate Hash</button>
                <div class="tool-result" id="hashResult"></div>
            `,
            url: `
                <h3><i class="fas fa-link"></i> URL Encode/Decode</h3>
                <input class="tool-input" id="urlInput" placeholder="Enter URL or encoded string">
                <div style="display:flex;gap:8px;margin-bottom:12px;">
                    <button class="tool-btn" onclick="urlEncode()">Encode</button>
                    <button class="tool-btn" onclick="urlDecode()">Decode</button>
                </div>
                <div class="tool-result" id="urlResult"></div>
            `,
            json: `
                <h3><i class="fas fa-code"></i> JSON Formatter</h3>
                <textarea class="tool-input" id="jsonInput" rows="4" placeholder='{"key":"value"}' style="resize:vertical;font-family:monospace;"></textarea>
                <button class="tool-btn" onclick="formatJSON()">Format</button>
                <pre class="tool-result" id="jsonResult" style="white-space:pre-wrap;"></pre>
            `,
            color: `
                <h3><i class="fas fa-palette"></i> Color Picker</h3>
                <div style="display:flex;gap:12px;align-items:center;margin-bottom:16px;">
                    <input type="color" id="colorPicker" value="#6C63FF" onchange="convertColor()" style="width:60px;height:40px;border:none;cursor:pointer;border-radius:8px;">
                    <input class="tool-input" id="colorHex" value="#6C63FF" placeholder="#HEX" style="margin:0;" oninput="updateColorFromHex()">
                </div>
                <div class="tool-result" id="colorResult">HEX: #6C63FF | RGB: rgb(108,99,255) | HSL: hsl(244,100%,69%)</div>
            `,
            calc: `
                <h3><i class="fas fa-calculator"></i> Calculator</h3>
                <input class="tool-input" id="calcInput" placeholder="e.g. 2+3*4, sqrt(16), sin(45)" style="font-family:monospace;">
                <button class="tool-btn" onclick="runCalc()">=  Calculate</button>
                <div class="tool-result" id="calcResult"></div>
            `,
            unit: `
                <h3><i class="fas fa-ruler"></i> Unit Converter</h3>
                <input class="tool-input" id="unitValue" type="number" placeholder="Enter value">
                <div style="display:flex;gap:8px;margin-bottom:12px;">
                    <select class="tool-input" id="unitFrom" style="width:auto;">
                        <option>km</option><option>m</option><option>cm</option><option>mm</option>
                        <option>mile</option><option>yard</option><option>foot</option><option>inch</option>
                        <option>kg</option><option>g</option><option>lb</option><option>oz</option>
                    </select>
                    <span style="color:var(--text-muted);padding:8px;">→</span>
                    <select class="tool-input" id="unitTo" style="width:auto;">
                        <option>m</option><option>km</option><option>cm</option><option>mm</option>
                        <option>mile</option><option>yard</option><option>foot</option><option>inch</option>
                        <option>kg</option><option>g</option><option>lb</option><option>oz</option>
                    </select>
                </div>
                <button class="tool-btn" onclick="convertUnit()">Convert</button>
                <div class="tool-result" id="unitResult"></div>
            `,
            currency: `
                <h3><i class="fas fa-dollar-sign"></i> Currency Converter</h3>
                <input class="tool-input" id="curAmount" type="number" placeholder="Amount" value="100">
                <div style="display:flex;gap:8px;margin-bottom:12px;">
                    <select class="tool-input" id="curFrom" style="width:auto;">
                        <option>USD</option><option>EUR</option><option>GBP</option><option>CNY</option>
                        <option>JPY</option><option>KRW</option><option>AUD</option><option>CAD</option>
                    </select>
                    <span style="color:var(--text-muted);padding:8px;">→</span>
                    <select class="tool-input" id="curTo" style="width:auto;">
                        <option>CNY</option><option>USD</option><option>EUR</option><option>GBP</option>
                        <option>JPY</option><option>KRW</option><option>AUD</option><option>CAD</option>
                    </select>
                </div>
                <button class="tool-btn" onclick="convertCurrency()">Convert</button>
                <div class="tool-result" id="curResult"></div>
            `,
            translate: `
                <h3><i class="fas fa-language"></i> Translator</h3>
                <textarea class="tool-input" id="transInput" rows="3" placeholder="Enter text to translate..." style="resize:vertical;"></textarea>
                <div style="display:flex;gap:8px;margin-bottom:12px;">
                    <select class="tool-input" id="transFrom" style="width:auto;">
                        <option value="auto">Auto Detect</option>
                        <option value="en">English</option><option value="zh">Chinese</option>
                        <option value="ja">Japanese</option><option value="ko">Korean</option>
                        <option value="fr">French</option><option value="de">German</option>
                        <option value="es">Spanish</option>
                    </select>
                    <span style="color:var(--text-muted);padding:8px;">→</span>
                    <select class="tool-input" id="transTo" style="width:auto;">
                        <option value="en">English</option><option value="zh">Chinese</option>
                        <option value="ja">Japanese</option><option value="ko">Korean</option>
                        <option value="fr">French</option><option value="de">German</option>
                        <option value="es">Spanish</option>
                    </select>
                </div>
                <button class="tool-btn" onclick="runTranslate()">Translate</button>
                <div class="tool-result" id="transResult"></div>
            `,
            timer: `
                <h3><i class="fas fa
-stopwatch"></i> Timer & Stopwatch</h3>
                <div style="text-align:center;margin:20px 0;">
                    <div id="timerDisplay" style="font-size:2.5rem;font-weight:800;font-family:monospace;
                        background:linear-gradient(135deg,var(--primary),var(--secondary));
                        -webkit-background-clip:text;-webkit-text-fill-color:transparent;">00:00:00</div>
                </div>
                <div style="display:flex;gap:8px;justify-content:center;">
                    <button class="tool-btn" onclick="startTimer()"><i class="fas fa-play"></i> Start</button>
                    <button class="tool-btn" onclick="stopTimer()" style="background:linear-gradient(135deg,var(--accent),#FF8C69);"><i class="fas fa-pause"></i> Stop</button>
                    <button class="tool-btn" onclick="resetTimer()" style="background:var(--glass-bg);border:1px solid var(--glass-border);"><i class="fas fa-redo"></i> Reset</button>
                </div>
            `,
            password: `
                <h3><i class="fas fa-key"></i> Password Generator</h3>
                <div class="settings-row" style="border:none;padding:8px 0;">
                    <span class="label">Length</span>
                    <input type="range" id="pwLen" min="8" max="64" value="16" oninput="document.getElementById('pwLenVal').textContent=this.value" style="width:150px;">
                    <span id="pwLenVal" style="color:var(--primary);font-weight:600;">16</span>
                </div>
                <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:16px;font-size:0.85rem;">
                    <label style="display:flex;align-items:center;gap:4px;color:var(--text-secondary);">
                        <input type="checkbox" id="pwUpper" checked> A-Z
                    </label>
                    <label style="display:flex;align-items:center;gap:4px;color:var(--text-secondary);">
                        <input type="checkbox" id="pwLower" checked> a-z
                    </label>
                    <label style="display:flex;align-items:center;gap:4px;color:var(--text-secondary);">
                        <input type="checkbox" id="pwDigits" checked> 0-9
                    </label>
                    <label style="display:flex;align-items:center;gap:4px;color:var(--text-secondary);">
                        <input type="checkbox" id="pwSymbols" checked> !@#$
                    </label>
                </div>
                <button class="tool-btn" onclick="genPassword()"><i class="fas fa-key"></i> Generate</button>
                <div class="tool-result" id="pwResult" style="font-family:monospace;font-size:1.1rem;letter-spacing:1px;cursor:pointer;" onclick="copyToClipboard(this.textContent)"></div>
            `,
            lorem: `
                <h3><i class="fas fa-paragraph"></i> Lorem Ipsum Generator</h3>
                <div style="display:flex;gap:8px;margin-bottom:12px;">
                    <input class="tool-input" id="loremCount" type="number" value="3" min="1" max="20" placeholder="Paragraphs" style="width:120px;">
                    <button class="tool-btn" onclick="genLorem()">Generate</button>
                </div>
                <div class="tool-result" id="loremResult" style="max-height:300px;overflow-y:auto;cursor:pointer;" onclick="copyToClipboard(this.textContent)"></div>
            `,
            markdown: `
                <h3><i class="fas fa-file-alt"></i> Markdown Preview</h3>
                <textarea class="tool-input" id="mdInput" rows="5" placeholder="# Hello World\n\n**Bold** and *italic*\n\n- List item" style="resize:vertical;font-family:monospace;" oninput="previewMD()"></textarea>
                <div class="tool-result" id="mdResult" style="min-height:100px;"></div>
            `,
            regex: `
                <h3><i class="fas fa-spell-check"></i> Regex Tester</h3>
                <input class="tool-input" id="regexPattern" placeholder="Enter regex pattern (e.g. \\d+)">
                <input class="tool-input" id="regexFlags" placeholder="Flags (e.g. gi)" value="g">
                <textarea class="tool-input" id="regexText" rows="3" placeholder="Enter test string..." style="resize:vertical;"></textarea>
                <button class="tool-btn" onclick="testRegex()">Test</button>
                <div class="tool-result" id="regexResult"></div>
            `,
            timestamp: `
                <h3><i class="fas fa-clock"></i> Timestamp Converter</h3>
                <p style="color:var(--text-secondary);margin-bottom:12px;">Current: <span id="tsNow" style="color:var(--primary);font-weight:600;font-family:monospace;"></span></p>
                <input class="tool-input" id="tsInput" placeholder="Enter Unix timestamp or date string">
                <div style="display:flex;gap:8px;margin-bottom:12px;">
                    <button class="tool-btn" onclick="tsToDate()">Timestamp → Date</button>
                    <button class="tool-btn" onclick="dateToTs()">Date → Timestamp</button>
                </div>
                <div class="tool-result" id="tsResult"></div>
                <script>setInterval(()=>{const e=document.getElementById('tsNow');if(e)e.textContent=Math.floor(Date.now()/1000);},1000);<\/script>
            `,
            uuid: `
                <h3><i class="fas fa-barcode"></i> UUID Generator</h3>
                <button class="tool-btn" onclick="genUUID()"><i class="fas fa-sync"></i> Generate UUID</button>
                <div class="tool-result" id="uuidResult" style="font-family:monospace;font-size:1rem;cursor:pointer;margin-top:16px;" onclick="copyToClipboard(this.textContent)">Click Generate</div>
            `,
            word: `
                <h3><i class="fas fa-font"></i> Word Counter</h3>
                <textarea class="tool-input" id="wordInput" rows="5" placeholder="Paste or type text here..." style="resize:vertical;" oninput="countWords()"></textarea>
                <div class="tool-result" id="wordResult">Characters: 0 | Words: 0 | Lines: 0 | Sentences: 0</div>
            `,
            diff: `
                <h3><i class="fas fa-columns"></i> Text Diff</h3>
                <textarea class="tool-input" id="diffA" rows="3" placeholder="Original text..." style="resize:vertical;"></textarea>
                <textarea class="tool-input" id="diffB" rows="3" placeholder="Modified text..." style="resize:vertical;"></textarea>
                <button class="tool-btn" onclick="runDiff()">Compare</button>
                <div class="tool-result" id="diffResult" style="white-space:pre-wrap;"></div>
            `,
            css: `
                <h3><i class="fas fa-compress"></i> CSS Minifier</h3>
                <textarea class="tool-input" id="cssInput" rows="5" placeholder="Paste CSS code here..." style="resize:vertical;font-family:monospace;"></textarea>
                <button class="tool-btn" onclick="minifyCSS()">Minify</button>
                <div class="tool-result" id="cssResult" style="font-family:monospace;word-break:break-all;cursor:pointer;" onclick="copyToClipboard(this.textContent)"></div>
            `,
            emoji: `
                <h3><i class="fas fa-smile"></i> Emoji Picker</h3>
                <input class="tool-input" id="emojiSearch" placeholder="Search emojis..." oninput="filterEmojis()">
                <div class="tool-result" id="emojiGrid" style="display:flex;flex-wrap:wrap;gap:8px;font-size:1.5rem;max-height:300px;overflow-y:auto;cursor:pointer;"></div>
                <div style="margin-top:8px;font-size:0.8rem;color:var(--text-muted);">Click emoji to copy</div>
            `
        };
        return tools[id] || '<h3>Tool</h3><p>This tool is under construction.</p>';
    }

    // ============ 工具功能实现 ============

    // Speed Test
    function runSpeedTest() {
        const el = document.getElementById('speedResult');
        el.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testing download speed...';
        const startTime = performance.now();
        const img = new Image();
        const cacheBuster = '?t=' + Date.now();
        // 使用一个公共图片测试
        img.onload = function() {
            const duration = (performance.now() - startTime) / 1000;
            const fileSize = 5000000; // 估算5MB
            const speed = ((fileSize * 8) / duration / 1024 / 1024).toFixed(2);
            el.innerHTML = `<div style="text-align:center;">
                <div style="font-size:2rem;font-weight:800;color:var(--primary);">${speed} Mbps</div>
                <div style="color:var(--text-muted);margin-top:8px;">Download Speed (estimated)</div>
                <div style="color:var(--text-muted);font-size:0.8rem;margin-top:4px;">Latency: ${Math.floor(duration*1000)}ms</div>
            </div>`;
        };
        img.onerror = function() {
            const duration = (performance.now() - startTime) / 1000;
            const simSpeed = (Math.random() * 80 + 20).toFixed(2);
            el.innerHTML = `<div style="text-align:center;">
                <div style="font-size:2rem;font-weight:800;color:var(--primary);">${simSpeed} Mbps</div>
                <div style="color:var(--text-muted);margin-top:8px;">Download Speed (simulated)</div>
                <div style="color:var(--text-muted);font-size:0.8rem;margin-top:4px;">Duration: ${(duration*1000).toFixed(0)}ms</div>
            </div>`;
        };
        img.src = 'https://upload.wikimedia.org/wikipedia/commons/3/3f/Fronalpstock_big.jpg' + cacheBuster;
    }

    // Ping
    function runPing() {
        const host = document.getElementById('pingHost').value.trim();
        if (!host) return;
        const el = document.getElementById('pingResult');
        el.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Pinging ' + host + '...';
        const times = [];
        let done = 0;
        for (let i = 0; i < 4; i++) {
            setTimeout(() => {
                const start = performance.now();
                fetch('https://' + host, { mode: 'no-cors', cache: 'no-store' })
                    .then(() => { times.push(performance.now() - start); })
                    .catch(() => { times.push(performance.now() - start); })
                    .finally(() => {
                        done++;
                        if (done === 4) {
                            const avg = (times.reduce((a, b) => a + b, 0) / times.length).toFixed(1);
                            const min = Math.min(...times).toFixed(1);
                            const max = Math.max(...times).toFixed(1);
                            el.innerHTML = `Ping ${host}:\n` +
                                times.map((t, i) => `  Reply ${i + 1}: ${t.toFixed(1)}ms`).join('\n') +
                                `\n\nMin: ${min}ms | Avg: ${avg}ms | Max: ${max}ms`;
                        }
                    });
            }, i * 500);
        }
    }

    // IP Lookup
    async function runIPLookup() {
        const el = document.getElementById('ipResult');
        const ip = document.getElementById('ipInput').value.trim();
        el.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Looking up...';
        try {
            const url = ip ? `https://ipapi.co/${ip}/json/` : 'https://ipapi.co/json/';
            const res = await fetch(url);
            const data = await res.json();
            el.innerHTML = `IP: ${data.ip}\nCity: ${data.city}\nRegion: ${data.region}\nCountry: ${data.country_name}\nISP: ${data.org}\nTimezone: ${data.timezone}\nLatitude: ${data.latitude}\nLongitude: ${data.longitude}`;
        } catch (e) {
            el.textContent = 'Error looking up IP. Try again.';
        }
    }

    // DNS Lookup
    async function runDNS() {
        const domain = document.getElementById('dnsInput').value.trim();
        const el = document.getElementById('dnsResult');
        if (!domain) return;
        el.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Querying...';
        try {
            const res = await fetch(`https://dns.google/resolve?name=${domain}&type=A`);
            const data = await res.json();
            if (data.Answer) {
                el.textContent = data.Answer.map(a => `${a.name} → ${a.data} (TTL: ${a.TTL}s)`).join('\n');
            } else {
                el.textContent = 'No records found for ' + domain;
            }
        } catch (e) {
            el.textContent = 'DNS query failed.';
        }
    }

    // Whois
    function runWhois() {
        const domain = document.getElementById('whoisInput').value.trim();
        const el = document.getElementById('whoisResult');
        if (!domain) return;
        el.textContent = `Whois data for ${domain}:\n\nDomain: ${domain}\nRegistrar: Example Registrar Inc.\nCreated: 2020-01-15\nExpires: 2026-01-15\nStatus: Active\n\n(Full whois requires server-side API)`;
    }

    // QR Code
    function generateQR() {
        const text = document.getElementById('qrInput').value.trim();
        const el = document.getElementById('qrResult');
        if (!text) return;
        el.innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(text)}" 
            alt="QR Code" style="border-radius:8px;margin:8px auto;display:block;max-width:200px;">
            <div style="color:var(--text-muted);font-size:0.8rem;margin-top:8px;">Right-click to save</div>`;
    }

    // Base64
    function b64Encode() {
        const val = document.getElementById('b64Input').value;
        document.getElementById('b64Result').textContent = btoa(unescape(encodeURIComponent(val)));
    }
    function b64Decode() {
        try {
            const val = document.getElementById('b64Input').value;
            document.getElementById('b64Result').textContent = decodeURIComponent(escape(atob(val)));
        } catch (e) {
            document.getElementById('b64Result').textContent = 'Invalid Base64 input';
        }
    }

    // Hash
    async function generateHash() {
        const text = document.getElementById('hashInput').value;
        const el = document.getElementById('hashResult');
        if (!text) return;
        const encoder = new TextEncoder();
        const data = encoder.encode(text);
        const sha256 = await crypto.subtle.digest('SHA-256', data);
        const sha1 = await crypto.subtle.digest('SHA-1', data);
        const hex = (buf) => Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2, '0')).join('');
        el.textContent = `SHA-256: ${hex(sha256)}\n\nSHA-1: ${hex(sha1)}`;
    }

    // URL Encode/Decode
    function urlEncode() {
        document.getElementById('urlResult').textContent = encodeURIComponent(document.getElementById('urlInput').value);
    }
    function urlDecode() {
        try {
            document.getElementById('urlResult').textContent = decodeURIComponent(document.getElementById('urlInput').value);
        } catch (e) {
            document.getElementById('urlResult').textContent = 'Invalid encoded string';
        }
    }

    // JSON Formatter
    function formatJSON() {
        try {
            const obj = JSON.parse(document.getElementById('jsonInput').value);
            document.getElementById('jsonResult').textContent = JSON.stringify(obj, null, 2);
        } catch (e) {
            document.getElementById('jsonResult').textContent = 'Invalid JSON: ' + e.message;
        }
    }

    // Color Picker
    function convertColor() {
        const hex = document.getElementById('colorPicker').value;
        document.getElementById('colorHex').value = hex;
        const r = parseInt(hex.substr(1, 2), 16);
        const g = parseInt(hex.substr(3, 2), 16);
        const b = parseInt(hex.substr(5, 2), 16);
        const max = Math.max(r, g, b) / 255, min = Math.min(r, g, b) / 255;
        const l = ((max + min) / 2 * 100).toFixed(0);
        const s = max === min ? 0 : (l > 50 ? ((max - min) / (2 - max - min)) * 100 : ((max - min) / (max + min)) * 100).toFixed(0);
        let h = 0;
        if (max !== min) {
            const d = max - min;
            const rr = r / 255, gg = g / 255, bb = b / 255;
            if (max === rr) h = ((gg - bb) / d + (gg < bb ? 6 : 0)) * 60;
            else if (max === gg) h = ((bb - rr) / d + 2) * 60;
            else h = ((rr - gg) / d + 4) * 60;
        }
        document.getElementById('colorResult').innerHTML = `
            <div style="width:100%;height:40px;border-radius:8px;margin-bottom:8px;background:${hex};"></div>
            HEX: ${hex} | RGB: rgb(${r},${g},${b}) | HSL: hsl(${Math.round(h)},${s}%,${l}%)`;
    }
    function updateColorFromHex() {
        const hex = document.getElementById('colorHex').value;
        if (/^#[0-9A-Fa-f]{6}$/.test(hex)) {
            document.getElementById('colorPicker').value = hex;
            convertColor();
        }
    }

    // Calculator
    function runCalc() {
        const expr = document.getElementById('calcInput').value;
        try {
            const safe = expr
                .replace(/sqrt/g, 'Math.sqrt')
                .replace(/sin/g, 'Math.sin')
                .replace(/cos/g, 'Math.cos')
                .replace(/tan/g, 'Math.tan')
                .replace(/log/g, 'Math.log10')
                .replace(/ln/g, 'Math.log')
                .replace(/pi/gi, 'Math.PI')
                .replace(/pow/g, 'Math.pow')
                .replace(/abs/g, 'Math.abs')
                .replace(/floor/g, 'Math.floor')
                .replace(/ceil/g, 'Math.ceil')
                .replace(/\^/g, '**');
            const result = Function('"use strict"; return (' + safe + ')')();
            document.getElementById('calcResult').textContent = expr + ' = ' + result;
        } catch (e) {
            document.getElementById('calcResult').textContent = 'Error: Invalid expression';
        }
    }

    // Unit Converter
    function convertUnit() {
        const val = parseFloat(document.getElementById('unitValue').value);
        const from = document.getElementById('unitFrom').value;
        const to = document.getElementById('unitTo').value;
        if (isNaN(val)) return;
        const toMeters = {km:1000,m:1,cm:0.01,mm:0.001,mile:1609.34,yard:0.9144,foot:0.3048,inch:0.0254};
        const toGrams = {kg:1000,g:1,lb:453.592,oz:28.3495};
        let result;
        if (toMeters[from] && toMeters[to]) {
            result = val * toMeters[from] / toMeters[to];
        } else if (toGrams[from] && toGrams[to]) {
            result = val * toGrams[from] / toGrams[to];
        } else {
            document.getElementById('unitResult').textContent = 'Cannot convert between these unit types';
            return;
        }
        document.getElementById('unitResult').textContent = `${val} ${from} = ${result.toFixed(6)} ${to}`;
    }

    // Currency Converter
    async function convertCurrency() {
        const amount = parseFloat(document.getElementById('curAmount').value);
        const from = document.getElementById('curFrom').value;
        const to = document.getElementById('curTo').value;
        const el = document.getElementById('curResult');
        if (isNaN(amount)) return;
        el.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Converting...';
        try {
            const res = await fetch(`https://api.exchangerate-api.com/v4/latest/${from}`);
            const data = await res.json();
            const rate = data.rates[to];
            const result = (amount * rate).toFixed(2);
            el.textContent = `${amount} ${from} = ${result} ${to}\nRate: 1 ${from} = ${rate} ${to}`;
        } catch (e) {
            // Fallback rates
            const rates = {USD:1,EUR:0.92,GBP:0.79,CNY:7.24,JPY:149.5,KRW:1320,AUD:1.53,CAD:1.36};
            const r = (rates[to] / rates[from]);
            el.textContent = `${amount} ${from} ≈ ${(amount * r).toFixed(2)} ${to}\n(Offline estimated rate)`;
        }
    }

    // Translator
    async function runTranslate() {
        const text = document.getElementById('transInput').value.trim();
        const from = document.getElementById('transFrom').value;
        const to = document.getElementById('transTo').value;
        const el = document.getElementById('transResult');
        if (!text) return;
        el.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Translating...';
        try {
            const res = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${from}|${to}`);
            const data = await res.json();
            el.textContent = data.responseData.translatedText;
        } catch (e) {
            el.textContent = 'Translation service unavailable. Please try again later.';
        }
    }

    // Timer
    let timerInterval = null;
    let timerSeconds = 0;
    function startTimer() {
        if (timerInterval) return;
        timerInterval = setInterval(() => {
            timerSeconds++;
            updateTimerDisplay();
        }, 1000);
    }
    function stopTimer() {
        clearInterval(timerInterval);
        timerInterval = null;
    }
    function resetTimer() {
        stopTimer();
        timerSeconds = 0;
        updateTimerDisplay();
    }
    function updateTimerDisplay() {
        const h = String(Math.floor(timerSeconds / 3600)).padStart(2, '0');
        const m = String(Math.floor((timerSeconds % 3600) / 60)).padStart(2, '0');
        const s = String(timerSeconds % 60).padStart(2, '0');
        const el = document.getElementById('timerDisplay');
        if (el) el.textContent = `${h}:${m}:${s}`;
    }

    // Password Generator
    function genPassword() {
        const len = parseInt(document.getElementById('pwLen').value);
        let chars = '';
        if (document.getElementById('pwUpper').checked) chars += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        if (document.getElementById('pwLower').checked) chars += 'abcdefghijklmnopqrstuvwxyz';
        if (document.getElementById('pwDigits').checked) chars += '0123456789';
        if (document.getElementById('pwSymbols').checked) chars += '!@#$%^&*()_+-=[]{}|;:,.<>?';
        if (!chars) chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
        let pw = '';
        for (let i = 0; i < len; i++) pw += chars.charAt(Math.floor(Math.random() * chars.length));
        document.getElementById('pwResult').textContent = pw;
    }

    // Lorem Ipsum
    function genLorem() {
        const count = parseInt(document.getElementById('loremCount').value) || 3;
        const sentences = [
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
            "Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
            "Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.",
            "Duis aute irure dolor in reprehenderit in voluptate velit esse cillum.",
            "Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia.",
            "Nulla facilisi etiam dignissim diam quis enim lobortis scelerisque.",
            "Volutpat consequat mauris nunc congue nisi vitae suscipit tellus.",
            "Amet consectetur adipiscing elit pellentesque habitant morbi tristique.",
            "Faucibus nisl tincidunt eget nullam non nisi est sit amet.",
            "Turpis egestas integer eget aliquet nibh praesent tristique magna."
        ];
        let result = '';
        for (let i = 0; i < count; i++) {
            let para = '';
            const sentCount = Math.floor(Math.random() * 4) + 3;
            for (let j = 0; j < sentCount; j++) {
                para += sentences[Math.floor(Math.random() * sentences.length)] + ' ';
            }
            result += para.trim() + '\n\n';
        }
        document.getElementById('loremResult').textContent = result.trim();
    }

    // Markdown Preview
    function previewMD() {
        const md = document.getElementById('mdInput').value;
        let html = md
            .replace(/^### (.+)$/gm, '<h3>$1</h3>')
            .replace(/^## (.+)$/gm, '<h2>$1</h2>')
            .replace(/^# (.+)$/gm, '<h1 style="font-size:1.3rem;">$1</h1>')
            .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
            .replace(/\*(.+?)\*/g, '<em>$1</em>')
            .replace(/`(.+?)`/g, '<code style="background:rgba(108,99,255,0.15);padding:2px 6px;border-radius:4px;">$1</code>')
            .replace(/^- (.+)$/gm, '<li>$1</li>')
            .replace(/\n/g, '<br>');
        document.getElementById('mdResult').innerHTML = html;
    }

    // Regex Tester
    function testRegex() {
        const pattern = document.getElementById('regexPattern').value;
        const flags = document.getElementById('regexFlags').value;
        const text = document.getElementById('regexText').value;
        const el = document.getElementById('regexResult');
        try {
            const regex = new RegExp(pattern, flags);
            const matches = [...text.matchAll(regex)];
            if (matches.length === 0) {
                el.textContent = 'No matches found';
            } else {
                el.textContent = `Found ${matches.length} match(es):\n\n` +
                    matches.map((m, i) => `Match ${i + 1}: "${m[0]}" at index ${m.index}`).join('\n');
            }
        } catch (e) {
            el.textContent = 'Invalid regex: ' + e.message;
        }
    }

    // Timestamp
    function tsToDate() {
        const ts = document.getElementById('tsInput').value.trim();
        const num = parseInt(ts);
        if (isNaN(num)) return;
        const d = new Date(num * (ts.length <= 10 ? 1000 : 1));
        document.getElementById('tsResult').textContent = `UTC: ${d.toUTCString()}\nLocal: ${d.toLocaleString()}\nISO: ${d.toISOString()}`;
    }
    function dateToTs() {
        const str = document.getElementById('tsInput').value.trim();
        const d = new Date(str);
        if (isNaN(d.getTime())) {
            document.getElementById('tsResult').textContent = 'Invalid date string';
            return;
        }
        document.getElementById('tsResult').textContent = `Unix Timestamp: ${Math.floor(d.getTime() / 1000)}\nMilliseconds: ${d.getTime()}`;
    }

    // UUID Generator
    function genUUID() {
        const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
            const r = Math.random() * 16 | 0;
            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);
        });
        document.getElementById('uuidResult').textContent = uuid;
    }

    // Word Counter
    function countWords() {
        const text = document.getElementById('wordInput').value;
        const chars = text.length;
        const words = text.trim() ? text.trim().split(/\s+/).length : 0;
        const lines = text.trim() ? text.split('\n').length : 0;
        const sentences = text
.trim() ? text.split(/[.!?。！？]+/).filter(s => s.trim()).length : 0;
        document.getElementById('wordResult').textContent = 
            `Characters: ${chars} | Words: ${words} | Lines: ${lines} | Sentences: ${sentences}`;
    }

    // Text Diff
    function runDiff() {
        const a = document.getElementById('diffA').value.split('\n');
        const b = document.getElementById('diffB').value.split('\n');
        const el = document.getElementById('diffResult');
        let result = '';
        const maxLen = Math.max(a.length, b.length);
        for (let i = 0; i < maxLen; i++) {
            const lineA = a[i] || '';
            const lineB = b[i] || '';
            if (lineA === lineB) {
                result += `  ${lineA}\n`;
            } else {
                if (lineA) result += `<span style="color:var(--accent);">- ${escapeHTML(lineA)}</span>\n`;
                if (lineB) result += `<span style="color:var(--secondary);">+ ${escapeHTML(lineB)}</span>\n`;
            }
        }
        el.innerHTML = result || 'No differences found.';
    }

    // CSS Minifier
    function minifyCSS() {
        const css = document.getElementById('cssInput').value;
        const minified = css
            .replace(/\/\*[\s\S]*?\*\//g, '')
            .replace(/\s+/g, ' ')
            .replace(/\s*([{}:;,>~+])\s*/g, '$1')
            .replace(/;}/g, '}')
            .trim();
        document.getElementById('cssResult').textContent = minified;
    }

    // Emoji Picker
    const emojis = [
        '😀','😃','😄','😁','😆','😅','🤣','😂','🙂','😉','😊','😇',
        '🥰','😍','🤩','😘','😗','😚','😋','😛','😜','🤪','😝','🤑',
        '🤗','🤭','🤫','🤔','🤐','🤨','😐','😑','😶','😏','😒','🙄',
        '😬','😮','😯','😲','😳','🥺','😦','😧','😨','😰','😥','😢',
        '😭','😱','😖','😣','😞','😓','😩','😫','🥱','😤','😡','🤬',
        '👍','👎','👊','✊','🤛','🤜','👏','🙌','👐','🤲','🤝','🙏',
        '✨','🔥','💯','❤️','🧡','💛','💚','💙','💜','🖤','🤍','💔',
        '🌟','⭐','🌈','☀️','🌙','⚡','💧','🌊','🎉','🎊','🎈','🎁',
        '🏆','🥇','🎯','🚀','✈️','🌍','💻','📱','⌚','📷','🎵','🎶',
        '☕','🍕','🍔','🍟','🍰','🎂','🍎','🍊','🍋','🍇','🍓','🍑'
    ];
    function renderEmojis(filter = '') {
        const grid = document.getElementById('emojiGrid');
        if (!grid) return;
        const filtered = filter ? emojis.filter(e => true) : emojis; // emojis are unicode, simple display
        grid.innerHTML = filtered.map(e => 
            `<span onclick="copyToClipboard('${e}')" style="cursor:pointer;padding:4px;border-radius:6px;transition:all 0.2s;" 
            onmouseover="this.style.background='var(--glass-bg)'" onmouseout="this.style.background='none'">${e}</span>`
        ).join('');
    }
    function filterEmojis() {
        renderEmojis(document.getElementById('emojiSearch').value);
    }
    // 工具弹窗打开时初始化emoji
    const origOpenTool = openTool;
    openTool = function(id) {
        origOpenTool(id);
        if (id === 'emoji') setTimeout(() => renderEmojis(), 50);
        if (id === 'timestamp') {
            setTimeout(() => {
                const el = document.getElementById('tsNow');
                if (el) el.textContent = Math.floor(Date.now() / 1000);
            }, 50);
        }
    };

    // 复制到剪贴板
    function copyToClipboard(text) {
        if (!text || !text.trim()) return;
        navigator.clipboard.writeText(text).then(() => {
            showToast('Copied to clipboard!', 'success');
        }).catch(() => {
            // Fallback
            const ta = document.createElement('textarea');
            ta.value = text;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            document.body.removeChild(ta);
            showToast('Copied to clipboard!', 'success');
        });
    }

    // ============ Research 页面数据 ============
    const researchPapers = [
        {
            title: 'Scaling Laws for Neural Language Models',
            desc: 'An empirical study of the scaling properties of Transformer language models, exploring the relationship between model size, dataset size, and compute budget.',
            date: '2024-12',
            tag: 'NLP'
        },
        {
            title: 'Towards Safe and Aligned AGI Systems',
            desc: 'A comprehensive framework for ensuring AI alignment with human values, including novel approaches to reward modeling and constitutional AI.',
            date: '2024-10',
            tag: 'Safety'
        },
        {
            title: 'Multi-Modal Reasoning in Large Language Models',
            desc: 'Investigating the emergent multi-modal reasoning capabilities in large-scale language models and their applications in visual question answering.',
            date: '2024-08',
            tag: 'Multi-Modal'
        },
        {
            title: 'Efficient Fine-Tuning with LoRA and QLoRA',
            desc: 'Low-rank adaptation techniques for efficient fine-tuning of large language models, reducing memory requirements by up to 80%.',
            date: '2024-06',
            tag: 'Optimization'
        },
        {
            title: 'Reinforcement Learning from Human Feedback',
            desc: 'A detailed analysis of RLHF techniques for improving language model outputs, with new approaches to preference learning.',
            date: '2024-04',
            tag: 'RLHF'
        },
        {
            title: 'Emergent Abilities of Large Language Models',
            desc: 'Documenting and analyzing capabilities that emerge unpredictably as language models scale, including chain-of-thought reasoning.',
            date: '2024-02',
            tag: 'Research'
        },
        {
            title: 'Distributed Training at Scale',
            desc: 'Novel techniques for training trillion-parameter models across thousands of GPUs with near-linear scaling efficiency.',
            date: '2023-11',
            tag: 'Infrastructure'
        },
        {
            title: 'Long Context Window Architectures',
            desc: 'Extending transformer context windows to millions of tokens using sparse attention mechanisms and memory-efficient designs.',
            date: '2023-09',
            tag: 'Architecture'
        },
        {
            title: 'Code Generation and Program Synthesis',
            desc: 'Evaluating large language models on code generation benchmarks and exploring their potential for automated software engineering.',
            date: '2023-07',
            tag: 'Code'
        },
        {
            title: 'Multilingual Transfer Learning',
            desc: 'Cross-lingual transfer capabilities of multilingual models, with focus on low-resource language performance.',
            date: '2023-05',
            tag: 'Multilingual'
        },
        {
            title: 'Hallucination Detection and Mitigation',
            desc: 'Techniques for identifying and reducing factual hallucinations in language model outputs, improving reliability and trustworthiness.',
            date: '2023-03',
            tag: 'Safety'
        },
        {
            title: 'Mixture of Experts for Efficient Inference',
            desc: 'Sparse mixture-of-experts architectures that achieve superior performance while using a fraction of the compute during inference.',
            date: '2023-01',
            tag: 'Architecture'
        }
    ];

    function renderResearch() {
        const list = document.getElementById('researchList');
        list.innerHTML = researchPapers.map(p => `
            <div class="research-card glass fade-up">
                <div class="r-icon"><i class="fas fa-file-alt"></i></div>
                <div>
                    <h4>${p.title}</h4>
                    <p>${p.desc}</p>
                    <div class="meta">
                        <span style="background:rgba(108,99,255,0.15);color:var(--primary);padding:2px 10px;border-radius:6px;font-weight:600;margin-right:8px;">${p.tag}</span>
                        <i class="fas fa-calendar"></i> ${p.date}
                    </div>
                </div>
            </div>
        `).join('');
    }
    renderResearch();

    // ============ 点击弹窗外关闭 ============
    document.getElementById('toolModal').addEventListener('click', function(e) {
        if (e.target === this) closeToolModal();
    });
    document.getElementById('authModal').addEventListener('click', function(e) {
        if (e.target === this) closeAuth();
    });

    // ============ 键盘快捷键 ============
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeToolModal();
            closeAuth();
        }
    });

    // ============ 页面加载完成后初始化滚动动画 ============
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(initScrollAnimations, 300);
    });

    // ============ 控制台欢迎信息 ============
    console.log('%c🚀 AGI Era - Liquid Glass Edition', 
        'font-size:20px;font-weight:bold;color:#6C63FF;');
    console.log('%cBuilt with ❤️ and pure HTML/CSS/JS', 
        'font-size:12px;color:#00D4AA;');

    </script>
</body>
</html>
